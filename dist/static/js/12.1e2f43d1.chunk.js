(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{1397:function(e,t,a){e.exports=a(3)(261)},1430:function(e,t,a){e.exports=a(3)(144)},498:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return x});var n,r,i,s=a(50),o=(a(1515),a(1430)),c=(a(494),a(150)),l=(a(493),a(71)),d=(a(1496),a(1397)),u=(a(489),a(322)),p=(a(488),a(320)),h=a(15),f=a(48),m=a(49),v=a(53),C=a(52),g=a(54),y=a(94),b=a(83),k=a.n(b),w=a(0),I=a.n(w),O=a(95),j=a(57),T=a(18),E=a(499),N=a.n(E),S={minWidth:"120px"},x=(n=Object(O["Bind"])(),i=function(e){function t(){var e,a;Object(f["a"])(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=Object(v["a"])(this,(e=Object(C["a"])(t)).call.apply(e,[this].concat(r))),a.state={editCards:{}},a.timer={},a}return Object(g["a"])(t,e),Object(m["a"])(t,[{key:"componentDidUpdate",value:function(e){var t=this,a=e.visible,n=this.props,r=n.visible,i=n.loadAssignableCards;!1===a&&!0===r&&i().then(function(e){if(e){var a=t.props,n=a.prevRoleCards,r=a.roleCards,i=a.layout,s=a.catalogType,o=a.isInitCard,c={};s.forEach(function(e){c[e.value]={cards:[]}}),r.forEach(function(e){var t=String(e.cardId),a=i.find(function(e){return e.i===t}),r=Object(h["a"])({},e,a);r.isNew=!!n&&!n.some(function(e){return String(e.cardId)===t}),r.isInsert=!!a,r.isInit=o(t),c[r.catalogType]&&c[r.catalogType].cards.push(r)}),t.setState({editCards:c})}})}},{key:"shouldComponentUpdate",value:function(e){var t=e.visible,a=this.props.visible;return!0===t||!1===t&&!0===a}},{key:"componentWillUnmount",value:function(){k()(this.timer,function(e){clearTimeout(e)})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.loading,r=void 0!==n&&n;return I.a.createElement(u["default"],{destroyOnClose:!0,title:I.a.createElement("span",{className:N.a["card-setting-title"]},T["a"].get("hzero.workplace.view.title.cardsSetting").d("\u5361\u7247\u8bbe\u7f6e")),style:S,wrapClassName:"ant-modal-sidebar-right",transitionName:"move-right",className:N.a["card-setting"],visible:t,onCancel:a,footer:null},I.a.createElement(p["default"],{spinning:r},this.renderCatalogTypeRow()))}},{key:"renderCatalogTypeRow",value:function(){var e=this,t=this.props.catalogType,a=this.state.editCards;return t.map(function(t){var n=a[t.value];return n&&n.cards.length>0?I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{key:"title",className:N.a["card-col-title"]},t.meaning),I.a.createElement(d["default"],{gutter:16,key:t.value,className:N.a["card-row"],type:"flex",justify:"start"},e.renderCatalogTypeCols(t,n.cards))):null})}},{key:"renderCatalogTypeCols",value:function(e,t){var a=this;return t.map(function(t){return I.a.createElement(o["default"],{key:t.cardId,className:N.a["card-col"]},I.a.createElement(l["default"].CheckableTag,{key:"is-insert",className:N.a["card-col-tag"],onChange:function(n){return a.handleCardInsertChange(t,e,n)},checked:t.isInsert,disabled:t.isInit},t.name),t.isNew&&I.a.createElement(c["default"],{key:"is-new",dot:!0}))})}},{key:"handleCardInsertChange",value:function(e,t,a){var n=this.state.editCards,r=n[t.value].cards,i=r.map(function(t){return t.cardId===e.cardId?Object(h["a"])({},t,{isInsert:a}):t});this.setState({editCards:Object(h["a"])({},n,Object(s["a"])({},t.value,{cards:i}))}),this.changeCard(e,a)}},{key:"changeCard",value:function(e,t){var a=this,n=String(e.cardId);this.timer[n]&&clearTimeout(this.timer[n]),this.timer[n]=setTimeout(function(){a.realChangeCard(e,t)},j["a"])}},{key:"realChangeCard",value:function(e,t){var a=this.props,n=a.onAddCard,r=a.onRemoveCard,i=String(e.cardId);t?n(e):r(i)}}]),t}(I.a.Component),r=i,Object(y["a"])(r.prototype,"realChangeCard",[n],Object.getOwnPropertyDescriptor(r.prototype,"realChangeCard"),r.prototype),r)}}]);