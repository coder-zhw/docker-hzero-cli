(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{1376:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"c",function(){return O}),n.d(t,"n",function(){return k}),n.d(t,"o",function(){return C}),n.d(t,"f",function(){return w}),n.d(t,"l",function(){return M}),n.d(t,"g",function(){return x}),n.d(t,"i",function(){return T}),n.d(t,"h",function(){return N}),n.d(t,"a",function(){return S}),n.d(t,"e",function(){return A}),n.d(t,"d",function(){return I}),n.d(t,"k",function(){return D}),n.d(t,"m",function(){return L}),n.d(t,"j",function(){return P});n(1297);var a=n(1420),r=n.n(a),o=n(64),i=n(15),c=n(42),l=n(85),u=n.n(l),s=n(0),d=n.n(s),p=n(80),h=n.n(p),f=n(1398),m=n(18),y=n(96),g=n(1296),b=n.n(g);function v(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=0;n<e.length;n++){var a=e[n];if(a.__pathExp.test(t))return[a.subMenu.mainMenu,a.subMenu,a]}return[]}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=e.map(function(e){var n=e.children,a=void 0===n?[]:n,r=Object(c["a"])(e,["children"]),l=[];return E(e)?l.push(Object(i["a"])({},r,{isOnlyMainMenu:!0})):l.push.apply(l,Object(o["a"])(a)),r.children=l.map(function(e){var n=e.children,a=void 0===n?[]:n,l=Object(c["a"])(e,["children"]),u=[];l.mainMenu=r;var s=[];return E(e)?s.push(Object(i["a"])({},e,{isOnlySubMenu:!0})):s.push.apply(s,Object(o["a"])(a)),j(s,u,l,!1),t.push.apply(t,u),l.children=u,1===u.length&&u[0].id===l.id&&(l.isOnlySubMenu=!0),l}),r.allChildrenAreOnlySubMenu=r.children.every(function(e){return e.isOnlySubMenu}),r});return{leafMenus:t,menus:n}}function j(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=0;a<e.length;a++){var r=e[a],o=r.children,i=Object(c["a"])(r,["children"]);E(i)&&(i.subMenu=n,i.__pathExp=h()(i.path,[],{end:!1}),t.push(i)),u()(o)||j(o,t,n,!0)}return t}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.path&&u()(e.children)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main-menu-item",n=[b.a["".concat(t,"-icon")]],a=e.name,o=e.icon,i=e.path;return n.push(b.a["".concat(t,"-icon-img")]),a.includes("choerodon")&&i.includes("hlcd")?d.a.createElement(r.a,{type:o,style:{fontSize:"12px"},className:n.join(" ")}):d.a.createElement(f["a"],{type:o,className:n.join(" ")})}function C(e){return e.name&&m["a"].get(e.name)||"..."}function w(e){return e.id}function M(e){if("window"===e.type&&e.path){var t=e.path.startsWith("http")?e.path:"http://".concat(e.path),n=window.open(t);n.opener=null}else Object(y["i"])({icon:e.icon,title:e.name,key:"link"===e.type||"inner-link"===e.type?"/link/".concat(e.id):e.path,closable:!0,search:e.search,type:e.type})}function x(e){return["dir","root"].includes(e.type)}function T(e){return["menu","link","inner-link","window"].includes(e.type)}function N(e){return["link","inner-link"].includes(e.type)}var S=d.a.createContext(void 0,function(e,t){return e===t?0:1}),A=220,I=64,D=44,L=48,P=40},1379:function(e,t,n){e.exports=n(3)(111)},1385:function(e,t,n){e.exports=n(3)(164)},1391:function(e,t,n){e.exports=n(3)(2095)},1392:function(e,t,n){e.exports=n(3)(1156)},1393:function(e,t,n){e.exports=n(3)(1161)},1394:function(e,t,n){e.exports=n(3)(1151)},1395:function(e,t,n){e.exports=n(3)(534)},1396:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n(2),r=n.n(a),o=n(50),i=n(19),c=n(48),l=n(49),u=n(53),s=n(52),d=n(54),p=n(141),h=n.n(p),f=n(112),m=n.n(f),y=n(0),g=n.n(y),b=n(84),v=n(5),O=n(18),j=n(46),E=new Map;function k(e){return e.displayName||e.name||"Component"}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.code,n=void 0===t?"":t;return function(e){var t=function(e,t,n){return Object(j["l"])(e,t,n)},a=function(a){function p(){var e,t;Object(c["a"])(this,p);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=Object(u["a"])(this,(e=Object(s["a"])(p)).call.apply(e,[this].concat(a))),t.state={localeLoaded:!1},t.loading=!1,t.currentLanguage=null,t}return Object(d["a"])(p,a),Object(l["a"])(p,[{key:"loadLocale",value:function(){var e=Object(i["a"])(r.a.mark(function e(a){var i,c,l,u,s;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a||this.currentLanguage===a){e.next=24;break}if(this.currentLanguage=a,E.has(a)?i=E.get(a):(i=new Map,E.set(a,i)),c="",l=[],h()(n)?i.get(n)||(c=n,i.set(n,!0)):m()(n)&&(n.forEach(function(e){i.get(e)||(i.set(e,!0),l.push(e))}),c=l.join(",")),!c){e.next=23;break}return this.loading=!0,e.prev=8,u=Object(v["h"])(),e.next=12,t(u,a,c);case 12:if(s=e.sent,!s){e.next=16;break}return O["a"].load(Object(o["a"])({},a,s)),e.abrupt("return");case 16:m()(n)?n.forEach(function(e){i.delete(e)}):i.delete(n);case 17:return e.prev=17,this.loading=!1,this.setState({localeLoaded:!0}),e.finish(17);case 21:e.next=24;break;case 23:this.setState({localeLoaded:!0});case 24:case"end":return e.stop()}},e,this,[[8,,17,21]])}));function a(t){return e.apply(this,arguments)}return a}()},{key:"componentDidMount",value:function(){var e=this.props.language;this.loadLocale(e)}},{key:"componentDidUpdate",value:function(){this.loadLocale(this.props.language)}},{key:"shouldComponentUpdate",value:function(){return!this.loading}},{key:"render",value:function(){var t=this.state.localeLoaded;return t?g.a.createElement(e,Object.assign({intl:O["a"]},this.props)):null}}]),p}(g.a.Component);return a.displayName="IntlComponent(".concat(k(e),")"),Object(b["connect"])(function(e){var t=e.global,n=void 0===t?{}:t;return{language:n.language}})(a)}}},1397:function(e,t,n){e.exports=n(3)(261)},1399:function(e,t,n){"use strict";var a=n(0),r=n(14),o=n(1419);function i(e){var t=e[e.length-1];if(t)return t.title}function c(e){var t=e||"";t!==document.title&&(document.title=t)}function l(){}l.prototype=Object.create(a.Component.prototype),l.displayName="DocumentTitle",l.propTypes={title:r.string.isRequired},l.prototype.render=function(){return this.props.children?a.Children.only(this.props.children):null},e.exports=o(i,c)(l)},1400:function(e,t,n){e.exports=n(3)(77)},1415:function(e,t,n){e.exports=n(3)(1152)},1419:function(e,t,n){"use strict";function a(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}var r=n(0),o=a(r),i=a(n(1400));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var u=!("undefined"===typeof window||!window.document||!window.document.createElement);function s(e,t,n){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");function a(e){return e.displayName||e.name||"Component"}return function(s){if("function"!==typeof s)throw new Error("Expected WrappedComponent to be a React component.");var d,p=[];function h(){d=e(p.map(function(e){return e.props})),f.canUseDOM?t(d):n&&(d=n(d))}var f=function(e){function t(){return e.apply(this,arguments)||this}l(t,e),t.peek=function(){return d},t.rewind=function(){if(t.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=d;return d=void 0,p=[],e};var n=t.prototype;return n.shouldComponentUpdate=function(e){return!i(e,this.props)},n.componentWillMount=function(){p.push(this),h()},n.componentDidUpdate=function(){h()},n.componentWillUnmount=function(){var e=p.indexOf(this);p.splice(e,1),h()},n.render=function(){return o.createElement(s,this.props)},t}(r.Component);return c(f,"displayName","SideEffect("+a(s)+")"),c(f,"canUseDOM",u),f}}e.exports=s},1420:function(e,t,n){e.exports=n(3)(93)},1422:function(e,t,n){e.exports=n(3)(1974)},1423:function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},1426:function(e,t,n){var a=n(1427),r=n(325),o=a(r);e.exports=o},1427:function(e,t,n){e.exports=n(3)(2196)},1428:function(e,t,n){e.exports=n(3)(1147)},1429:function(e,t,n){e.exports=n(156)(2670)},1430:function(e,t,n){e.exports=n(3)(144)},1440:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var a=n(5),r="menuHistoryKey";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(a["y"])(r,e)}function i(){return Object(a["p"])(r)||[]}},1471:function(e,t,n){e.exports=n(3)(1130)},1472:function(e,t,n){e.exports=n.p+"static/media/empty-message.273beb0f.png"},1473:function(e,t,n){"use strict";n(492);var a,r,o=n(228),i=(n(488),n(320)),c=n(48),l=n(49),u=n(53),s=n(52),d=n(54),p=n(94),h=n(85),f=n.n(h),m=n(1426),y=n.n(m),g=n(0),b=n.n(g),v=n(84),O=n(40),j=n(95),E=n(1493),k=n(5),C=n(96),w=n(1300),M=n.n(w),x=(a=Object(j["Bind"])(),r=function(e){function t(){return Object(c["a"])(this,t),Object(u["a"])(this,Object(s["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"onClick",value:function(e){var t=e.key,n=this.props,a=n.user,r=void 0===a?{}:a,o=n.updateCurrentRole,i=n.updateCurrentUser,c=n.gotoTab,l=r.roleList,u=void 0===l?[]:l,s=y()(u,function(e){return e.id===Number(t)})||{};E["a"].start();var d=s.id,p=s.name;o({roleId:d}).then(function(e){E["a"].done(),e&&e.failed||(i({currentRoleId:d,currentRoleName:p}),Object(C["a"])(),c({pathname:"/workplace"}),window.location.reload())})}},{key:"render",value:function(){var e=this.props.user,t=void 0===e?{}:e,n=t.roleList,a=void 0===n?[]:n;return b.a.createElement(o["default"],{className:"default-role-select-dropdown",selectedKeys:["".concat((Object(k["i"])()||{}).id)],onClick:this.onClick},f()(a)?b.a.createElement(o["default"].Item,{key:"loading-spin"},b.a.createElement(i["default"],null)):b.a.createElement(o["default"].SubMenu,{className:M.a["select-role-wrap"],title:b.a.createElement("div",{className:M.a["select-role"]},b.a.createElement("span",null,Object(k["i"])().name||""))},a.map(function(e){return b.a.createElement(o["default"].Item,{key:e.id,className:M.a["select-role-item"]},b.a.createElement("div",{className:M.a["select-role-item-divider"]},e.name))})))}}]),t}(g["PureComponent"]),Object(p["a"])(r.prototype,"onClick",[a],Object.getOwnPropertyDescriptor(r.prototype,"onClick"),r.prototype),r);t["a"]=Object(v["connect"])(function(e){var t=e.user,n=void 0===t?{}:t;return{user:n}},function(e){return{updateCurrentRole:function(t){return e({type:"user/updateCurrentRole",payload:t})},updateCurrentUser:function(t){return e({type:"user/updateCurrentUser",payload:t})},gotoTab:function(t,n){return e(O["routerRedux"].push(t,n))}}})(x)},1474:function(e,t,n){"use strict";n(1386);var a,r,o=n(1385),i=n(48),c=n(49),l=n(53),u=n(52),s=n(54),d=n(94),p=n(0),h=n.n(p),f=n(84),m=n(95),y=n(16),g=n.n(y),b=(a=Object(m["Bind"])(),r=function(e){function t(){return Object(i["a"])(this,t),Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(s["a"])(t,e),Object(c["a"])(t,[{key:"componentDidMount",value:function(){var e=this.props.querySupportLanguage;e()}},{key:"handleLanguageSelectChange",value:function(e){var t=this.props,n=t.onChangeLanguage,a=t.onUpdateDefaultLanguage;Promise.all([n(e),a({language:e})]).then(function(){window.location.reload()})}},{key:"render",value:function(){var e=this.props,t=e.language,n=e.supportLanguage,a=void 0===n?[]:n,r=e.loading,i=void 0!==r&&r,c=e.className;return h.a.createElement(o["default"],{size:"small",className:g()("select-no-border","default-language-select",c),value:t,onChange:this.handleLanguageSelectChange,disabled:i},a.map(function(e){return h.a.createElement(o["default"].Option,{key:e.code,value:e.code,className:"hzero-normal-header-container-language"},e.name)}))}}]),t}(h.a.PureComponent),Object(d["a"])(r.prototype,"handleLanguageSelectChange",[a],Object.getOwnPropertyDescriptor(r.prototype,"handleLanguageSelectChange"),r.prototype),r);t["a"]=Object(f["connect"])(function(e){var t=e.global,n=void 0===t?{}:t,a=e.loading,r=void 0===a?{effects:{}}:a;return{supportLanguage:n.supportLanguage,language:n.language,loading:r.effects["global/changeLanguage"]||r.effects["global/updateDefaultLanguage"]||r.effects["global/querySupportLanguage"]}},function(e){return{onChangeLanguage:function(t){return e({type:"global/changeLanguage",payload:t})},onUpdateDefaultLanguage:function(t){return e({type:"global/updateDefaultLanguage",payload:t})},querySupportLanguage:function(){return e({type:"global/querySupportLanguage"})}}})(b)},1475:function(e,t,n){e.exports=n(3)(1145)},1476:function(e,t,n){e.exports=n(3)(157)},1477:function(e,t){e.exports="data:image/png;base64,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"},1478:function(e,t,n){"use strict";n(1391);var a,r,o,i,c,l=n(1392),u=(n(487),n(318)),s=(n(1425),n(1415)),d=n(48),p=n(49),h=n(53),f=n(52),m=n(54),y=n(94),g=(n(1417),n(1395)),b=(n(1479),n(1394)),v=n(229),O=n.n(v),j=n(185),E=n.n(j),k=n(0),C=n.n(k),w=n(95),M=n(84),x=n(40),T=n(1429),N=n.n(T),S=n(1499),A=n(116),I=n(1398),D=n(1512),L=n(18),P=n(5),B=n(96),H=n(1301),R=n.n(H),K=b["default"].Content,U=g["default"].TabPane,V=function(){return C.a.createElement(A["a"],{type:"404",style:{minHeight:500,height:"80%"},linkElement:x["Link"]})},z=function(){return null},F=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t&&t.children){for(var a=0;a<t.children.length;a++)e(t.children[a],n);return n}if(t&&t.path){var r=t.path.split("/");r[0]||(r=r.slice(1,r.length));for(var o="",i=function(e){o+="/".concat(r[e]);var t=o,a="".concat(o,"/").concat(r[e+1]),i=n.some(function(e){return e.from===t});i||n.push({from:t,to:a})},c=0;c<r.length-1;c++)i(c)}},W=(a=Object(w["Bind"])(),r=Object(w["Bind"])(),o=Object(w["Bind"])(),c=function(e){function t(e){var n;return Object(d["a"])(this,t),n=Object(h["a"])(this,Object(f["a"])(t).call(this,e)),n.onTabEdit=function(e,t){n[t](e)},n.state={contextMenuVisibleKey:"",contextMenuVisible:!1},n.refreshKeyMap=new Map,n}return Object(m["a"])(t,e),Object(p["a"])(t,[{key:"onTabChange",value:function(e){Object(B["i"])(Object(B["g"])(e))}},{key:"remove",value:function(e){var t=Object(B["d"])(e);if(E()(t)){var n=t();Object(P["s"])(n)?n.then(function(){Object(D["a"])(e),Object(B["b"])(e)}):!1!==n&&(Object(D["a"])(e),Object(B["b"])(e))}else Object(D["a"])(e),Object(B["b"])(e)}},{key:"clearContextMenuVisible",value:function(){this.setState({contextMenuVisibleKey:"",contextMenuVisible:!1})}},{key:"handleContextMenuTrigger",value:function(e,t){this.setState({contextMenuVisibleKey:e.key,contextMenuVisible:t})}},{key:"handleMenuTabCloseOthers",value:function(e,t){t.stopPropagation();var n=this.props,a=n.removeOtherMenuTab,r=n.tabs,o=void 0===r?[]:r,i=n.activeTabKey,c=o.filter(function(t){return t.key!==e.key&&t.closable});this.clearContextMenuVisible(),a({tab:e}).then(function(e){e!==i&&Object(B["i"])(Object(B["g"])(e)),c.forEach(function(e){Object(D["a"])(e.key),B["h"].emit("close",{tabKey:e.key})})})}},{key:"handleMenuTabCloseAll",value:function(e,t){t.stopPropagation();var n=this.props,a=n.removeAllMenuTab,r=n.tabs,o=void 0===r?[]:r,i=n.activeTabKey,c=o.filter(function(e){return e.closable});this.clearContextMenuVisible(),a({tab:e}).then(function(e){e!==i&&Object(B["i"])(Object(B["g"])(e)),c.forEach(function(e){Object(D["a"])(e.key),B["h"].emit("close",{tabKey:e.key})})})}},{key:"handleMenuTabRefresh",value:function(e,t){t.stopPropagation(),this.clearContextMenuVisible(),this.refreshKeyMap.set(e.key,N()()),B["h"].emit("refresh",{tabKey:e.key}),this.forceUpdate()}},{key:"getBaseRedirect",value:function(){var e=new URL(window.location.href),t=e.searchParams.get("redirect");if(!t){var n=this.props.routerData,a=void 0===n?{}:n,r=Object.keys(a).find(function(e){return"/"!==e});return r}return e.searchParams.delete("redirect"),window.history.replaceState(null,"redirect",e.href),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeTabKey,a=t.language,r=t.NotFound,o=void 0===r?V:r,i=t.tabs,c=void 0===i?[]:i,d=t.menu,p=void 0===d?[]:d,h=t.routerData,f=void 0===h?{}:h,m=t.extraRight,y=void 0===m?null:m,b=this.state,v=b.contextMenuVisibleKey,j=b.contextMenuVisible,E=void 0!==j&&j,k=[{from:"/",to:"/workplace"}];p.forEach(function(e){F(e,k)});var w=this.getBaseRedirect();return C.a.createElement(C.a.Fragment,null,C.a.createElement(x["Switch"],null,O()(k,function(e){return C.a.createElement(x["Redirect"],{key:e.from,exact:!0,from:e.from,to:e.to})}),w?C.a.createElement(x["Redirect"],{exact:!0,from:"/",to:w}):null,0===p.length?null:C.a.createElement(x["Route"],{render:z})),C.a.createElement(g["default"],{hideAdd:!0,onChange:this.onTabChange,activeKey:n,type:"editable-card",onEdit:this.onTabEdit,tabBarExtraContent:y,className:R.a["menu-tabs"]},O()(c,function(t){return C.a.createElement(U,{closable:t.closable,tab:C.a.createElement(l["default"],{overlayClassName:"default-menu-tabs-context-menu",content:C.a.createElement(s["default"],{size:"small"},C.a.createElement(s["default"].Item,{onClick:function(n){e.handleMenuTabCloseOthers(t,n)},className:"default-menu-tabs-context-menu-item"},C.a.createElement(I["a"],{type:"close-other",size:14,className:"default-menu-tabs-context-menu-item-icon"}),C.a.createElement("span",{className:"default-menu-tabs-context-menu-item-text"},L["a"].get("hzero.common.button.closeOther").d("\u5173\u95ed\u5176\u4ed6"))),C.a.createElement(s["default"].Item,{onClick:function(n){e.handleMenuTabCloseAll(t,n)},className:"default-menu-tabs-context-menu-item"},C.a.createElement(I["a"],{type:"close-all",size:14,className:"default-menu-tabs-context-menu-item-icon"}),C.a.createElement("span",{className:"default-menu-tabs-context-menu-item-text"},L["a"].get("hzero.common.button.closeAll").d("\u5173\u95ed\u5168\u90e8"))),t.key===n&&C.a.createElement(s["default"].Item,{onClick:function(n){e.handleMenuTabRefresh(t,n)},className:"default-menu-tabs-context-menu-item"},C.a.createElement(I["a"],{type:"refresh",size:14,className:"default-menu-tabs-context-menu-item-icon"}),C.a.createElement("span",{className:"default-menu-tabs-context-menu-item-text"},L["a"].get("hzero.common.button.refresh").d("\u5237\u65b0")))),title:null,trigger:"contextMenu",visible:t.key===v&&E,onVisibleChange:function(n){e.handleContextMenuTrigger(t,n)}},"/workplace"===t.path?C.a.createElement("span",null,C.a.createElement(u["default"],{type:t.icon,key:"icon"}),a?t.title&&L["a"].get(t.title).d(t.title):"..."):C.a.createElement("span",null,a?t.title&&L["a"].get(t.title).d(t.title):"...")),key:t.key},C.a.createElement(K,{className:"page-container",key:e.refreshKeyMap.get(t.key)},Object(S["a"])({pane:t,routerData:f,NotFound:o,menu:p,activeTabKey:n})))})))}}]),t}(C.a.Component),i=c,Object(y["a"])(i.prototype,"handleMenuTabCloseOthers",[a],Object.getOwnPropertyDescriptor(i.prototype,"handleMenuTabCloseOthers"),i.prototype),Object(y["a"])(i.prototype,"handleMenuTabCloseAll",[r],Object.getOwnPropertyDescriptor(i.prototype,"handleMenuTabCloseAll"),i.prototype),Object(y["a"])(i.prototype,"handleMenuTabRefresh",[o],Object.getOwnPropertyDescriptor(i.prototype,"handleMenuTabRefresh"),i.prototype),i);function X(e){var t=e.global,n=void 0===t?{}:t;return{activeTabKey:n.activeTabKey,tabs:n.tabs,menu:n.menu,routerData:n.routerData,language:n.language}}function Z(e){return{removeOtherMenuTab:function(t){return e({type:"global/removeOtherMenuTab",payload:t})},removeAllMenuTab:function(t){return e({type:"global/removeAllMenuTab",payload:t})}}}t["a"]=Object(M["connect"])(X,Z,null,{pure:!1})(W)},1481:function(e,t,n){"use strict";var a,r,o,i,c=n(2),l=n.n(c),u=n(19),s=n(48),d=n(49),p=n(53),h=n(52),f=n(54),m=n(94),y=n(0),g=n.n(y),b=n(95),v=n(185),O=n.n(v),j=n(187);function E(e){return k.apply(this,arguments)}function k(){return k=Object(u["a"])(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!j["a"].has({module:"hzero-front-hims",feature:"IM",key:t})){e.next=7;break}if(n=j["a"].get({module:"hzero-front-hims",feature:"IM",key:t}),!O()(n&&n.component)){e.next=7;break}return e.next=5,n.component();case 5:return a=e.sent,e.abrupt("return",a);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e)})),k.apply(this,arguments)}n.d(t,"a",function(){return C});var C=(a=Object(b["Bind"])(),r=Object(b["Bind"])(),i=function(e){function t(){var e,n;Object(s["a"])(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(p["a"])(this,(e=Object(h["a"])(t)).call.apply(e,[this].concat(r))),n.state={InstantMessaging:{component:null}},n}return Object(f["a"])(t,e),Object(d["a"])(t,[{key:"componentDidMount",value:function(){var e=this;this.importCard().then(function(t){var n=t;if(n)if(n.__esModule){var a=n.default;e.setState({InstantMessaging:{component:g.a.createElement(a,null)}})}else{var r=n;e.setState({InstantMessaging:{component:g.a.createElement(r,null)}})}else e.setState({InstantMessaging:{component:null}})})}},{key:"importCard",value:function(){var e=Object(u["a"])(l.a.mark(function e(){var t;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,E("HzeroIM");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t=null;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,null,[[1,7]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderCard",value:function(){var e=this.state.InstantMessaging;return e&&e.component?g.a.createElement("div",null,e.component):g.a.createElement("div",null)}},{key:"render",value:function(){return g.a.createElement("div",null,this.renderCard())}}]),t}(g.a.Component),o=i,Object(m["a"])(o.prototype,"importCard",[a],Object.getOwnPropertyDescriptor(o.prototype,"importCard"),o.prototype),Object(m["a"])(o.prototype,"renderCard",[r],Object.getOwnPropertyDescriptor(o.prototype,"renderCard"),o.prototype),o)},1482:function(e,t,n){"use strict";n(488);var a=n(320),r=(n(490),n(321)),o=(n(319),n(1379)),i=n(42),c=n(2),l=n.n(c),u=n(19),s=(n(1391),n(1392)),d=(n(494),n(150)),p=(n(487),n(318)),h=n(50),f=n(48),m=n(49),y=n(53),g=n(52),b=n(54),v=n(94),O=(n(1417),n(1395)),j=n(85),E=n.n(j),k=n(0),C=n.n(k),w=n(84),M=n(95),x=n(41),T=n.n(x),N=n(16),S=n.n(N),A=n(40),I=n(18),D=n(1472),L=n.n(D),P=(n(1425),n(1415)),B=n(1298),H=n.n(B);function R(e){var t,n=e.data,a=void 0===n?[]:n,r=e.onClick,o=e.emptyImage,i=e.contentTitleAction,c=e.contentItemAction;t=0===a.length?C.a.createElement("div",{className:H.a.notFound},C.a.createElement("img",{src:o,alt:"not found"})):C.a.createElement(P["default"],{className:H.a.list},a.map(function(e,t){var n=S()(H.a.item,Object(h["a"])({},H.a.read,e.read));return C.a.createElement(P["default"].Item,{className:n,key:e.key||t,onClick:function(){return r(e)}},C.a.createElement(P["default"].Item.Meta,{className:H.a.meta,title:C.a.createElement("div",{className:H.a.title},e.title),description:C.a.createElement("div",{className:H.a.description},C.a.createElement("div",null,e.userMessageTypeMeaning),C.a.createElement("div",null,e.datetime)),onClick:function(e){return c(e)}}))}));var l=C.a.createElement("div",{className:H.a.content},C.a.createElement("span",{className:H.a["content-action"]},i));return C.a.createElement("div",null,t,l)}var K,U,V,z,F,W,X,Z,G=n(1299),q=n.n(G),Y=O["default"].TabPane,J=[-2,0],Q=[18,2],_=[18,4],$=(K=Object(M["Bind"])(),U=Object(M["Bind"])(),V=Object(M["Bind"])(),z=Object(M["Bind"])(),F=Object(M["Bind"])(),Z=X=function(e){function t(e){var n;Object(f["a"])(this,t),n=Object(y["a"])(this,Object(g["a"])(t).call(this,e)),n.handleItemClick=function(e){var t=n.props.gotoTab;switch(e.userMessageTypeCode){case"NOTICE":t({pathname:"/hmsg/user-message/detail/notice/".concat(e.id)});break;case"ANNOUNCE":t({pathname:"/hmsg/user-message/detail/announce/".concat(e.id)});break;case"MSG":t({pathname:"/hmsg/user-message/detail/message/".concat(e.id)});break;default:break}n.setState({visible:!1})},n.handleAnnounceItemClick=function(e){var t=n.props.gotoTab;t({pathname:"/hmsg/user-message/detail/announce/".concat(e.id)})},n.handleNoticeVisibleChange=function(e){var t=n.props.fetchNotices;n.setState({visible:e}),e&&t()},n.onTabChange=function(e){n.setState({tabType:e}),n.props.onTabChange(e)};var a=e.title;return n.state={visible:!1,currentTab:"NOTICE"},a&&(n.state.tabType=a),n}return Object(b["a"])(t,e),Object(m["a"])(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchCount;e()}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.count,r=S()((e={},Object(h["a"])(e,n,!0),Object(h["a"])(e,q.a.noticeButton,!0),Object(h["a"])(e,q.a.hasCount,a>0),e)),o=J;a>9?o=_:a>0&&(o=Q);var i=this.getNotificationBox(),c=this.state.visible,l=c?"".concat(q.a["icon-active"]," ").concat(q.a["notification-icon"]):q.a["notification-icon"],u=C.a.createElement("span",{className:r},C.a.createElement(d["default"],{count:a,className:q.a.badge,offset:o},C.a.createElement(p["default"],{className:l})));return i?C.a.createElement(s["default"],{placement:"bottomRight",content:i,popupClassName:q.a.popover,trigger:"click",arrowPointAtCenter:!0,onVisibleChange:this.handleNoticeVisibleChange,visible:c},u):u}},{key:"handleNoticeList",value:function(e){e.preventDefault();var t=this.props.gotoTab;t({pathname:"/hmsg/user-message/list"}),this.setState({visible:!1})}},{key:"handleNoticeItem",value:function(e){e.preventDefault(),this.setState({visible:!1})}},{key:"handleChangeTab",value:function(e){var t=this.props,n=t.fetchNotices,a=t.fetchAnnounces;switch(this.setState({currentTab:e}),e){case"NOTICE":n();break;case"ANNOUNCE":a();break;default:}}},{key:"handleDeleteAll",value:function(){var e=Object(u["a"])(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props,n=t.deleteAll,a=t.fetchNotices,e.next=3,n();case 3:return e.next=5,a();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAllRead",value:function(){var e=Object(u["a"])(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props,n=t.allRead,a=t.fetchNotices,e.next=3,n({readAll:1});case 3:return e.next=5,a();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getNotificationBox",value:function(){var e=this,t=this.props,n=t.fetchingNotices,c=t.fetchingAnnounces,l=t.locale,u=t.count,s=Object(i["a"])(t,["fetchingNotices","fetchingAnnounces","locale","count"]);if(E()(s))return null;var h=s.notices,f=s.announces,m=s.emptyImage,y=s.title,g=this.state.currentTab,b=h&&h.map(function(e){return{id:e.userMessageId,key:"".concat(e.userMessageTypeCode,"_").concat(e.userMessageId),title:e.subject,datetime:T()(e.creationDate).fromNow(),userMessageTypeMeaning:e.userMessageTypeMeaning,userMessageTypeCode:e.userMessageTypeCode}}),v=f&&f.map(function(e){return{id:e.noticeId,key:"".concat(e.receiverTypeCode,"_").concat(e.noticeId),title:e.title,datetime:T()(e.publishedDate).fromNow(),userMessageTypeMeaning:e.receiverTypeMeaning,userMessageTypeCode:e.noticeTypeCode}}),j=C.a.createElement(R,{data:b,onClick:this.handleItemClick,onClear:function(){return e.props.onClear(y)},onMore:this.handleNoticeList,locale:l,title:y,emptyImage:m,contentItemAction:this.handleNoticeItem,contentTitleAction:C.a.createElement("a",{onClick:this.handleNoticeList},I["a"].get("hzero.common.basicLayout.gotoUserMessage").d("\u8fdb\u5165\u6d88\u606f\u4e2d\u5fc3"))}),k=C.a.createElement(R,{data:v,onClick:this.handleAnnounceItemClick,locale:l,title:y,emptyImage:m,contentItemAction:this.handleNoticeItem,contentTitleAction:C.a.createElement("a",{onClick:this.handleNoticeList},I["a"].get("hzero.common.basicLayout.gotoUserMessage").d("\u8fdb\u5165\u6d88\u606f\u4e2d\u5fc3"))}),w=C.a.createElement("div",{className:q.a["icon-btns"]},C.a.createElement(r["default"],{title:I["a"].get("hzero.common.basicLayout.option.allRead").d("\u5168\u90e8\u5df2\u8bfb")},C.a.createElement(o["default"],{shape:"circle",className:q.a["icon-button"],onClick:this.handleAllRead},C.a.createElement(p["default"],{type:"mail",style:{fontSize:16}}))),C.a.createElement(r["default"],{title:I["a"].get("hzero.common.basicLayout.option.deleteAll").d("\u5168\u90e8\u6e05\u9664")},C.a.createElement(o["default"],{shape:"circle",className:q.a["icon-button"],onClick:this.handleDeleteAll},C.a.createElement(p["default"],{type:"delete",style:{fontSize:16}}))));return C.a.createElement(O["default"],{defaultActiveKey:"NOTICE",animated:!1,onChange:this.handleChangeTab,tabBarExtraContent:"NOTICE"===g?w:"",className:q.a["layout-tabs"]},C.a.createElement(Y,{tab:C.a.createElement(d["default"],{count:u}," ",I["a"].get("hzero.common.view.title.tabNotice").d("\u6d88\u606f")),key:"NOTICE"},C.a.createElement(a["default"],{spinning:n,delay:0},n?C.a.createElement("div",{style:{height:"258px"}}):j)),C.a.createElement(Y,{tab:C.a.createElement(d["default"],null,I["a"].get("hzero.common.view.title.tabAnnounce").d("\u516c\u544a")),key:"ANNOUNCE"},C.a.createElement(a["default"],{spinning:c,delay:0},n?C.a.createElement("div",{style:{height:"258px"}}):k)))}}]),t}(C.a.PureComponent),X.defaultProps={emptyImage:L.a},W=Z,Object(v["a"])(W.prototype,"handleNoticeList",[K],Object.getOwnPropertyDescriptor(W.prototype,"handleNoticeList"),W.prototype),Object(v["a"])(W.prototype,"handleNoticeItem",[U],Object.getOwnPropertyDescriptor(W.prototype,"handleNoticeItem"),W.prototype),Object(v["a"])(W.prototype,"handleChangeTab",[V],Object.getOwnPropertyDescriptor(W.prototype,"handleChangeTab"),W.prototype),Object(v["a"])(W.prototype,"handleDeleteAll",[z],Object.getOwnPropertyDescriptor(W.prototype,"handleDeleteAll"),W.prototype),Object(v["a"])(W.prototype,"handleAllRead",[F],Object.getOwnPropertyDescriptor(W.prototype,"handleAllRead"),W.prototype),W);t["a"]=Object(w["connect"])(function(e){var t=e.global,n=void 0===t?{}:t,a=e.loading;return{count:n.count,notices:n.notices,announces:n.announces,fetchingNotices:a.effects["global/fetchNotices"],fetchingAnnounces:a.effects["global/fetchAnnounces"]}},function(e){return{fetchNotices:function(){return e({type:"global/fetchNotices",payload:{previewMessageCount:3,readFlag:0}})},fetchAnnounces:function(){return e({type:"global/fetchAnnounces",payload:{previewCount:3}})},gotoTab:function(t,n){return e(A["routerRedux"].push(t,n))},fetchCount:function(){return e({type:"global/fetchCount"})},deleteAll:function(){return e({type:"global/deleteAll"})},allRead:function(t){return e({type:"global/allRead",payload:t})}}})($)},1483:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(19),i=n(48),c=n(49),l=n(53),u=n(52),s=n(54),d=(n(490),n(321)),p=(n(487),n(318)),h=n(0),f=n.n(h),m=n(18),y=n(96),g=n(186),b=n(185),v=n.n(b),O=n(187);function j(e){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!O["a"].has({module:"hzero-front-hadm",feature:"TraceLog",key:t})){e.next=7;break}if(n=O["a"].get({module:"hzero-front-hadm",feature:"TraceLog",key:t}),!v()(n&&n.component)){e.next=7;break}return e.next=5,n.component();case 5:return a=e.sent,e.abrupt("return",a);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e)})),E.apply(this,arguments)}n.d(t,"a",function(){return C});var k=function(e){var t=e.onTrace,n=void 0===t?function(e){return e}:t,a=e.hasHims,r=e.isStart;return a?f.a.createElement(d["default"],{title:r?m["a"].get("hadm.traceLog.view.title.start").d("\u542f\u52a8\u65e5\u5fd7\u8ffd\u6eaf\u5206\u6790"):m["a"].get("hadm.traceLog.view.title.end").d("\u7ed3\u675f\u65e5\u5fd7\u8ffd\u6eaf\u5206\u6790")},f.a.createElement(p["default"],{type:"play-circle-o",onClick:n,style:{color:"#fff",fontSize:"18px",cursor:"pointer",lineHeight:1}})):null},C=function(e){function t(){var e,n;Object(i["a"])(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return n=Object(l["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(c))),n.state={hasHims:!1,isStart:!1},n.handleTrace=function(){var e=n.props.dispatch;e({type:"global/isStartTrace"}).then(function(e){e?n.handleTraceEnd():n.handleTraceStart(),n.setState({isStart:e})})},n.handleTraceStart=function(){var e=n.props.dispatch;e({type:"global/startTrace"}).then(function(e){e&&(g["a"].success(),n.setState({isStart:!0}))})},n.handleTraceEnd=function(){var e=n.props.dispatch;e({type:"global/endTrace"}).then(function(e){e&&(n.setState({isStart:!1}),g["a"].success(),Object(y["i"])({key:"/hadm/trace-log",title:m["a"].get("hadm.traceLog.view.title").d("\u65e5\u5fd7\u8ffd\u6eaf\u5206\u6790")}))})},n.importCard=Object(o["a"])(r.a.mark(function e(){var t;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,j("TraceLog");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t=null;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,null,[[1,7]])})),n}return Object(s["a"])(t,e),Object(c["a"])(t,[{key:"componentDidMount",value:function(){var e=this;this.importCard().then(function(t){t?e.setState({hasHims:!0}):e.setState({hasHims:!1})})}},{key:"render",value:function(){var e=this.state,t=e.hasHims,n=e.isStart;return f.a.createElement(k,{hasHims:t,onTrace:this.handleTrace,isStart:n})}}]),t}(f.a.Component)},1485:function(e,t,n){var a=n(1423),r=n(496),o=n(324),i=n(491);function c(e,t,n){return e=i(e),n=null==n?0:a(o(n),0,e.length),t=r(t),e.slice(n,n+t.length)==t}e.exports=c},1486:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1486},1495:function(e,t,n){e.exports=n(3)(293)},1504:function(e,t,n){e.exports=n(3)(1968)},1505:function(e,t,n){e.exports=n(3)(663)},1506:function(e,t,n){e.exports=n(3)(1143)},1507:function(e,t,n){e.exports=n(3)(1971)},1508:function(e,t,n){e.exports=n(3)(662)},1509:function(e,t,n){"use strict";function a(e,t,n,a){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0})}n.d(t,"a",function(){return a})},1510:function(e,t,n){"use strict"},1511:function(e,t,n){e.exports=n(156)(2663)},1517:function(e,t,n){"use strict";n(489);var a,r,o,i,c,l,u,s,d,p,h,f=n(322),m=(n(488),n(320)),y=(n(1418),n(1393)),g=n(50),b=n(64),v=n(48),O=n(49),j=n(53),E=n(52),k=n(54),C=n(94),w=(n(1494),n(1428)),M=n(0),x=n.n(M),T=n(84),N=n(95),S=n(1513),A=n(1396),I=n(18),D=n(5),L=n(186),P=n(46),B=n(1306),H=n.n(B),R=(a=w["default"].create({fieldNameProp:null}),r=Object(N["Bind"])(),o=Object(N["Bind"])(),i=Object(N["Bind"])(),c=Object(N["Bind"])(),l=Object(N["Bind"])(),u=Object(N["Bind"])(),s=Object(N["Bind"])(),d=Object(N["Bind"])(),a((h=function(e){function t(e){var n;return Object(v["a"])(this,t),n=Object(j["a"])(this,Object(E["a"])(t).call(this,e)),n.state={modalVisible:!1,expandedRowKeys:[],renderTree:[],valueList:[],queryParams:[],dataHierarchyCode:"",dataHierarchyMeaning:"",dataHierarchyId:""},n}return Object(k["a"])(t,e),Object(O["a"])(t,[{key:"renderTreeData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=n,i=a,c=r,l=t.map(function(t){var n=t;return o[n.dataHierarchyId]=[].concat(Object(b["a"])(o[n.parentId]||[]),[n.dataHierarchyId]),i.push(n.dataHierarchyValue&&n.dataHierarchyId),Object(P["g"])({viewCode:n.valueSourceCode}).then(function(e){var t=e.valueField,a=e.displayField;c.push(Object(g["a"])({},n.dataHierarchyId,{valueField:t,displayField:a}))}),n.children&&(n.children=Object(b["a"])(e.renderTreeData(n.children||[],o,i,c).renderTree)),n});return this.setState({valueList:i,queryParams:c}),{renderTree:l,pathMap:o,valueList:i,queryParams:c}}},{key:"handleFind",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=t.parentId,i=a,c=r,l=n.map(function(t){var n=t;return n.dataHierarchyId===o&&(i=n.dataHierarchyValue,c=n.dataHierarchyId),n.children&&(n.children=Object(b["a"])(e.handleFind({parentId:o},n.children||[],i,c).traverse)),n});return{parentId:o,traverse:l,value:i,id:c}}},{key:"handleOpenModal",value:function(e){var t=this,n=this.props.dispatch;e?n({type:"user/fetchDataHierarchiesList",payload:{organizationId:Object(D["h"])()}}).then(function(e){if(e){var n=t.renderTreeData(e),a=n.renderTree,r=n.pathMap,o=void 0===r?{}:r,i=Object.keys(o).map(function(e){return+e});t.setState({renderTree:a,expandedRowKeys:i})}}):this.setState({expandedRowKeys:[],renderTree:[],valueList:[],dataHierarchyCode:"",dataHierarchyMeaning:"",dataHierarchyId:""}),this.setState({modalVisible:e})}},{key:"handleClear",value:function(e){var t=e.dataHierarchyCode,n=void 0===t?"":t,a=e.dataHierarchyId,r=void 0===a?"":a;this.setState({dataHierarchyCode:n,dataHierarchyId:r})}},{key:"handleSet",value:function(e){var t=this,n=e.dataHierarchyCode,a=void 0===n?"":n,r=e.dataHierarchyId,o=this.state.queryParams;o.map(function(e){return e[r]&&t.setState({dataHierarchyCode:a,dataHierarchyId:r,dataHierarchyMeaning:e[r].displayField}),0})}},{key:"handleChange",value:function(e,t){var n=this,a=this.state.dataHierarchyMeaning,r=a;this.setState({dataHierarchyMeaning:t[r]},function(){return n.handleSwitch()})}},{key:"handleSwitch",value:function(){var e=this,t=this.props,n=t.dispatch,a=t.form,r=this.state,o=r.dataHierarchyMeaning,i=r.dataHierarchyCode,c=r.dataHierarchyId,l=a.getFieldValue("dataHierarchyValue".concat(c));n({type:"user/switchDataHierarchies",payload:{dataHierarchyMeaning:o,dataHierarchyCode:i,dataHierarchyValue:l,organizationId:Object(D["h"])()}}).then(function(t){t&&(a.resetFields(),L["a"].success(),e.handleOpenModal(!0))})}},{key:"handleExpandRow",value:function(e,t){var n=this.state.expandedRowKeys,a=e?[].concat(Object(b["a"])(n),[t.dataHierarchyId]):n.filter(function(e){return e!==t.dataHierarchyId});this.setState({expandedRowKeys:Object(b["a"])(a)})}},{key:"render",value:function(){var e=this,t=this.props.fetchLoading,n=this.state,a=n.expandedRowKeys,r=n.renderTree,o=n.queryParams,i=[{title:I["a"].get("hzero.common.components.dataHierarchies.dataHierarchyName").d("\u6570\u636e\u5c42\u7ea7\u540d\u79f0"),width:100,dataIndex:"dataHierarchyName"},{title:I["a"].get("hzero.common.components.dataHierarchies.dataHierarchyVal").d("\u6570\u636e\u5c42\u7ea7\u503c"),width:100,render:function(t,n){var a=e.props.form,i=e.state.valueList,c=n.valueSourceCode,l=n.dataHierarchyMeaning,u=n.dataHierarchyValue,s=n.dataHierarchyId;return x.a.createElement(w["default"].Item,{className:H.a["data-hierarchies-td"]},a.getFieldDecorator("dataHierarchyValue".concat(s),{initialValue:u})(x.a.createElement(S["a"],{code:c,textValue:l,allowClear:!0,disabled:!!n.parentId&&!i.some(function(e){return e===n.parentId}),onClear:function(){return e.handleClear(n)},onClick:function(){return e.handleSet(n,r)},onChange:e.handleChange,queryParams:function(){if(n.parentId){var t=e.handleFind(n,r),a=t.value,i=t.id,c="";return o.map(function(e){return e[i]&&(c=e[i].valueField),0}),c&&Object(g["a"])({},c,a)}}})))}}];return x.a.createElement(x.a.Fragment,null,x.a.createElement(x.a.Fragment,null,x.a.createElement(x.a.Fragment,null,x.a.createElement("span",{style:{width:"100%",display:"inline-block",marginRight:"12px",backgroundColor:"rgba(255, 255, 255,.1)"},size:"small",onClick:function(){return e.handleOpenModal(!0)}},I["a"].get("hzero.common.view.message.title.list").d("\u6570\u636e\u5c42\u7ea7\u914d\u7f6e")))),x.a.createElement(f["default"],{title:I["a"].get("hzero.common.view.message.title.list").d("\u6570\u636e\u5c42\u7ea7\u914d\u7f6e"),width:"620px",bodyStyle:{paddingTop:0,height:"460px"},visible:this.state.modalVisible,onCancel:function(){return e.handleOpenModal(!1)},footer:null},x.a.createElement(m["default"],{spinning:!1},x.a.createElement(y["default"],{bordered:!0,className:H.a["data-hierarchies"],rowKey:"dataHierarchyId",pagination:!1,dataSource:r,columns:i,scroll:{y:360},expandedRowKeys:a,loading:t,onExpand:this.handleExpandRow}))))}}]),t}(M["PureComponent"]),Object(C["a"])(h.prototype,"renderTreeData",[r],Object.getOwnPropertyDescriptor(h.prototype,"renderTreeData"),h.prototype),Object(C["a"])(h.prototype,"handleFind",[o],Object.getOwnPropertyDescriptor(h.prototype,"handleFind"),h.prototype),Object(C["a"])(h.prototype,"handleOpenModal",[i],Object.getOwnPropertyDescriptor(h.prototype,"handleOpenModal"),h.prototype),Object(C["a"])(h.prototype,"handleClear",[c],Object.getOwnPropertyDescriptor(h.prototype,"handleClear"),h.prototype),Object(C["a"])(h.prototype,"handleSet",[l],Object.getOwnPropertyDescriptor(h.prototype,"handleSet"),h.prototype),Object(C["a"])(h.prototype,"handleChange",[u],Object.getOwnPropertyDescriptor(h.prototype,"handleChange"),h.prototype),Object(C["a"])(h.prototype,"handleSwitch",[s],Object.getOwnPropertyDescriptor(h.prototype,"handleSwitch"),h.prototype),Object(C["a"])(h.prototype,"handleExpandRow",[d],Object.getOwnPropertyDescriptor(h.prototype,"handleExpandRow"),h.prototype),p=h))||p);t["a"]=Object(A["a"])({code:"hpfm.tenantSelect"})(Object(T["connect"])(function(e){var t=e.user;t=void 0===t?{}:t;var n=t.hierarchicalList,a=void 0===n?[]:n,r=e.loading;return{hierarchicalList:a,fetchLoading:r.effects["user/fetchDataHierarchiesList"]||r.effects["user/switchDataHierarchies"]}})(R))},1564:function(e,t,n){e.exports=n.p+"static/media/hzero-default-favicon.c4395984.png"},1565:function(e,t,n){e.exports=n(156)(2562)},1655:function(e,t,n){"use strict";n.r(t);n(487);var a,r,o,i,c,l,u,s,d,p,h=n(318),f=n(50),m=n(48),y=n(49),g=n(53),b=n(52),v=n(54),O=n(94),j=n(0),E=n.n(j),k=n(1399),C=n.n(k),w=n(84),M=n(323),x=n.n(M),T=n(95),N=n(16),S=n.n(N),A=n(1480),I=n(96),D=n(20),L=n(40),P=n(1564),B=n.n(P),H=function(e){function t(){return Object(m["a"])(this,t),Object(g["a"])(this,Object(b["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"render",value:function(){var e=this.props,t=e.logo,n=void 0===t?B.a:t,a=e.collapsed,r=e.title,o=e.styles,i=void 0===o?{}:o,c=[i.logo];return a&&c.push(i.collapsed),E.a.createElement("div",{className:c.join(" ")},E.a.createElement(L["Link"],{to:"/"},this.renderIcon(n),!a&&E.a.createElement("h1",{className:i.title,title:r},r)))}},{key:"renderIcon",value:function(e){var t=this.props.styles,n=void 0===t?{}:t;return"string"===typeof e&&(e.startsWith("http")||e.startsWith("data:"))?E.a.createElement("img",{src:e,alt:"",className:n["icon-img"]}):"string"===typeof e?E.a.createElement(h["default"],{type:e,className:n["icon-icon"]}):e}}]),t}(E.a.Component),R=H,K=n(1478),U=n(1474),V=n(1482),z=(n(495),n(327)),F=(n(1502),n(1471)),W=(n(492),n(228)),X=(n(1503),n(1475)),Z=n(185),G=n.n(Z),q=n(18),Y=n(5),J=n(1473),Q=(n(489),n(322)),_=(n(488),n(320)),$=(n(1418),n(1393)),ee=n(135),te=n.n(ee),ne=n(1396),ae=n(186),re=(n(1422),n(1476)),oe=n(42),ie=(a=Object(T["Bind"])(),r=function(e){function t(){return Object(m["a"])(this,t),Object(g["a"])(this,Object(b["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"handleClick",value:function(){var e=this.props,t=e.record,n=e.onClick;n(t)}},{key:"render",value:function(){var e=this.props,t=(e.record,Object(oe["a"])(e,["record"]));return E.a.createElement(re["default"],Object.assign({},t,{onClick:this.handleClick}))}}]),t}(E.a.Component),Object(O["a"])(r.prototype,"handleClick",[a],Object.getOwnPropertyDescriptor(r.prototype,"handleClick"),r.prototype),r),ce=n(1308),le=n.n(ce),ue=(o=Object(T["Bind"])(),i=Object(T["Bind"])(),c=Object(T["Bind"])(),l=function(e){function t(e){var n;return Object(m["a"])(this,t),n=Object(g["a"])(this,Object(b["a"])(t).call(this,e)),n.state={modalVisible:!1,tenantId:Object(Y["h"])(),selectTenant:(Object(Y["j"])()||{}).tenantName||""},n}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"showModal",value:function(e){var t=this.props.dispatch;e&&t({type:"user/fetchTenantList"}),this.setState({modalVisible:e})}},{key:"handleSelectTenant",value:function(e){var t=this,n=this.props.dispatch;this.setState({updateTenantLoading:!0,selectTenant:e.tenantName}),Object(I["a"])(),n(L["routerRedux"].push({pathname:"/"})),n({type:"user/updateCurrentTenant",payload:{tenantId:e.tenantId}}).then(function(e){e?(n(L["routerRedux"].push({pathname:"/workplace"})),window.location.reload()):t.setState({updateTenantLoading:!1})})}},{key:"handleChangeDefaultTenant",value:function(e){var t={};te()(e.defaultTenantId)&&(t.tenantId=e.tenantId);var n=this.props.dispatch;n({type:"user/updateDefaultTenant",payload:t}).then(function(e){e&&(ae["a"].success(),n({type:"user/fetchTenantList"}))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.tenantList,a=void 0===n?[]:n,r=t.tenantName,o=t.allLoading,i=void 0!==o&&o,c=this.state,l=c.tenantId,u=c.updateTenantLoading,s=void 0!==u&&u,d=[{title:q["a"].get("entity.tenant.name").d("\u79df\u6237\u540d\u79f0"),dataIndex:"tenantName",render:function(t,n){return E.a.createElement("div",{className:le.a.tenant},n.tenantId===l&&E.a.createElement("div",{className:le.a["tenant-select-wrapper"]}),E.a.createElement("a",{onClick:function(){return e.handleSelectTenant(n)}},t,n.tenantId===l&&"(".concat(q["a"].get("hzero.common.current").d("\u5f53\u524d"),")")))}},{title:q["a"].get("entity.tenant.code").d("\u79df\u6237\u7f16\u7801"),width:100,dataIndex:"tenantNum"},{title:q["a"].get("hzero.common.view.tenantSelect.defaultTenant").d("\u9ed8\u8ba4\u79df\u6237"),width:90,dataIndex:"defaultTenantId",render:function(t,n){return E.a.createElement(ie,{record:n,onClick:e.handleChangeDefaultTenant,checked:!te()(t)})}}];return E.a.createElement(E.a.Fragment,null,E.a.createElement(E.a.Fragment,null,this.state.selectTenant?E.a.createElement(E.a.Fragment,null,E.a.createElement("span",{style:{width:"100%",display:"inline-block",marginRight:"12px",backgroundColor:"rgba(255, 255, 255,.1)",color:"#666"},size:"small",onClick:function(){return e.showModal(!0)}},this.state.selectTenant)):r?E.a.createElement("span",{style:{width:"100%",display:"inline-block",marginRight:"12px",backgroundColor:"rgba(255, 255, 255,.1)"},size:"small",onClick:function(){return e.showModal(!0)}},E.a.createElement(h["default"],{type:"home"}),r):""),E.a.createElement(Q["default"],{title:q["a"].get("hzero.common.view.tenantSelect.title").d("\u9009\u62e9\u79df\u6237"),width:"620px",bodyStyle:{paddingTop:0,height:"460px"},visible:this.state.modalVisible,onCancel:function(){return e.showModal(!1)},footer:null},E.a.createElement(_["default"],{spinning:s},E.a.createElement($["default"],{bordered:!0,style:{marginTop:24},rowKey:"tenantId",pagination:!1,loading:i,dataSource:a,columns:d}))))}}]),t}(j["PureComponent"]),Object(O["a"])(l.prototype,"showModal",[o],Object.getOwnPropertyDescriptor(l.prototype,"showModal"),l.prototype),Object(O["a"])(l.prototype,"handleSelectTenant",[i],Object.getOwnPropertyDescriptor(l.prototype,"handleSelectTenant"),l.prototype),Object(O["a"])(l.prototype,"handleChangeDefaultTenant",[c],Object.getOwnPropertyDescriptor(l.prototype,"handleChangeDefaultTenant"),l.prototype),l),se=Object(ne["a"])({code:"hpfm.tenantSelect"})(Object(w["connect"])(function(e){var t=e.user;t=void 0===t?{}:t;var n=t.tenantList,a=void 0===n?[]:n,r=t.currentUser.tenantName,o=e.loading;return{tenantList:a,tenantName:r,allLoading:o.effects["user/updateDefaultTenant"]||o.effects["user/fetchTenantList"]}})(ue)),de=n(1517),pe=n(1309),he=n.n(pe),fe=n(1477),me=n.n(fe),ye=(u=Object(T["Bind"])(),s=Object(T["Bind"])(),p=function(e){function t(){var e,n;Object(m["a"])(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(g["a"])(this,(e=Object(b["a"])(t)).call.apply(e,[this].concat(r))),n.state={dropdownVisible:!1,userAvatar:me.a},n.handleMenuClick=function(e){var t=e.key;"triggerError"!==t?("logout"===t&&n.props.dispatch({type:"login/logout"}),"role"!==t&&n.setState({dropdownVisible:!1})):n.props.dispatch(L["routerRedux"].push("/exception/trigger"))},n.handleVisibleChange=function(e){n.setState({dropdownVisible:e})},n}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentUser.imageUrl,n=e.dispatch;if(t){var a=new Image;a.onload=this.updateUserAvatar,a.onerror=this.setDefaultUserAvatar,a.src=t}n({type:"user/fetchRoleList",payload:{organizationId:Object(Y["h"])()}})}},{key:"componentDidUpdate",value:function(e){var t=e.currentUser&&e.currentUser.imageUrl,n=this.props.currentUser&&this.props.currentUser.imageUrl;if(t!==n&&n){var a=new Image;a.onload=this.updateUserAvatar,a.onerror=this.setDefaultUserAvatar,a.src=n}}},{key:"updateUserAvatar",value:function(){var e=this.props.currentUser&&this.props.currentUser.imageUrl;this.setState({userAvatar:e})}},{key:"setDefaultUserAvatar",value:function(){this.setState({userAvatar:me.a})}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.roleList,a=void 0===n?[]:n,r=this.state.userAvatar,o=E.a.createElement(W["default"],{className:he.a.menu,selectedKeys:[],onClick:this.handleMenuClick},0!==a.length&&E.a.createElement(J["a"],null),E.a.createElement(X["default"],{style:{width:"128px",margin:"4px auto"}}),!D["o"]&&E.a.createElement(W["default"].Item,{key:"tenant"},E.a.createElement(se,null)),!D["o"]&&E.a.createElement(X["default"],{style:{width:"128px",margin:"4px auto"}}),E.a.createElement(W["default"].Item,null,E.a.createElement("a",{style:{color:"#666"},href:"#/hiam/user/info",onClick:function(e){G()(e&&e.preventDefault)&&e.preventDefault(),Object(I["i"])({title:"hzero.common.title.userInfo",key:"/hiam/user",path:"/hiam/user/info",icon:"user",closable:!0})}},q["a"].get("hzero.common.basicLayout.userInfo").d("\u4e2a\u4eba\u4e2d\u5fc3"))),t.dataHierarchyFlag&&E.a.createElement(X["default"],{style:{width:"128px",margin:"4px auto"}}),t.dataHierarchyFlag&&E.a.createElement(W["default"].Item,{key:"data"},E.a.createElement(de["a"],null)),E.a.createElement(X["default"],{style:{width:"128px",margin:"4px auto"}}),E.a.createElement(W["default"].Item,{key:"logout"},E.a.createElement("div",{className:he.a["user-logout"]},q["a"].get("hzero.common.message.loginOut").d("\u9000\u51fa\u767b\u5f55"),E.a.createElement(h["default"],{className:he.a["logout-icon"]}))));return E.a.createElement(E.a.Fragment,null,E.a.createElement(z["default"],{overlay:o,trigger:["click"],onVisibleChange:this.handleVisibleChange,visible:this.state.dropdownVisible},E.a.createElement("span",{className:this.state.dropdownVisible?"".concat(he.a["dropdown-open"]," ").concat(he.a.account):"".concat(he.a.action," ").concat(he.a.account)},E.a.createElement(F["default"],{size:"small",className:he.a.avatar,src:r}),E.a.createElement("span",{className:he.a.name},t.realName||t.currentRoleName||""," ",E.a.createElement(h["default"],{type:"down"})))))}}]),t}(E.a.PureComponent),d=p,Object(O["a"])(d.prototype,"updateUserAvatar",[u],Object.getOwnPropertyDescriptor(d.prototype,"updateUserAvatar"),d.prototype),Object(O["a"])(d.prototype,"setDefaultUserAvatar",[s],Object.getOwnPropertyDescriptor(d.prototype,"setDefaultUserAvatar"),d.prototype),d),ge=Object(L["withRouter"])(Object(w["connect"])(function(e){var t=e.user,n=void 0===t?{}:t;return{currentUser:n.currentUser,roleList:n.roleList}})(ye)),be=n(1483),ve=function(e){function t(){return Object(m["a"])(this,t),Object(g["a"])(this,Object(b["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"render",value:function(){var e=this.props,t=e.extraHeaderRight,n=void 0===t?null:t,a=e.dispatch,r=!1;return r=D["p"]!==["BUILD_","WEBSOCKET_","HOST"].join("")&&"undefined"!==D["p"]&&D["p"],E.a.createElement(E.a.Fragment,null,E.a.createElement(U["a"],{key:"language-switch"}),n,E.a.createElement(be["a"],{dispatch:a}),r&&E.a.createElement(V["a"],{key:"notice-message",popupAlign:{offset:[25,-8]}}),E.a.createElement(ge,{key:"common-switch"}))}}]),t}(E.a.Component),Oe=ve,je=n(1481),Ee=n(64),ke=n(137),Ce=n.n(ke),we=n(1398),Me=n(1376),xe=n(85),Te=n.n(xe),Ne=n(80),Se=n.n(Ne);function Ae(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=0;n<e.length;n++){var a=e[n];if(a.__pathExp.test(t)){var r=[],o=a;while(o)r.push(o),o=o.parent;return r}}return[]}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],a=e.map(function(e){var a=e.children,r=void 0===a?[]:a,o=Object(oe["a"])(e,["children"]);o.parent=t;var i=Ie(r,o),c=i.leafMenus,l=i.menus;return n.push.apply(n,Object(Ee["a"])(c)),o.children=l,De(e)&&(o.__pathExp=Se()(o.path,[],{end:!1}),n.push(o)),o});return{leafMenus:n,menus:a}}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!e.path&&Te()(e.children)}var Le,Pe,Be,He,Re,Ke=E.a.createContext({}),Ue=(Le=Object(T["Bind"])(),Pe=Object(T["Bind"])(),Be=function(e){function t(e){var n;Object(m["a"])(this,t),n=Object(g["a"])(this,Object(b["a"])(t).call(this,e));for(var a=e.activeMenus,r=void 0===a?[]:a,o=[],i=[],c=0;c<r.length-1;c++)o.push("".concat(r[c].id)),i.push("".concat(r[c].id));return i.pop(),n.state={selectedKeys:o,openMenuKeys:i},n}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"handleMenuItemClick",value:function(e){var t=e.item,n=t.props["data-hzero-menu"];Object(Me["l"])(n)}},{key:"handleMenuOpenChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState({openMenuKeys:e})}},{key:"renderTOPMenu",value:function(){var e=this,t=this.props.mainMenu;t=void 0===t?{}:t;var n=t.children,a=void 0===n?[]:n;return a.map(function(t){return e.renderMenu(t,!0)})}},{key:"renderMenu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return De(e)?this.renderMenuItem(e,t):this.renderSubMenu(e,t)}},{key:"renderMenuItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return E.a.createElement(W["default"].Item,{key:e.id,"data-hzero-menu":e},t&&E.a.createElement(we["a"],{type:e.icon,style:{paddingRight:8}}),e.name&&q["a"].get(e.name).d(e.name))}},{key:"renderSubMenu",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.children,r=void 0===a?[]:a;return E.a.createElement(W["default"].SubMenu,{key:e.id,title:E.a.createElement(E.a.Fragment,null,n&&E.a.createElement(we["a"],{type:e.icon,style:{paddingRight:8}}),e.name&&q["a"].get(e.name).d(e.name))},r.map(function(e){return t.renderMenu(e)}))}},{key:"render",value:function(){var e=this.props.mainMenu,t=this.state,n=t.selectedKeys,a=void 0===n?[]:n,r=t.openMenuKeys,o=void 0===r?[]:r;return e?E.a.createElement(W["default"],{mode:"inline",theme:"dark",openKeys:o,selectedKeys:a,onOpenChange:this.handleMenuOpenChange,onClick:this.handleMenuItemClick},this.renderTOPMenu(e,!0)):null}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevActiveMenus,a=t.openMenuKeys,r=void 0===a?[]:a,o=e.mainMenu,i=e.activeMenus,c=void 0===i?[]:i,l=c[c.length-1];if(o===l||n!==c){for(var u=[],s=[],d=0;d<c.length-1;d++)u.push("".concat(c[d].id)),s.push("".concat(c[d].id));return s.pop(),{selectedKeys:u,openMenuKeys:Ce()([].concat(Object(Ee["a"])(r),s))}}return null}}]),t}(j["Component"]),Object(O["a"])(Be.prototype,"handleMenuItemClick",[Le],Object.getOwnPropertyDescriptor(Be.prototype,"handleMenuItemClick"),Be.prototype),Object(O["a"])(Be.prototype,"handleMenuOpenChange",[Pe],Object.getOwnPropertyDescriptor(Be.prototype,"handleMenuOpenChange"),Be.prototype),Be),Ve=(n(1417),n(1395));function ze(e){return"hzero-".concat(e)}var Fe,We,Xe,Ze,Ge,qe,Ye,Je,Qe,_e,$e,et=(He=Object(T["Bind"])(),Re=function(e){function t(){return Object(m["a"])(this,t),Object(g["a"])(this,Object(b["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"handleMainMenuChange",value:function(e){var t=this.props,n=t.onMainMenuChange,a=t.menus,r=void 0===a?[]:a,o=r.find(function(t){return"".concat(t.id)===e});o&&n(o)}},{key:"render",value:function(){var e=this.props,t=e.menus,n=e.language,a=e.extraRight,r=void 0===a?null:a;return E.a.createElement(Ve["default"],{type:"card",className:ze("main-menu"),onChange:this.handleMainMenuChange,tabBarExtraContent:r},t.map(function(e){return E.a.createElement(Ve["default"].TabPane,{key:e.id,tab:n?e.name&&q["a"].get(e.name).d(e.name):"..."})}))}}]),t}(j["Component"]),Object(O["a"])(Re.prototype,"handleMainMenuChange",[He],Object.getOwnPropertyDescriptor(Re.prototype,"handleMainMenuChange"),Re.prototype),Re),tt=et,nt=n(1565),at=nt.isEmpty,rt=(Fe=Object(T["Bind"])(),We=function(e){function t(e){var n;Object(m["a"])(this,t),n=Object(g["a"])(this,Object(b["a"])(t).call(this,e));var a=e.activeTabKey,r=e.menus,o=Ie(r),i=o.leafMenus,c=o.menus;return n.state={activeMenus:[],menus:c,leafMenus:i,prevActiveTabKey:a,prevMenus:r},n}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"handleMainMenuChange",value:function(e){e&&this.setState({mainMenu:e})}},{key:"render",value:function(){var e=this.props,t=e.language,n=e.children,a=this.state,r=a.menus,o=a.leafMenus,i=a.activeMenus,c=a.mainMenu;return E.a.createElement(Ke.Provider,{value:{menus:r,activeMenus:i,leafMenus:o,language:t,mainMenu:c,onMainMenuChange:this.handleMainMenuChange}},n)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.activeTabKey,a=e.menus,r=t.prevActiveTabKey,o=t.prevMenus,i={};if(o!==a){if(at(a))i.leafMenus=[],i.menus=[];else{var c=Ie(a),l=c.leafMenus,u=c.menus;i.leafMenus=l,i.menus=u,u&&u[0]&&(i.mainMenu=u[0])}i.prevMenus=a}return n!==r&&(i.activeTabKey=n,i.activeMenus=Ae(i.leafMenus||t.leafMenus,n),i.prevActiveTabKey=n),at(i)?null:i}}]),t}(j["Component"]),Object(O["a"])(We.prototype,"handleMainMenuChange",[Fe],Object.getOwnPropertyDescriptor(We.prototype,"handleMainMenuChange"),We.prototype),We),ot=Object(w["connect"])(function(e){var t=e.global,n=void 0===t?{}:t;return{language:n.language,menus:n.menu,activeTabKey:n.activeTabKey}})(rt),it=n(15),ct=(Xe=Object(T["Bind"])(),Ze=function(e){function t(){return Object(m["a"])(this,t),Object(g["a"])(this,Object(b["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"renderChildren",value:function(e){var t=this.props.children,n=t.props,a=void 0===n?{}:n;return Object(j["cloneElement"])(t,Object(it["a"])({},e,a))}},{key:"render",value:function(){return E.a.createElement(Ke.Consumer,null,this.renderChildren)}}]),t}(j["Component"]),Object(O["a"])(Ze.prototype,"renderChildren",[Xe],Object.getOwnPropertyDescriptor(Ze.prototype,"renderChildren"),Ze.prototype),Ze),lt=(n(1386),n(1385)),ut=n(497),st=n.n(ut),dt=n(1440),pt=n(1310),ht=n.n(pt);function ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(Ee["a"])(e).map(function(e){return{icon:e.icon,name:e.name,path:e.path,type:e.type,search:e.search,id:e.id}})}function mt(e){e.stopPropagation()}var yt,gt,bt=(Ge=Object(T["Bind"])(),qe=Object(T["Bind"])(),Ye=Object(T["Bind"])(),Je=Object(T["Bind"])(),Qe=Object(T["Bind"])(),$e=function(e){function t(){var e,n;Object(m["a"])(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(g["a"])(this,(e=Object(b["a"])(t)).call.apply(e,[this].concat(r))),n.state={data:[],value:void 0,history:Object(dt["a"])()},n}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"handleGotoHistory",value:function(e){Object(Me["l"])(e),this.addHistory(e)}},{key:"addHistory",value:function(e){var t=this.state.history,n=void 0===t?[]:t,a=st()([e].concat(Object(Ee["a"])(n)),function(e){return e.key});a.length>8&&a.pop(),Object(dt["b"])(n),this.setState({history:a})}},{key:"componentWillUnmount",value:function(){var e=this.state.history,t=void 0===e?[]:e;Object(dt["b"])(t)}},{key:"handleSearch",value:function(e){var t=this.props.menuLeafNode,n=[],a=e?e.trim():"";Te()(a)||(n=t.filter(function(e){if(e.title.includes(a))return!0;var t=e&&e.quickIndex&&e.quickIndex.toLowerCase();return!!t&&t.startsWith(a.toLowerCase())})),this.setState({data:n})}},{key:"handleSelect",value:function(e){var t=this.props.menuLeafNode,n=this.state.history,a=void 0===n?[]:n,r=t.filter(function(t){return t.id===e})[0];if(!Te()(r)){var o={icon:r.icon,name:r.name,path:r.path,type:r.type,search:r.search,id:r.id};Object(Me["l"])(o),this.addHistory(o),this.setState({data:ft(a),value:void 0})}}},{key:"handleFocus",value:function(){var e=this.state.history,t=void 0===e?[]:e;this.setState({focus:!0,data:ft(t)})}},{key:"handleBlur",value:function(){this.setState({focus:!1,data:[],value:void 0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=void 0===t?"":t,a=e.collapsed,r=this.state,o=r.data,i=void 0===o?[]:o,c=r.value,l=r.focus,u=i&&i.filter(function(e){return e.name?q["a"].get(e.name):""}).map(function(e){return E.a.createElement(lt["default"].Option,{key:e.id,value:e.id},q["a"].get(e.name))}),s=[n,ht.a.search],d=[ht.a.icon];return a&&s.push(ht.a.collapsed),l&&(s.push(ht.a.focus),d.push(ht.a.active)),E.a.createElement("div",{className:s.join(" "),onKeyDown:mt},E.a.createElement("span",{className:d.join(" ")}),E.a.createElement(lt["default"],{showSearch:!0,size:"small",placeholder:q["a"].get("hzero.common.basicLayout.menuSelect").d("\u83dc\u5355\u641c\u7d22"),value:c,showArrow:!1,className:ht.a.input,filterOption:!1,onBlur:this.handleBlur,onFocus:this.handleFocus,onSearch:this.handleSearch,onSelect:this.handleSelect},u))}}]),t}(E.a.Component),_e=$e,Object(O["a"])(_e.prototype,"handleGotoHistory",[Ge],Object.getOwnPropertyDescriptor(_e.prototype,"handleGotoHistory"),_e.prototype),Object(O["a"])(_e.prototype,"handleSearch",[qe],Object.getOwnPropertyDescriptor(_e.prototype,"handleSearch"),_e.prototype),Object(O["a"])(_e.prototype,"handleSelect",[Ye],Object.getOwnPropertyDescriptor(_e.prototype,"handleSelect"),_e.prototype),Object(O["a"])(_e.prototype,"handleFocus",[Je],Object.getOwnPropertyDescriptor(_e.prototype,"handleFocus"),_e.prototype),Object(O["a"])(_e.prototype,"handleBlur",[Qe],Object.getOwnPropertyDescriptor(_e.prototype,"handleBlur"),_e.prototype),_e),vt=Object(w["connect"])(function(e){var t=e.global,n=void 0===t?{}:t;return{menuLeafNode:n.menuLeafNode}})(bt),Ot=(n(1311),{logo:ze("header-logo"),title:ze("header-title"),"icon-icon":ze("header-icon-icon"),"icon-img":ze("header-icon-img")}),jt=(yt=Object(T["Bind"])(),gt=function(e){function t(e){var n;return Object(m["a"])(this,t),n=Object(g["a"])(this,Object(b["a"])(t).call(this,e)),n.state={collapsed:!1},n}return Object(v["a"])(t,e),Object(y["a"])(t,[{key:"componentDidMount",value:function(){var e=document.querySelector("#loader-wrapper");e&&(document.body.removeChild(e),x.a.setDefaultLoadingComponent(function(){return E.a.createElement(A["a"],null)})),this.init()}},{key:"init",value:function(){var e=this.props,t=e.dispatch,n=e.currentUser,a=void 0===n?{}:n,r=a.language;t({type:"global/baseLazyInit",payload:{language:r}}).then(function(){Object(I["k"])()})}},{key:"toggleCollapse",value:function(){var e=this.state.collapsed,t=void 0!==e&&e;this.setState({collapsed:!t})}},{key:"render",value:function(){var e=this.props.currentUser,t=void 0===e?{}:e;return E.a.createElement(C.a,{title:t.title||""},this.renderLayout())}},{key:"renderLayout",value:function(){var e=this.props,t=e.currentUser,n=void 0===t?{}:t,a=e.extraHeaderRight,r=e.dispatch,o=this.state.collapsed,i=void 0!==o&&o,c=!1;try{c=JSON.parse(D["l"])}catch(l){c=!1}return E.a.createElement(ot,null,E.a.createElement("div",{className:S()(ze("layout"),Object(f["a"])({},ze("layout-collapsed"),i))},E.a.createElement("div",{className:ze("header")},E.a.createElement("div",{className:ze("header-left")},E.a.createElement(R,{collapsed:i,logo:n.logo,title:n.title,styles:Ot})),E.a.createElement("div",{className:ze("header-content")},E.a.createElement(h["default"],{className:ze("menu-trigger"),type:i?"menu-unfold":"menu-fold",onClick:this.toggleCollapse}),E.a.createElement(ct,null,E.a.createElement(tt,{extraRight:E.a.createElement("div",{className:ze("header-right")},E.a.createElement(vt,{className:ze("search")}),E.a.createElement(Oe,{extraHeaderRight:a,dispatch:r}))})))),E.a.createElement("div",{className:ze("content")},E.a.createElement("div",{className:ze("menu")},E.a.createElement(ct,null,E.a.createElement(Ue,null))),E.a.createElement("div",{className:ze("page")},E.a.createElement(K["a"],null),c&&E.a.createElement(je["a"],null)))))}}]),t}(E.a.Component),Object(O["a"])(gt.prototype,"toggleCollapse",[yt],Object.getOwnPropertyDescriptor(gt.prototype,"toggleCollapse"),gt.prototype),gt);t["default"]=Object(w["connect"])(function(e){var t=e.user,n=void 0===t?{}:t,a=e.global,r=void 0===a?{}:a;return{menu:r.menu,routerData:r.routerData,currentUser:n.currentUser,activeTabKey:r.activeTabKey,tabs:r.tabs,language:r.language,count:r.count}})(jt)}}]);