(window["webpackJsonppackages_hzero_front_hrpt_name_"]=window["webpackJsonppackages_hzero_front_hrpt_name_"]||[]).push([[71],{234:function(e,a,t){"use strict";t.d(a,"d",function(){return m}),t.d(a,"b",function(){return i}),t.d(a,"e",function(){return c}),t.d(a,"c",function(){return b}),t.d(a,"a",function(){return s}),t.d(a,"f",function(){return u});var l=t(21),r=t(111),n=t(162),p=t(113),o=Object(p["q"])(),d=Object(p["g"])(),m=function(){return{rowKey:"labelTemplateId",autoQuery:!0,selection:!1,queryFields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always"},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string"},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),type:"string"}],fields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",required:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string",required:!0},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",defaultValue:"1",required:!0,transformResponse:function(e){return 0===e?"0":"1"}},{name:"templateWidth",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateWidth").d("\u6a21\u677f\u5bbd\u5ea6"),type:"number",required:!0},{name:"templateHigh",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateHigh").d("\u6a21\u677f\u9ad8\u5ea6"),type:"number",required:!0}],transport:{read:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-templates"):"".concat(n["l"],"/v1/label-templates"),method:"GET",query:a})},create:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-templates"):"".concat(n["l"],"/v1/label-templates"),method:"POST",data:a[0]})},destroy:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-templates"):"".concat(n["l"],"/v1/label-templates"),method:"DELETE",data:a[0]})}}}},i=function(e,a){return{rowKey:"labelTemplateId",autoQuery:!0,paging:!1,fields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",required:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string",required:!0},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",required:!0,defaultValue:"1",transformResponse:function(e){return 0===e?"0":"1"}},{name:"templateWidth",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateWidth").d("\u6a21\u677f\u5bbd\u5ea6"),type:"number",required:!0},{name:"templateHigh",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateHigh").d("\u6a21\u677f\u9ad8\u5ea6"),type:"number",required:!0},{name:"templateContent",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateContent").d("\u6a21\u677f\u5185\u5bb9"),type:"string"}],transport:{read:function(a){var t=a.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-templates/").concat(e):"".concat(n["l"],"/v1/label-templates/").concat(e),method:"GET",query:{}})},update:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-templates"):"".concat(n["l"],"/v1/label-templates"),method:"PUT",data:a[0]})}},children:{labelParameterList:a}}},c=function(){return{rowKey:"labelParameterId",autoQuery:!1,paging:!1,selection:!1,fields:[{name:"parameterCode",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterCode").d("\u53c2\u6570\u4ee3\u7801"),type:"string",required:!0},{name:"parameterName",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterName").d("\u53c2\u6570\u540d\u79f0"),type:"string",required:!0},{name:"paramTypeCode",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterType").d("\u53c2\u6570\u7c7b\u578b"),type:"single",required:!0,lookupCode:"HRPT.LABEL_PARAM_TYPE"},{name:"textLength",label:r["a"].get("hrpt.labelTemplate.model.parameter.textLength").d("\u6587\u5b57\u957f\u5ea6"),type:"number"},{name:"maxRows",label:r["a"].get("hrpt.labelTemplate.model.parameter.maxRows").d("\u6700\u5927\u884c\u6570"),type:"number"},{name:"barCodeType",label:r["a"].get("hrpt.labelTemplate.model.parameter.barCodeType").d("\u6761\u7801\u7c7b\u578b"),type:"single",lookupCode:"HRPT.LABEL_BARCODE_TYPE"},{name:"characterEncoding",label:r["a"].get("hrpt.labelTemplate.model.parameter.characterEncoding").d("\u5b57\u7b26\u7f16\u7801"),type:"string",dynamicProps:{required:function(e){var a=e.record;return"BARCODE"===a.get("paramTypeCode")}},lookupCode:"HRPT.LABEL.CHARACTER_ENCODE"}],transport:{destroy:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-parameters"):"".concat(n["l"],"/v1/label-parameters"),method:"DELETE",data:a[0]})}}}},b=function(){return{constants:{shape:{circle:"1",rectangle:"2",horizontalLine:"4",verticalLine:"8"},type:{text:"1",img:"2",bar:"4",qr:"8"},sourceType:{text:"1",param:"2",upload:"4"}},options:{shape:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.shape.circle").d("\u5706")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.shape.rectangle").d("\u65b9\u5f62")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.hL").d("\u6a2a\u7ebf")},{value:"8",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.verticalLine").d("\u7ad6\u7ebf")}],type:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.text").d("\u6587\u672c")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.img").d("\u56fe\u7247")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.bar").d("\u6761\u7801")},{value:"8",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.qr").d("\u4e8c\u7ef4\u7801")}],sourceType:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.text").d("\u624b\u52a8\u8f93\u5165")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.param").d("\u8868\u8fbe\u5f0f")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.upload").d("\u4e0a\u4f20\u56fe\u7247")}]},ds:{fields:[{name:"shape",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.shape").d("\u5f62\u72b6"),required:!0},{name:"code",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.code").d("\u53c2\u6570"),required:!0},{name:"type",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.type").d("\u7c7b\u578b"),required:!0},{name:"sourceType",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.sourceType").d("\u8f93\u5165\u6e90"),required:!0,defaultValue:"1"},{name:"width",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.width").d("\u5bbd"),type:"number",required:!0},{name:"height",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.height").d("\u9ad8"),type:"number",required:!0},{name:"text",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.text").d("\u5185\u5bb9"),type:"string",required:!0},{name:"param",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.param").d("\u8868\u8fbe\u5f0f"),type:"string",required:!0},{name:"src",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.src").d("\u56fe\u7247URL"),type:"string",required:!0}]}}},s=function(e){return{autoQuery:!0,selection:!1,queryFields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",disabled:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",disabled:!0},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",disabled:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),type:"string"},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"}],fields:[{name:"tenantLov",type:"object",lovCode:"HPFM.TENANT",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"roleLov",type:"object",lovCode:"HIAM.TENANT_ROLE",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.role").d("\u89d2\u8272"),cascadeMap:{tenantId:"tenantId"},ignore:"always",required:!0},{name:"roleId",type:"number",bind:"roleLov.id"},{name:"roleName",type:"string",bind:"roleLov.name"},{name:"startDate",type:"date",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.startDate").d("\u751f\u6548\u65e5\u671f"),dynamicProps:{max:function(e){var a=e.record;return a.get("endDate")}}},{name:"endDate",type:"date",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.endDate").d("\u5931\u6548\u65e5\u671f"),dynamicProps:{min:function(e){var a=e.record;return a.get("startDate")}}},{name:"remark",type:"string",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.remark").d("\u63cf\u8ff0")}],transport:{read:function(a){var t=a.params,r=a.config;return Object(l["a"])({},r,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-permissions"):"".concat(n["l"],"/v1/label-permissions"),method:"GET",params:Object(l["a"])({},t,{labelTemplateId:e.labelTemplateId})})},create:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-permissions"):"".concat(n["l"],"/v1/label-permissions"),method:"POST",data:a[0]})},update:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-permissions"):"".concat(n["l"],"/v1/label-permissions"),method:"PUT",data:a[0]})},destroy:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-permissions"):"".concat(n["l"],"/v1/label-permissions"),method:"DELETE",data:a[0]})}}}},u=function(e){return{autoQuery:!1,autoCreate:!0,paging:!1,fields:[{name:"paperSize",label:r["a"].get("hrpt.labelTemplate.model.print.paperSize").d("\u7eb8\u5f20\u5c3a\u5bf8"),lookupCode:"HRPT.LABEL.PAPER",type:"string",required:!0},{name:"paperWidth",label:r["a"].get("hrpt.labelTemplate.model.print.paperWidth").d("\u5bbd\u5ea6(mm)"),type:"number",required:!0,dynamicProps:{readOnly:function(e){var a=e.record;return"customize"!==a.get("paperSize")}}},{name:"paperHigh",label:r["a"].get("hrpt.labelTemplate.model.print.paperHigh").d("\u9ad8\u5ea6(mm)"),type:"number",dynamicProps:{readOnly:function(e){var a=e.record;return"customize"!==a.get("paperSize")||a.get("_paperNoLimit")},required:function(e){var a=e.record;return!a.get("_paperNoLimit")}}},{name:"_paperNoLimit",label:r["a"].get("hrpt.labelTemplate.model.print.paperNoLimit").d("\u65e0\u9650\u5236"),type:"boolean",trueValue:!0,falseValue:!1,defaultValue:!1,dynamicProps:{readOnly:function(e){var a=e.record;return"customize"!==a.get("paperSize")}}},{name:"printDirection",label:r["a"].get("hrpt.labelTemplate.model.print.printDirection").d("\u65b9\u5411"),type:"boolean",trueValue:0,falseValue:1,defaultValue:0},{name:"marginTop",label:r["a"].get("hrpt.labelTemplate.model.print.marginTop").d("\u4e0a(mm)"),type:"number",required:!0,defaultValue:0},{name:"marginRight",label:r["a"].get("hrpt.labelTemplate.model.print.marginRight").d("\u53f3(mm)"),type:"number",required:!0,defaultValue:0},{name:"marginBottom",label:r["a"].get("hrpt.labelTemplate.model.print.marginBottom").d("\u4e0b(mm)"),type:"number",defaultValue:0,dynamicProps:{readOnly:function(e){var a=e.record;return a.get("_paperNoLimit")},required:function(e){var a=e.record;return!a.get("_paperNoLimit")}}},{name:"marginLeft",label:r["a"].get("hrpt.labelTemplate.model.print.marginLeft").d("\u5de6(mm)"),type:"number",required:!0,defaultValue:0},{name:"wideQty",label:r["a"].get("hrpt.labelTemplate.model.print.wideQty").d("\u5bbd(\u4e2a)"),type:"number",required:!0,defaultValue:1},{name:"highQty",label:r["a"].get("hrpt.labelTemplate.model.print.highQty").d("\u9ad8(\u4e2a)"),type:"number",defaultValue:1,dynamicProps:{readOnly:function(e){var a=e.record;return a.get("_paperNoLimit")}}},{name:"highSpace",label:r["a"].get("hrpt.labelTemplate.model.print.highSpace").d("\u9ad8\u95f4\u8ddd(mm)"),type:"number",defaultValue:0,dynamicProps:{required:function(e){var a=e.record;return a.get("_paperNoLimit")}}}],transport:{read:function(a){var t=a.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-prints/").concat(e.templateCode):"".concat(n["l"],"/v1/label-prints/").concat(e.templateCode),method:"GET",params:{tenantId:d}})},create:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-prints"):"".concat(n["l"],"/v1/label-prints"),method:"POST",data:a[0]})},update:function(e){var a=e.data,t=e.config;return Object(l["a"])({},t,{url:o?"".concat(n["l"],"/v1/").concat(d,"/label-prints"):"".concat(n["l"],"/v1/label-prints"),method:"POST",data:a[0]})}}}}},32:function(e,a,t){"use strict";t.r(a),t.d(a,"hasDialog",function(){return r}),t.d(a,"buildName",function(){return n}),t.d(a,"transformDataToElement",function(){return p}),t.d(a,"transformElementToData",function(){return o});var l=t(234);function r(e,a){return e&&e.ui.hasDialog(a),!1}function n(e){return"hzero_label_".concat(e)}function p(e,a){var t=Object(l["c"])(),r=t.constants,n={width:e.width,height:e.height},p={};function o(e,t){a.setStyle(e,t),"background-color"!==e?p[e]=t:a.setAttribute("data-backgroundcolor",t)}function d(e){a.removeStyle(e),"background-color"===e&&a.removeAttribute("data-backgroundcolor"),delete p[e]}switch(e.shape){case r.shape.horizontalLine:n.shape="horizontalLine",n.tag="span";break;case r.shape.verticalLine:n.shape="verticalLine",n.tag="span";break;case r.shape.rectangle:n.shape="rectangle",n.code=e.code;break;case r.shape.circle:n.shape="circle",n.code=e.code;break;default:break}if(!n.tag){switch(e.type){case r.type.text:n.tag="span",n.type="text";break;case r.type.qr:n.tag="img",n.type="qr";break;case r.type.bar:n.tag="img",n.type="bar";break;case r.type.img:n.tag="img",n.type="img";break;default:break}switch(e.sourceType){case r.sourceType.text:n.dataType="text",n.value=e.text;break;case r.sourceType.param:n.dataType="param",n.value=e.param;break;case r.sourceType.upload:n.dataType="upload",n.value=e.src;break;default:break}}a.setAttribute("contenteditable",!1),a.setAttribute("data-shape",n.shape),a.setAttribute("data-width",n.width),a.setAttribute("data-height",n.height),a.setAttribute("data-value",n.value),a.setAttribute("data-type",n.type),a.setAttribute("data-datatype",n.dataType),a.setAttribute("data-code",n.code),o("position","relative"),o("display","inline-block"),o("width","".concat(n.width,"mm")),o("height","".concat(n.height,"mm")),o("border","1px solid #000"),o("border-radius","circle"===n.shape?"50%":"0"),["horizontalLine","verticalLine"].includes(n.shape)&&d("border");var m="#";switch(n.shape){case"circle":case"rectangle":m+="c";break;case"horizontalLine":case"verticalLine":m+="0";break;default:m+="6";break}switch(n.dataType){case"param":case"text":m+="6";break;case"upload":m+="c";break;default:m+="0";break}switch(n.type){case"text":m+="6";break;case"qr":m+="c";break;case"bar":m+="c";break;case"img":a.setAttribute("data-src",n.value),a.removeAttribute("data-value"),m+="c";break;default:m+="0";break}a.setText(n.value),o("background-color",m),["verticalLine","horizontalLine"].includes(n.shape)&&(a.setText(n.shape),o("color",m),o("overflow","hidden")),a.setAttribute("data-style",Object.keys(p).map(function(e){return"".concat(e,": ").concat(p[e],";")}).join(" "))}function o(e){var a=Object(l["c"])(),t=a.constants,r={},n={};switch(r.shape=e.data("shape"),r.width=e.data("width"),r.height=e.data("height"),r.value=e.data("value"),r.type=e.data("type"),r.dataType=e.data("dataType"),r.code=e.data("code"),n.width=+r.width,n.height=+r.height,r.shape){case"horizontalLine":n.shape=t.shape.horizontalLine;break;case"verticalLine":n.shape=t.shape.verticalLine;break;case"rectangle":n.shape=t.shape.rectangle,n.code=r.code;break;case"circle":n.shape=t.shape.circle,n.code=r.code;break;default:return}switch(r.type){case"text":n.type=t.type.text;break;case"qr":n.type=t.type.qr;break;case"bar":n.type=t.type.bar;break;case"img":n.type=t.type.img,r.value=e.data("src");break;default:break}switch(r.dataType){case"param":n.sourceType=t.sourceType.param,n.param=r.value;break;case"upload":n.sourceType=t.sourceType.upload,n.src=r.value;break;case"text":n.sourceType=t.sourceType.text,n.text=r.value;break;default:break}return n}}}]);