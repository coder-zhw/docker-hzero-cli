(window["webpackJsonppackages_hzero_front_hrpt_name_"]=window["webpackJsonppackages_hzero_front_hrpt_name_"]||[]).push([[20,53,54,71,75],[,,,function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return s});a(390);var n=a(335),r=a.n(n),o=a(1),l=a.n(o),i=a(111),p=a(234),c=a(31),u=a(32),d=r.a.key();function s(e){e.plugins.get("label-template")||e.plugins.add("label-template",{icons:"Link",init:function(e){e.ui.addButton&&(e.ui.addButton("label-template",{icon:"Link",label:i["a"].get("hrpt.labelTemplate.view.title.cke.p.label").d("\u6807\u7b7e"),command:"hzeroLabelTemplateInsertLabel",toolbar:"label-template, 20"}),e.addCommand("hzeroLabelTemplateInsertLabel",{exec:function(){var t=l.a.createRef();r.a.open({key:d,children:l.a.createElement(c["default"],{interactedRef:t}),title:i["a"].get("hrpt.labelTemplate.view.title.cke.p.labelInsert").d("\u6807\u7b7e\u63d2\u5165"),onOk:function(){return t.current?t.current.getValidateData().then(function(t){if(t){var a=Object(p["c"])(),n=a.constants,r=e.document.createElement(([n.type.img,n.type.bar,n.type.qr].includes(t.type),"span"));return Object(u["transformDataToElement"])(t,r),e.insertElement(r),!0}return!1},function(){return!1}):Promise.resolve(!1)}})}})),e.addCommand("hzeroLabelTemplateEditLabel",{exec:function(e){var t=e.getSelection(),a=t.getSelectedElement(),n={};if(a&&a.data("shape")){Object.assign(n,Object(u["transformElementToData"])(a)||{});var o=l.a.createRef();r.a.open({key:d,children:l.a.createElement(c["default"],{interactedRef:o,initialData:n,isCreate:!1}),title:i["a"].get("hrpt.labelTemplate.view.title.cke.p.labelEdit").d("\u6807\u7b7e\u7f16\u8f91"),onOk:function(){return o.current?o.current.getValidateData().then(function(t){return!!t&&(Object(u["transformDataToElement"])(t,a),e.fire("change"),!0)},function(){return!1}):Promise.resolve(!1)}})}}}),e.addCommand("hzeroLabelTemplateDeleteLabel",{exec:function(e){var t=e.elementPath(),a=t.contains(["span","img"],1);a&&a.data("shape")&&r.a.confirm({children:i["a"].get("hrpt.labelTemplate.view.confirm.delete").d("\u662f\u5426\u786e\u8ba4\u5220\u9664"),onOk:function(){var t=a.getParent(),n=e.editable();1!==t.getChildCount()||t.is("td","th")||t.equals(n)||(a=t);var r=e.createRange();r.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START),a.remove(),r.select()}})}}),e.contextMenu&&(e.addMenuGroup("hzeroLabelTemplate"),e.addMenuItems({hzeroLabelTemplateEditLabel:{label:i["a"].get("hzero.common.button.edit").d("\u7f16\u8f91"),command:"hzeroLabelTemplateEditLabel",group:"hzeroLabelTemplate",order:1},hzeroLabelTemplateDeleteLabel:{label:i["a"].get("hzero.common.button.delete").d("\u5220\u9664"),command:"hzeroLabelTemplateDeleteLabel",group:"hzeroLabelTemplate",order:2}}),e.contextMenu.addListener(function(e){var t=e.getAscendant({span:1,img:1},!0);if(t&&t.data("shape"))return{hzeroLabelTemplateDeleteLabel:CKEDITOR.TRISTATE_OFF,hzeroLabelTemplateEditLabel:CKEDITOR.TRISTATE_OFF}}))}})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a(323);var n=a(246),r=a.n(n),o=(a(237),a(258)),l=a.n(o),i=(a(304),a(273)),p=a.n(i),c=a(2),u=a.n(c),d=a(22),s=a(21),m=(a(305),a(243)),b=a.n(m),f=a(23),h=(a(240),a(241)),g=a.n(h),y=a(1),v=a.n(y),T=a(202),k=a.n(T),x=a(309),L=a(162),O=a(234),w=a(380),E=a.n(w);function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){var t=e.value,a=e.meaning;return v.a.createElement(g.a.Option,{value:t,key:t},a)})}var N=function(e){var t=e.isCreate,a=void 0===t||t,n=e.initialData,o=e.interactedRef,i=v.a.useState(),c=Object(f["a"])(i,2),m=(c[0],c[1]),h=v.a.useMemo(function(){var e=Object(O["c"])(),t=new b.a(Object(s["a"])({},e.ds));return t.create(a?{shape:e.constants.shape.rectangle,type:e.constants.type.text,sourceType:e.constants.sourceType.text,width:100,height:100,text:"label text",param:"",src:""}:n),{ds:t,constants:e.constants,options:e.options,srcFileList:a?[]:[{url:n.src,uid:"-1",status:"done"}]}},[]),y=h.ds,T=h.options,w=h.constants,N=h.srcFileList,A=v.a.useCallback(function(e){y.current.set("src",e.response||e.url||e.thumbUrl)},[y]);v.a.useEffect(function(){var e=function(e){var t=e.name;["shape","type","sourceType"].includes(t)&&m(k()())};return y.addEventListener("update",e),function(){y.removeEventListener("update",e)}},[y]),v.a.useImperativeHandle(o,function(){return{getValidateData:function(){var e=Object(d["a"])(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=function(){if(!t.code)return!1;switch(t.sourceType){case w.sourceType.text:return!!t.text;case w.sourceType.param:return!!t.param;case w.sourceType.upload:return!!t.src;default:return!1}},n=function(){return t.width>0&&t.height>0},t=y.toData()[0],a=!1,e.t0=t.shape,e.next=e.t0===w.shape.horizontalLine?7:e.t0===w.shape.verticalLine?9:e.t0===w.shape.rectangle?11:e.t0===w.shape.circle?13:15;break;case 7:return n()&&(a=!0),e.abrupt("break",16);case 9:return n()&&(a=!0),e.abrupt("break",16);case 11:return n()&&r()&&(a=!0),e.abrupt("break",16);case 13:return n()&&r()&&(a=!0),e.abrupt("break",16);case 15:a=!1;case 16:if(!a){e.next=18;break}return e.abrupt("return",t);case 18:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}});var C=y.current.toData();return v.a.createElement(r.a,{columns:1,dataSet:y,className:E.a["label-editor"]},v.a.createElement(g.a,{key:"shape",name:"shape"},j(T.shape)),v.a.createElement(p.a,{key:"width",name:"width",min:1}),v.a.createElement(p.a,{key:"height",name:"height",min:1}),[w.shape.circle,w.shape.rectangle].includes(C.shape)&&[v.a.createElement(g.a,{key:"type",name:"type"},j(T.type)),v.a.createElement(l.a,{key:"code",name:"code"}),v.a.createElement(g.a,{key:"sourceType",name:"sourceType"},j(T.sourceType.filter(function(e){var t=e.value;return C.type===w.type.img||t!==w.sourceType.upload})))],[w.shape.circle,w.shape.rectangle].includes(C.shape)&&w.sourceType.text===C.sourceType&&v.a.createElement(l.a,{key:"text",name:"text"}),[w.shape.circle,w.shape.rectangle].includes(C.shape)&&w.sourceType.param===C.sourceType&&v.a.createElement(l.a,{key:"param",name:"param"}),[w.shape.circle,w.shape.rectangle].includes(C.shape)&&w.sourceType.upload===C.sourceType&&v.a.createElement(x["a"],{single:!0,key:"src",name:"src",fileType:"image/jpeg,image/png",onUploadSuccess:A,fileList:N,bucketName:L["c"]}))};t["default"]=N},function(e,t,a){"use strict";a.r(t),a.d(t,"hasDialog",function(){return r}),a.d(t,"buildName",function(){return o}),a.d(t,"transformDataToElement",function(){return l}),a.d(t,"transformElementToData",function(){return i});var n=a(234);function r(e,t){return e&&e.ui.hasDialog(t),!1}function o(e){return"hzero_label_".concat(e)}function l(e,t){var a=Object(n["c"])(),r=a.constants,o={width:e.width,height:e.height},l={};function i(e,a){t.setStyle(e,a),"background-color"!==e?l[e]=a:t.setAttribute("data-backgroundcolor",a)}function p(e){t.removeStyle(e),"background-color"===e&&t.removeAttribute("data-backgroundcolor"),delete l[e]}switch(e.shape){case r.shape.horizontalLine:o.shape="horizontalLine",o.tag="span";break;case r.shape.verticalLine:o.shape="verticalLine",o.tag="span";break;case r.shape.rectangle:o.shape="rectangle",o.code=e.code;break;case r.shape.circle:o.shape="circle",o.code=e.code;break;default:break}if(!o.tag){switch(e.type){case r.type.text:o.tag="span",o.type="text";break;case r.type.qr:o.tag="img",o.type="qr";break;case r.type.bar:o.tag="img",o.type="bar";break;case r.type.img:o.tag="img",o.type="img";break;default:break}switch(e.sourceType){case r.sourceType.text:o.dataType="text",o.value=e.text;break;case r.sourceType.param:o.dataType="param",o.value=e.param;break;case r.sourceType.upload:o.dataType="upload",o.value=e.src;break;default:break}}t.setAttribute("contenteditable",!1),t.setAttribute("data-shape",o.shape),t.setAttribute("data-width",o.width),t.setAttribute("data-height",o.height),t.setAttribute("data-value",o.value),t.setAttribute("data-type",o.type),t.setAttribute("data-datatype",o.dataType),t.setAttribute("data-code",o.code),i("position","relative"),i("display","inline-block"),i("width","".concat(o.width,"mm")),i("height","".concat(o.height,"mm")),i("border","1px solid #000"),i("border-radius","circle"===o.shape?"50%":"0"),["horizontalLine","verticalLine"].includes(o.shape)&&p("border");var c="#";switch(o.shape){case"circle":case"rectangle":c+="c";break;case"horizontalLine":case"verticalLine":c+="0";break;default:c+="6";break}switch(o.dataType){case"param":case"text":c+="6";break;case"upload":c+="c";break;default:c+="0";break}switch(o.type){case"text":c+="6";break;case"qr":c+="c";break;case"bar":c+="c";break;case"img":t.setAttribute("data-src",o.value),t.removeAttribute("data-value"),c+="c";break;default:c+="0";break}t.setText(o.value),i("background-color",c),["verticalLine","horizontalLine"].includes(o.shape)&&(t.setText(o.shape),i("color",c),i("overflow","hidden")),t.setAttribute("data-style",Object.keys(l).map(function(e){return"".concat(e,": ").concat(l[e],";")}).join(" "))}function i(e){var t=Object(n["c"])(),a=t.constants,r={},o={};switch(r.shape=e.data("shape"),r.width=e.data("width"),r.height=e.data("height"),r.value=e.data("value"),r.type=e.data("type"),r.dataType=e.data("dataType"),r.code=e.data("code"),o.width=+r.width,o.height=+r.height,r.shape){case"horizontalLine":o.shape=a.shape.horizontalLine;break;case"verticalLine":o.shape=a.shape.verticalLine;break;case"rectangle":o.shape=a.shape.rectangle,o.code=r.code;break;case"circle":o.shape=a.shape.circle,o.code=r.code;break;default:return}switch(r.type){case"text":o.type=a.type.text;break;case"qr":o.type=a.type.qr;break;case"bar":o.type=a.type.bar;break;case"img":o.type=a.type.img,r.value=e.data("src");break;default:break}switch(r.dataType){case"param":o.sourceType=a.sourceType.param,o.param=r.value;break;case"upload":o.sourceType=a.sourceType.upload,o.src=r.value;break;case"text":o.sourceType=a.sourceType.text,o.text=r.value;break;default:break}return o}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(198)},function(e,t,a){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}a.d(t,"a",function(){return n})},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",function(){return n})},function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}a.d(t,"a",function(){return r})},function(e,t,a){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r=a(127);function o(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?Object(r["a"])(e):t}a.d(t,"a",function(){return o})},function(e,t,a){"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}a.d(t,"a",function(){return r})},,function(e,t,a){e.exports=a(0)(1169)},,function(e,t,a){e.exports=a(98)(2563)},,function(e,t,a){"use strict";function n(e,t,a,n,r){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,n){return n(e,t,a)||a},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}a.d(t,"a",function(){return n})},function(e,t,a){e.exports=a(0)(111)},function(e,t,a){e.exports=a(0)(82)},function(e,t,a){e.exports=a(0)(1168)},function(e,t,a){e.exports=a(0)(37)},function(e,t,a){e.exports=a(0)(116)},,,,function(e,t,a){e.exports=a(0)(34)},,function(e,t,a){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.d(t,"a",function(){return n})},function(e,t,a){e.exports=a(0)(1167)},function(e,t,a){e.exports=a(0)(604)},function(e,t,a){e.exports=a(0)(1155)},function(e,t,a){e.exports=a(0)(829)},,,function(e,t,a){e.exports=a(0)(182)},function(e,t,a){e.exports=a(0)(274)},,,,,,function(e,t,a){e.exports=a(0)(130)},function(e,t,a){e.exports=a(98)(2648)},,function(e,t,a){e.exports=a(0)(1852)},,,,function(e,t,a){e.exports=a(0)(661)},,function(e,t,a){e.exports=a(0)(2092)},function(e,t,a){e.exports=a(0)(849)},function(e,t,a){e.exports=a(0)(328)},function(e,t,a){e.exports=a(0)(270)},function(e,t,a){e.exports=a(0)(170)},function(e,t,a){e.exports=a(0)(324)},function(e,t,a){e.exports=a(0)(386)},function(e,t,a){e.exports=a(0)(387)},,,function(e,t,a){e.exports=a(0)(2130)},,,function(e,t,a){e.exports=a(0)(325)},,function(e,t,a){e.exports=a(98)(2662)},function(e,t,a){e.exports=a(0)(241)},function(e,t,a){e.exports=a(0)(151)},function(e,t,a){e.exports=a(98)(1367)},function(e,t,a){e.exports=a(0)(127)},function(e,t,a){e.exports=a(0)(484)},function(e,t,a){e.exports=a(0)(2129)},function(e,t,a){e.exports=a(0)(235)},function(e,t,a){e.exports=a(0)(209)},function(e,t,a){e.exports=a(0)(868)},function(e,t,a){e.exports=a(0)(385)},function(e,t,a){e.exports=a(0)(156)},function(e,t,a){e.exports=a(0)(255)},function(e,t,a){e.exports=a(0)(1960)},function(e,t,a){e.exports=a(0)(298)},function(e,t,a){e.exports=a(0)(1132)},function(e,t,a){e.exports=a(0)(580)},function(e,t,a){e.exports=a(0)(582)},function(e,t,a){e.exports=a(0)(128)},function(e,t,a){e.exports=a(0)(108)},function(e,t,a){e.exports=a(0)(472)},function(e,t,a){e.exports=a(0)(873)},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(98)(2670)},,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(1858)},,,,function(e,t,a){e.exports=a(0)(61)},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"d",function(){return c}),a.d(t,"b",function(){return u}),a.d(t,"e",function(){return d}),a.d(t,"c",function(){return s}),a.d(t,"a",function(){return m}),a.d(t,"f",function(){return b});var n=a(21),r=a(111),o=a(162),l=a(113),i=Object(l["q"])(),p=Object(l["g"])(),c=function(){return{rowKey:"labelTemplateId",autoQuery:!0,selection:!1,queryFields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always"},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string"},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),type:"string"}],fields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",required:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string",required:!0},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",defaultValue:"1",required:!0,transformResponse:function(e){return 0===e?"0":"1"}},{name:"templateWidth",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateWidth").d("\u6a21\u677f\u5bbd\u5ea6"),type:"number",required:!0},{name:"templateHigh",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateHigh").d("\u6a21\u677f\u9ad8\u5ea6"),type:"number",required:!0}],transport:{read:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"GET",query:t})},create:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"POST",data:t[0]})},destroy:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"DELETE",data:t[0]})}}}},u=function(e,t){return{rowKey:"labelTemplateId",autoQuery:!0,paging:!1,fields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",required:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string",required:!0},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",required:!0,defaultValue:"1",transformResponse:function(e){return 0===e?"0":"1"}},{name:"templateWidth",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateWidth").d("\u6a21\u677f\u5bbd\u5ea6"),type:"number",required:!0},{name:"templateHigh",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateHigh").d("\u6a21\u677f\u9ad8\u5ea6"),type:"number",required:!0},{name:"templateContent",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateContent").d("\u6a21\u677f\u5185\u5bb9"),type:"string"}],transport:{read:function(t){var a=t.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-templates/").concat(e):"".concat(o["l"],"/v1/label-templates/").concat(e),method:"GET",query:{}})},update:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"PUT",data:t[0]})}},children:{labelParameterList:t}}},d=function(){return{rowKey:"labelParameterId",autoQuery:!1,paging:!1,selection:!1,fields:[{name:"parameterCode",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterCode").d("\u53c2\u6570\u4ee3\u7801"),type:"string",required:!0},{name:"parameterName",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterName").d("\u53c2\u6570\u540d\u79f0"),type:"string",required:!0},{name:"paramTypeCode",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterType").d("\u53c2\u6570\u7c7b\u578b"),type:"single",required:!0,lookupCode:"HRPT.LABEL_PARAM_TYPE"},{name:"textLength",label:r["a"].get("hrpt.labelTemplate.model.parameter.textLength").d("\u6587\u5b57\u957f\u5ea6"),type:"number"},{name:"maxRows",label:r["a"].get("hrpt.labelTemplate.model.parameter.maxRows").d("\u6700\u5927\u884c\u6570"),type:"number"},{name:"barCodeType",label:r["a"].get("hrpt.labelTemplate.model.parameter.barCodeType").d("\u6761\u7801\u7c7b\u578b"),type:"single",lookupCode:"HRPT.LABEL_BARCODE_TYPE"},{name:"characterEncoding",label:r["a"].get("hrpt.labelTemplate.model.parameter.characterEncoding").d("\u5b57\u7b26\u7f16\u7801"),type:"string",dynamicProps:{required:function(e){var t=e.record;return"BARCODE"===t.get("paramTypeCode")}},lookupCode:"HRPT.LABEL.CHARACTER_ENCODE"}],transport:{destroy:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-parameters"):"".concat(o["l"],"/v1/label-parameters"),method:"DELETE",data:t[0]})}}}},s=function(){return{constants:{shape:{circle:"1",rectangle:"2",horizontalLine:"4",verticalLine:"8"},type:{text:"1",img:"2",bar:"4",qr:"8"},sourceType:{text:"1",param:"2",upload:"4"}},options:{shape:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.shape.circle").d("\u5706")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.shape.rectangle").d("\u65b9\u5f62")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.hL").d("\u6a2a\u7ebf")},{value:"8",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.verticalLine").d("\u7ad6\u7ebf")}],type:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.text").d("\u6587\u672c")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.img").d("\u56fe\u7247")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.bar").d("\u6761\u7801")},{value:"8",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.qr").d("\u4e8c\u7ef4\u7801")}],sourceType:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.text").d("\u624b\u52a8\u8f93\u5165")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.param").d("\u8868\u8fbe\u5f0f")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.upload").d("\u4e0a\u4f20\u56fe\u7247")}]},ds:{fields:[{name:"shape",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.shape").d("\u5f62\u72b6"),required:!0},{name:"code",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.code").d("\u53c2\u6570"),required:!0},{name:"type",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.type").d("\u7c7b\u578b"),required:!0},{name:"sourceType",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.sourceType").d("\u8f93\u5165\u6e90"),required:!0,defaultValue:"1"},{name:"width",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.width").d("\u5bbd"),type:"number",required:!0},{name:"height",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.height").d("\u9ad8"),type:"number",required:!0},{name:"text",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.text").d("\u5185\u5bb9"),type:"string",required:!0},{name:"param",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.param").d("\u8868\u8fbe\u5f0f"),type:"string",required:!0},{name:"src",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.src").d("\u56fe\u7247URL"),type:"string",required:!0}]}}},m=function(e){return{autoQuery:!0,selection:!1,queryFields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",disabled:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",disabled:!0},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",disabled:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),type:"string"},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"}],fields:[{name:"tenantLov",type:"object",lovCode:"HPFM.TENANT",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"roleLov",type:"object",lovCode:"HIAM.TENANT_ROLE",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.role").d("\u89d2\u8272"),cascadeMap:{tenantId:"tenantId"},ignore:"always",required:!0},{name:"roleId",type:"number",bind:"roleLov.id"},{name:"roleName",type:"string",bind:"roleLov.name"},{name:"startDate",type:"date",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.startDate").d("\u751f\u6548\u65e5\u671f"),dynamicProps:{max:function(e){var t=e.record;return t.get("endDate")}}},{name:"endDate",type:"date",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.endDate").d("\u5931\u6548\u65e5\u671f"),dynamicProps:{min:function(e){var t=e.record;return t.get("startDate")}}},{name:"remark",type:"string",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.remark").d("\u63cf\u8ff0")}],transport:{read:function(t){var a=t.params,r=t.config;return Object(n["a"])({},r,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"GET",params:Object(n["a"])({},a,{labelTemplateId:e.labelTemplateId})})},create:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"POST",data:t[0]})},update:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"PUT",data:t[0]})},destroy:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"DELETE",data:t[0]})}}}},b=function(e){return{autoQuery:!1,autoCreate:!0,paging:!1,fields:[{name:"paperSize",label:r["a"].get("hrpt.labelTemplate.model.print.paperSize").d("\u7eb8\u5f20\u5c3a\u5bf8"),lookupCode:"HRPT.LABEL.PAPER",type:"string",required:!0},{name:"paperWidth",label:r["a"].get("hrpt.labelTemplate.model.print.paperWidth").d("\u5bbd\u5ea6(mm)"),type:"number",required:!0,dynamicProps:{readOnly:function(e){var t=e.record;return"customize"!==t.get("paperSize")}}},{name:"paperHigh",label:r["a"].get("hrpt.labelTemplate.model.print.paperHigh").d("\u9ad8\u5ea6(mm)"),type:"number",dynamicProps:{readOnly:function(e){var t=e.record;return"customize"!==t.get("paperSize")||t.get("_paperNoLimit")},required:function(e){var t=e.record;return!t.get("_paperNoLimit")}}},{name:"_paperNoLimit",label:r["a"].get("hrpt.labelTemplate.model.print.paperNoLimit").d("\u65e0\u9650\u5236"),type:"boolean",trueValue:!0,falseValue:!1,defaultValue:!1,dynamicProps:{readOnly:function(e){var t=e.record;return"customize"!==t.get("paperSize")}}},{name:"printDirection",label:r["a"].get("hrpt.labelTemplate.model.print.printDirection").d("\u65b9\u5411"),type:"boolean",trueValue:0,falseValue:1,defaultValue:0},{name:"marginTop",label:r["a"].get("hrpt.labelTemplate.model.print.marginTop").d("\u4e0a(mm)"),type:"number",required:!0,defaultValue:0},{name:"marginRight",label:r["a"].get("hrpt.labelTemplate.model.print.marginRight").d("\u53f3(mm)"),type:"number",required:!0,defaultValue:0},{name:"marginBottom",label:r["a"].get("hrpt.labelTemplate.model.print.marginBottom").d("\u4e0b(mm)"),type:"number",defaultValue:0,dynamicProps:{readOnly:function(e){var t=e.record;return t.get("_paperNoLimit")},required:function(e){var t=e.record;return!t.get("_paperNoLimit")}}},{name:"marginLeft",label:r["a"].get("hrpt.labelTemplate.model.print.marginLeft").d("\u5de6(mm)"),type:"number",required:!0,defaultValue:0},{name:"wideQty",label:r["a"].get("hrpt.labelTemplate.model.print.wideQty").d("\u5bbd(\u4e2a)"),type:"number",required:!0,defaultValue:1},{name:"highQty",label:r["a"].get("hrpt.labelTemplate.model.print.highQty").d("\u9ad8(\u4e2a)"),type:"number",defaultValue:1,dynamicProps:{readOnly:function(e){var t=e.record;return t.get("_paperNoLimit")}}},{name:"highSpace",label:r["a"].get("hrpt.labelTemplate.model.print.highSpace").d("\u9ad8\u95f4\u8ddd(mm)"),type:"number",defaultValue:0,dynamicProps:{required:function(e){var t=e.record;return t.get("_paperNoLimit")}}}],transport:{read:function(t){var a=t.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-prints/").concat(e.templateCode):"".concat(o["l"],"/v1/label-prints/").concat(e.templateCode),method:"GET",params:{tenantId:p}})},create:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-prints"):"".concat(o["l"],"/v1/label-prints"),method:"POST",data:t[0]})},update:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:i?"".concat(o["l"],"/v1/").concat(p,"/label-prints"):"".concat(o["l"],"/v1/label-prints"),method:"POST",data:t[0]})}}}}},,,function(e,t,a){"use strict";a(132),a(266),a(242)},,,,function(e,t,a){e.exports=a(0)(2305)},,function(e,t,a){e.exports=a(0)(1258)},,,function(e,t,a){e.exports=a(0)(2224)},,,,,,,,,,,,function(e,t,a){e.exports=a(0)(2270)},,,,,,,,function(e,t,a){e.exports={"c7n-pro-input":"c7n-pro-input","c7n-pro-input-focused":"c7n-pro-input-focused","c7n-pro-input-disabled":"c7n-pro-input-disabled","c7n-pro-input-prefix":"c7n-pro-input-prefix","c7n-pro-input-suffix":"c7n-pro-input-suffix","c7n-pro-input-prefix-button":"c7n-pro-input-prefix-button","c7n-pro-input-suffix-button":"c7n-pro-input-suffix-button","c7n-pro-input-inner-button":"c7n-pro-input-inner-button","c7n-pro-input-not-editable":"c7n-pro-input-not-editable","c7n-pro-input-placeholder":"c7n-pro-input-placeholder","c7n-pro-input-rendered-value":"c7n-pro-input-rendered-value","c7n-pro-input-placeholder-inner":"c7n-pro-input-placeholder-inner","c7n-pro-input-rendered-value-inner":"c7n-pro-input-rendered-value-inner","c7n-pro-input-lg":"c7n-pro-input-lg","c7n-pro-input-sm":"c7n-pro-input-sm","c7n-pro-input-wrapper":"c7n-pro-input-wrapper","c7n-pro-field-label":"c7n-pro-field-label","c7n-pro-input-inner-button-clear-button":"c7n-pro-input-inner-button-clear-button","c7n-pro-input-clear-button":"c7n-pro-input-clear-button","c7n-pro-input-empty":"c7n-pro-input-empty","c7n-pro-input-multiple-value":"c7n-pro-input-multiple-value","c7n-pro-input-multiple-input":"c7n-pro-input-multiple-input","c7n-pro-input-multiple":"c7n-pro-input-multiple","c7n-pro-input-multiple-block":"c7n-pro-input-multiple-block","c7n-pro-input-multiple-block-invalid":"c7n-pro-input-multiple-block-invalid","c7n-pro-input-multiple-block-disabled":"c7n-pro-input-multiple-block-disabled",icon:"icon","c7n-pro-input-range-text":"c7n-pro-input-range-text","c7n-pro-input-range-start":"c7n-pro-input-range-start","c7n-pro-input-range-end":"c7n-pro-input-range-end","c7n-pro-input-range-split":"c7n-pro-input-range-split","c7n-pro-input-range-input":"c7n-pro-input-range-input","c7n-pro-input-group":"c7n-pro-input-group","c7n-pro-input-group-wrapper":"c7n-pro-input-group-wrapper","c7n-pro-input-group-before":"c7n-pro-input-group-before","c7n-pro-input-group-after":"c7n-pro-input-group-after","c7n-pro-input-group-help":"c7n-pro-input-group-help","c7n-pro-input-group-input":"c7n-pro-input-group-input","c7n-pro-input-required":"c7n-pro-input-required","c7n-pro-input-invalid":"c7n-pro-input-invalid","c7n-pro-input-underline":"c7n-pro-input-underline","c7n-pro-input-ripple":"c7n-pro-input-ripple","c7n-pro-input-float-label":"c7n-pro-input-float-label","c7n-pro-field-label-wrapper":"c7n-pro-field-label-wrapper","c7n-pro-input-float-label-group":"c7n-pro-input-float-label-group","c7n-pro-input-uppercase":"c7n-pro-input-uppercase","c7n-pro-input-lowercase":"c7n-pro-input-lowercase","c7n-pro-input-capitalize":"c7n-pro-input-capitalize"}},,function(e,t,a){"use strict";a(105),a(306),a(308),a(128)},function(e,t,a){e.exports=a(0)(1208)},,,,function(e,t,a){e.exports=a(0)(2271)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={"ant-upload":"ant-upload","ant-upload-btn":"ant-upload-btn","ant-upload-select":"ant-upload-select","ant-upload-select-picture-card":"ant-upload-select-picture-card","ant-upload-drag":"ant-upload-drag","ant-upload-drag-hover":"ant-upload-drag-hover","ant-upload-disabled":"ant-upload-disabled","ant-upload-drag-container":"ant-upload-drag-container","ant-upload-drag-icon":"ant-upload-drag-icon",anticon:"anticon","ant-upload-text":"ant-upload-text","ant-upload-hint":"ant-upload-hint","anticon-plus":"anticon-plus","ant-upload-list":"ant-upload-list","ant-upload-list-item":"ant-upload-list-item","ant-upload-list-item-name":"ant-upload-list-item-name","ant-upload-list-item-info":"ant-upload-list-item-info","anticon-loading":"anticon-loading","anticon-paper-clip":"anticon-paper-clip","anticon-cross":"anticon-cross","ant-upload-list-item-error":"ant-upload-list-item-error","ant-upload-list-item-progress":"ant-upload-list-item-progress","ant-upload-list-picture":"ant-upload-list-picture","ant-upload-list-picture-card":"ant-upload-list-picture-card","ant-upload-list-item-file-name":"ant-upload-list-item-file-name","ant-upload-list-item-uploading":"ant-upload-list-item-uploading","ant-upload-list-item-thumbnail":"ant-upload-list-item-thumbnail","ant-upload-list-item-icon":"ant-upload-list-item-icon","ant-upload-list-item-action-remove":"ant-upload-list-item-action-remove","ant-upload-list-item-picture-card":"ant-upload-list-item-picture-card","ant-upload-list-item-actions":"ant-upload-list-item-actions","anticon-eye-o":"anticon-eye-o","anticon-download":"anticon-download","anticon-upload":"anticon-upload","anticon-picture":"anticon-picture","ant-upload-list-item-uploading-text":"ant-upload-list-item-uploading-text","ant-upload-success-icon":"ant-upload-success-icon","ant-upload-animate-enter":"ant-upload-animate-enter","ant-upload-animate-leave":"ant-upload-animate-leave","ant-upload-animate-inline-enter":"ant-upload-animate-inline-enter","ant-upload-animate-inline-leave":"ant-upload-animate-inline-leave",uploadAnimateIn:"uploadAnimateIn",uploadAnimateOut:"uploadAnimateOut",uploadAnimateInlineIn:"uploadAnimateInlineIn",uploadAnimateInlineOut:"uploadAnimateInlineOut"}},,function(e,t,a){e.exports=a(0)(2098)},function(e,t,a){"use strict";a.d(t,"a",function(){return K});a(268);var n,r,o,l,i,p,c,u=a(269),d=(a(112),a(117)),s=(a(119),a(120)),m=a(164),b=a(21),f=a(2),h=a.n(f),g=a(22),y=a(262),v=a(107),T=a(108),k=a(109),x=a(106),L=a(127),O=a(110),w=a(116),E=(a(238),a(130)),j=a(310),N=a.n(j),A=a(311),C=a.n(A),P=a(129),D=a.n(P),I=a(24),z=a.n(I),q=a(222),S=a.n(q),R=a(1),_=a.n(R),F=a(114),U=a(315),H=a.n(U),B=a(111),M=a(227),V=a(113),G=a(162),Q=a(158);E["default"].config({placement:"bottomRight"});var K=(n=Object(F["Bind"])(),r=Object(F["Bind"])(),o=Object(F["Bind"])(),l=Object(F["Bind"])(),i=Object(F["Bind"])(),p=Object(F["Bind"])(),c=function(e){function t(e){var a;Object(v["a"])(this,t),a=Object(k["a"])(this,Object(x["a"])(t).call(this,e));var n=a.props.onRef;return n&&n(Object(L["a"])(a)),a.state={fileList:null},a}return Object(O["a"])(t,e),Object(T["a"])(t,[{key:"setFileList",value:function(e){e&&this.setState({fileList:e})}},{key:"uploadData",value:function(e){var t=this.props,a=t.attachmentUUID,n=t.bucketName,r=t.uploadData,o=t.bucketDirectory,l=t.docType,i=t.storageCode,p=r?r(e):{};if(!(p instanceof FormData)){var c=p;p=new FormData,S()(p)&&Object.keys(c).forEach(function(e){p.append(e,c[e])})}return D()(a)||p.append("attachmentUUID",a),D()(n)||p.append("bucketName",n),D()(l)||p.append("docType",l),D()(i)||p.append("storageCode",i),D()(o)||p.append("directory",o),p}},{key:"onChange",value:function(e){var t=e.file,a=e.fileList,n=this.props,r=n.single,o=void 0!==r&&r,l=n.tenantId,i=n.bucketName,p=n.bucketDirectory,c=Object(y["a"])(a);if("done"===t.status){var u=t.response;if(u&&!0===u.failed)this.onUploadError(t,a);else{if(o){if(a.length>1){var d=this.props.onRemove;Promise.all(a.slice(0,a.length-1).map(function(){var e=Object(g["a"])(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.url){e.next=20;break}if(!d){e.next=11;break}return e.prev=2,e.next=5,d(t);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](2);case 9:e.next=20;break;case 11:return a=t.url&&t.url.split("=")||[],n=a[a.length-1],e.prev=13,e.next=16,Object(Q["i"])({tenantId:l,bucketName:i,urls:[n]});case 16:e.next=20;break;case 18:e.prev=18,e.t1=e["catch"](13);case 20:case"end":return e.stop()}},e,null,[[2,7],[13,18]])}));return function(t){return e.apply(this,arguments)}}())).catch(function(){})}c=[{uid:t.uid,name:t.name,url:Object(V["e"])(t.response,i,l,p),thumbUrl:Object(V["e"])(t.response,i,l,p)}]}else c=a.map(function(e){return e.uid===t.uid&&(e.url=Object(V["e"])(e.response,i,l,p)),e});this.onUploadSuccess(t,c)}}else"error"===t.status&&(this.onUploadError(t,a),c=a.filter(function(e){return"error"!==e.status&&e.uid}));this.setState({fileList:N()(c,function(e,t){return e.uid===t.uid})})}},{key:"beforeUpload",value:function(e){var t=this.props,a=t.fileType,n=t.fileSize,r=void 0===n?31457280:n;if(a&&-1===a.indexOf(e.type)){e.status="error";var o={message:B["a"].get("hzero.common.upload.error.type",{fileType:a}).d("\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b\u5fc5\u987b\u662f\uff1a".concat(a))};return e.response=o,!1}if(e.size>r){e.status="error";var l={message:B["a"].get("hzero.common.upload.error.size",{fileSize:r/1048576}).d("\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7: ".concat(r/1048576," MB"))};return e.response=l,!1}return!0}},{key:"onRemove",value:function(e){var t=this,a=this.props,n=a.onRemove,r=a.bucketName,o=a.onRemoveSuccess,l=a.single,i=void 0!==l&&l,p=a.tenantId,c=this.state.fileList;if(e.url){if(n)return n(e);var u=e.url&&e.url.split("=")||[],d=u[u.length-1];return Object(Q["i"])({tenantId:p,bucketName:r,urls:[d]}).then(function(a){return!!Object(V["k"])(a)&&(o&&o(),i?t.setState({fileList:[]}):(C()(c,function(t){return t.uid===e.uid}),t.setState({fileList:c})),!0)})}this.setState({fileList:c.filter(function(t){return t.uid!==e.uid})})}},{key:"onUploadSuccess",value:function(e,t){var a=this.props.onUploadSuccess;a&&a(e,t)}},{key:"onUploadError",value:function(e,t){var a=this.props.onUploadError,n=!0;a&&(n=!1!==a(e,t)),n&&E["default"].error({message:B["a"].get("hzero.common.upload.status.error").d("\u4e0a\u4f20\u5931\u8d25"),description:e.response&&e.response.message})}},{key:"changeFileList",value:function(e){var t=this.props,a=t.bucketName,n=t.bucketDirectory,r=t.tenantId;if(e)return e.map(function(e){return Object(b["a"])({},e,{url:Object(V["e"])(e.url,a,r,n)})})}},{key:"handleAction",value:function(e){var t=e.file,a=e.onProgress,n=e.onSuccess,r=e.onError,o=new H.a,l=o.signal,i=this.props.action,p=i||(Object(V["q"])()?"".concat(G["f"],"/v1/").concat(Object(V["g"])(),"/files/multipart"):"".concat(G["f"],"/v1/files/multipart")),c="".concat(p),u=this.uploadData(t);return u.append("file",t,t.name),Object(M["a"])(c,{processData:!1,method:"POST",type:"FORM",body:u,responseType:"text",signal:l,onProgress:a?function(e){return a(e,t)}:null},{beforeCatch:function(e){if("AbortError"!==e.name)throw new Error(e)}}).then(function(e){z()(e)?n(e):Object(V["k"])(e)||r(e)}),{abort:function(){o.abort()}}}},{key:"render",value:function(){var e=this.props,t=e.fileList,a=e.fileType,n=(e.fileSize,e.single,e.text),r=void 0===n?B["a"].get("hzero.common.upload.txt").d("\u4e0a\u4f20"):n,o=e.listType,l=void 0===o?"picture":o,i=(e.bucketName,e.onUploadSuccess,e.onUploadError,e.viewOnly),p=void 0!==i&&i,c=e.showRemoveIcon,b=void 0===c||c,f=(e.docType,e.storageCode,e.children),h=Object(m["a"])(e,["fileList","fileType","fileSize","single","text","listType","bucketName","onUploadSuccess","onUploadError","viewOnly","showRemoveIcon","docType","storageCode","children"]),g=Object(V["d"])(),y=this.changeFileList(t),v={};g&&(v.Authorization="bearer ".concat(g));var T,k=a&&-1===a.indexOf(",")?a.split(";").join(","):a;return T="picture-card"===l?_.a.createElement("div",null,_.a.createElement(s["default"],{style:{fontSize:"32px",color:"#999"},type:"plus"})):_.a.createElement(d["default"],null,_.a.createElement(s["default"],{type:"upload"})," ",r),_.a.createElement(u["default"],Object.assign({name:"file",accept:k,fileList:this.state.fileList||y,data:this.uploadData,customRequest:this.handleAction,headers:v,onChange:this.onChange,listType:l,beforeUpload:this.beforeUpload,onRemove:this.onRemove,showUploadList:{showRemoveIcon:!p&&b}},h),f||!p&&T)}}]),t}(_.a.Component),Object(w["a"])(c.prototype,"uploadData",[n],Object.getOwnPropertyDescriptor(c.prototype,"uploadData"),c.prototype),Object(w["a"])(c.prototype,"onChange",[r],Object.getOwnPropertyDescriptor(c.prototype,"onChange"),c.prototype),Object(w["a"])(c.prototype,"beforeUpload",[o],Object.getOwnPropertyDescriptor(c.prototype,"beforeUpload"),c.prototype),Object(w["a"])(c.prototype,"onRemove",[l],Object.getOwnPropertyDescriptor(c.prototype,"onRemove"),c.prototype),Object(w["a"])(c.prototype,"changeFileList",[i],Object.getOwnPropertyDescriptor(c.prototype,"changeFileList"),c.prototype),Object(w["a"])(c.prototype,"handleAction",[p],Object.getOwnPropertyDescriptor(c.prototype,"handleAction"),c.prototype),c)},function(e,t,a){var n=a(150);function r(e,t){return t="function"==typeof t?t:void 0,e&&e.length?n(e,void 0,t):[]}e.exports=r},function(e,t,a){var n=a(135),r=a(312);function o(e,t){var a=[];if(!e||!e.length)return a;var o=-1,l=[],i=e.length;t=n(t,3);while(++o<i){var p=e[o];t(p,o,e)&&(a.push(p),l.push(o))}return r(e,l),a}e.exports=o},function(e,t,a){var n=a(313),r=a(314),o=Array.prototype,l=o.splice;function i(e,t){var a=e?t.length:0,o=a-1;while(a--){var i=t[a];if(a==o||i!==p){var p=i;r(i)?l.call(e,i,1):n(e,i)}}return e}e.exports=i},function(e,t,a){e.exports=a(0)(2121)},function(e,t,a){e.exports=a(0)(242)},function(e,t,a){"use strict";var n="undefined"!==typeof self?self:"undefined"!==typeof window?window:void 0,r=n.AbortController,o=n.AbortSignal;e.exports=r,e.exports.AbortSignal=o,e.exports.default=r},,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(504)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={"label-editor":"hrpt-routes-label-template-components-label-ck-editor-plugins-label-template-styles-label-editor"}}]]);