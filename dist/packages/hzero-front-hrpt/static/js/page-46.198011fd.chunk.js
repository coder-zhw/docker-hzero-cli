(window["webpackJsonppackages_hzero_front_hrpt_name_"]=window["webpackJsonppackages_hzero_front_hrpt_name_"]||[]).push([[19,20,53,54,71,75],[,,,function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});a(390);var n=a(335),r=a.n(n),o=a(1),i=a.n(o),l=a(111),c=a(234),p=a(31),s=a(32),u=r.a.key();function d(e){e.plugins.get("label-template")||e.plugins.add("label-template",{icons:"Link",init:function(e){e.ui.addButton&&(e.ui.addButton("label-template",{icon:"Link",label:l["a"].get("hrpt.labelTemplate.view.title.cke.p.label").d("\u6807\u7b7e"),command:"hzeroLabelTemplateInsertLabel",toolbar:"label-template, 20"}),e.addCommand("hzeroLabelTemplateInsertLabel",{exec:function(){var t=i.a.createRef();r.a.open({key:u,children:i.a.createElement(p["default"],{interactedRef:t}),title:l["a"].get("hrpt.labelTemplate.view.title.cke.p.labelInsert").d("\u6807\u7b7e\u63d2\u5165"),onOk:function(){return t.current?t.current.getValidateData().then(function(t){if(t){var a=Object(c["c"])(),n=a.constants,r=e.document.createElement(([n.type.img,n.type.bar,n.type.qr].includes(t.type),"span"));return Object(s["transformDataToElement"])(t,r),e.insertElement(r),!0}return!1},function(){return!1}):Promise.resolve(!1)}})}})),e.addCommand("hzeroLabelTemplateEditLabel",{exec:function(e){var t=e.getSelection(),a=t.getSelectedElement(),n={};if(a&&a.data("shape")){Object.assign(n,Object(s["transformElementToData"])(a)||{});var o=i.a.createRef();r.a.open({key:u,children:i.a.createElement(p["default"],{interactedRef:o,initialData:n,isCreate:!1}),title:l["a"].get("hrpt.labelTemplate.view.title.cke.p.labelEdit").d("\u6807\u7b7e\u7f16\u8f91"),onOk:function(){return o.current?o.current.getValidateData().then(function(t){return!!t&&(Object(s["transformDataToElement"])(t,a),e.fire("change"),!0)},function(){return!1}):Promise.resolve(!1)}})}}}),e.addCommand("hzeroLabelTemplateDeleteLabel",{exec:function(e){var t=e.elementPath(),a=t.contains(["span","img"],1);a&&a.data("shape")&&r.a.confirm({children:l["a"].get("hrpt.labelTemplate.view.confirm.delete").d("\u662f\u5426\u786e\u8ba4\u5220\u9664"),onOk:function(){var t=a.getParent(),n=e.editable();1!==t.getChildCount()||t.is("td","th")||t.equals(n)||(a=t);var r=e.createRange();r.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START),a.remove(),r.select()}})}}),e.contextMenu&&(e.addMenuGroup("hzeroLabelTemplate"),e.addMenuItems({hzeroLabelTemplateEditLabel:{label:l["a"].get("hzero.common.button.edit").d("\u7f16\u8f91"),command:"hzeroLabelTemplateEditLabel",group:"hzeroLabelTemplate",order:1},hzeroLabelTemplateDeleteLabel:{label:l["a"].get("hzero.common.button.delete").d("\u5220\u9664"),command:"hzeroLabelTemplateDeleteLabel",group:"hzeroLabelTemplate",order:2}}),e.contextMenu.addListener(function(e){var t=e.getAscendant({span:1,img:1},!0);if(t&&t.data("shape"))return{hzeroLabelTemplateDeleteLabel:CKEDITOR.TRISTATE_OFF,hzeroLabelTemplateEditLabel:CKEDITOR.TRISTATE_OFF}}))}})}},,,,function(e,t,a){"use strict";a.r(t);a(274);var n=a(379),r=a.n(n),o=a(21),i=a(219),l=a(107),c=a(108),p=a(109),s=a(127),u=a(106);function d(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Object(u["a"])(e),null===e)break;return e}function m(e,t,a){return m="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var n=d(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(a):r.value}},m(e,t,a||e)}var b,f,h,g,y,v,T,O,k,x,j,w,E=a(110),L=a(116),C=(a(220),a(1)),D=a.n(C),N=a(464),I=a(465),R=a(114),S=a(466),A=a(202),P=a.n(A),z=(a(122),a(123)),U=(a(268),a(269)),q=(a(112),a(117)),B=(a(119),a(120)),H=(a(145),a(193)),_=a(121),F=a.n(_),M=a(136),V=a.n(M),W=a(467),K=a.n(W),G=a(477),Z=a.n(G),Q=a(478),J=a.n(Q),Y=a(111),X=a(227),$=a(162),ee=a(221),te=a(113);function ae(e){if("string"!==typeof e||e.length<1)throw new TypeError("CKEditor URL must be a non-empty string.");return"CKEDITOR"in window?(window.CKEDITOR&&(window.CKEDITOR.disableAutoInline=!0),Promise.resolve(window.CKEDITOR)):(w||(w=new Promise(function(t,a){Z()(e,function(e){e?a(e):(window.CKEDITOR&&(window.CKEDITOR.disableAutoInline=!0),t(window.CKEDITOR),w=void 0)})})),w)}function ne(){var e=Object(te["g"])();return Object(te["q"])()?"/".concat(e):""}var re=(b=Object(R["Bind"])(),f=Object(R["Bind"])(),h=Object(R["Bind"])(),g=Object(R["Bind"])(),y=Object(R["Bind"])(),v=Object(R["Bind"])(),T=Object(R["Bind"])(),O=Object(R["Bind"])(),k=Object(R["Bind"])(),x=Object(R["Bind"])(),j=function(e){function t(e){var a;return Object(l["a"])(this,t),a=Object(p["a"])(this,Object(u["a"])(t).call(this,e)),a.element=null,a.editor=null,a.state={fileUploadModalVisible:!1,file:null},a}return Object(E["a"])(t,e),Object(c["a"])(t,[{key:"componentDidMount",value:function(){this.initCKEditor()}},{key:"componentWillUnmount",value:function(){this._destroyEditor()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=this.editor;a&&(e.data!==t.data&&a.getData()!==t.data&&a.setData(t.data),e.readOnly!==t.readOnly&&a.setReadOnly(t.readOnly),e.style!==t.style&&a.container.setStyles(t.style),this._attachEventHandlers(e),window.addEventListener("popstate",function(){a&&1===a.commands.maximize.state&&(a.destroy(),window.location.reload())}))}},{key:"getContent",value:function(){var e=this.editor.getData,t=void 0===e?function(){}:e;return t()}},{key:"initCKEditor",value:function(){var e=this,a=this.props,n=a.onEditorChange,r=void 0===n?function(){}:n,i=a.content,l=a.readOnly,c=a.config,p=void 0===c?{}:c,s=a.style,u=this.state.editorLoading;u||window.CKEDITOR||this.setState({editorLoading:!0}),ae(t.editorUrl).then(function(t){try{var a=K()(Object(te["f"])()||"zh_cn").toLocaleLowerCase();if(e.setState({editorLoading:!1}),e.element&&(e.editor=t.replace(e.element,Object(o["a"])({removeButtons:"About,Flash,Save,Source,Form,Checkbox,Button,ShowBlocks,NewPage,Print,Language,Templates,CreateDiv,Radio,TextField,Textarea,Select,HiddenField",removePlugins:"image,scayt,wsc,iframe",language:a,readOnly:l,height:600,uploadUrl:"".concat($["f"],"/v1").concat(ne(),"/files/multipart"),filebrowserUploadUrl:"".concat($["f"],"/v1").concat(ne(),"/files/multipart"),disableNativeSpellChecker:!1,font_names:"Arial/Arial, Helvetica, sans-serif; Comic Sans MS/Comic Sans MS;Courier New/Courier New;Georgia/Georgia;Lucida Sans Unicode/Lucida Sans Unicode;Times New Roman/Times New Roman, Times, serif;Verdana;\u5b8b\u4f53/\u5b8b\u4f53;\u9ed1\u4f53/\u9ed1\u4f53;\u4eff\u5b8b/\u4eff\u5b8b_GB2312;\u6977\u4f53/\u6977\u4f53_GB2312;\u96b6\u4e66/\u96b6\u4e66;\u5e7c\u5706/\u5e7c\u5706;\u5fae\u8f6f\u96c5\u9ed1/\u5fae\u8f6f\u96c5\u9ed1;"},p))),e.editor&&(e.editor.filter=e.editor.filter||{},e._attachEventHandlers(),i&&e.editor.setData(i),e._attachEventHandlers(),F()(e.editor.on))){e.editor.on("change",function(e){r(e.editor.getData())}),s&&e.editor.on("loaded",function(){e.editor.container.setStyles(s),e.editor.addCommand("insertFiles",{exec:function(){e.setState({fileUploadModalVisible:!0})}}),e.editor.ui.addButton("insertFilesBtn",{label:Y["a"].get("hzero.common.richTextEditor.insertFile").d("\u63d2\u5165\u6587\u4ef6"),command:"insertFiles",toolbar:"insert",icon:"Templates"})});var n=Object(te["d"])();e.editor.on("fileUploadRequest",function(t){var a=e.props,r=a.bucketName,o=void 0===r?$["c"]:r,i=a.bucketDirectory,l=void 0===i?"editor":i,c=t.data.fileLoader,p=c.xhr;p.open("POST",c.uploadUrl,!0),n&&p.setRequestHeader("Authorization","bearer ".concat(n)),p.setRequestHeader("Cache-Control","no-cache"),p.setRequestHeader("X-File-Name",e.fileName),p.setRequestHeader("X-File-Size",e.total);var s=new FormData;s.append("file",c.file,c.fileName),s.append("bucketName",o),s.append("directory",l),s.append("fileName",c.fileName),p.send(s),t.stop()},null,null,4),e.editor.on("fileUploadResponse",function(t){t.stop();var a=e.props,n=a.resolveImageUrl,r=void 0===n?function(){}:n,o=a.bucketName,i=void 0===o?$["c"]:o,l=t.data.fileLoader,c=l.xhr,p=c.responseText;if(J()(p)){var s=r(p,i);t.data.url=s&&J()(s)?s:p}else t.data.message=JSON.parse(p).message})}}catch(c){throw c}}).catch(window.console.error)}},{key:"_attachEventHandlers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.props;Object.keys(this.props).forEach(function(n){n.startsWith("on")&&t[n]!==a[n]&&e._attachEventHandler(n,t[n])})}},{key:"_attachEventHandler",value:function(e,t){try{var a="".concat(e[2].toLowerCase()).concat(e.substr(3));t&&this.editor.removeListener(a,t),F()(this.editor.on)&&this.editor.on(a,this.props[e])}catch(n){throw n}}},{key:"_destroyEditor",value:function(){try{this.editor&&this.editor.destroy(!0),this.editor=null,this.element=null}catch(e){throw e}}},{key:"beforeUpload",value:function(e){return this.setState({file:e}),!1}},{key:"onRemove",value:function(){this.setState({file:null})}},{key:"upload",value:function(){var e=this,t=this.props,a=t.bucketName,n=void 0===a?$["c"]:a,r=t.bucketDirectory,o=void 0===r?"editor":r,i=this.state.file,l=new FormData;l.append("file",i,i.name),l.append("bucketName",n),l.append("directory",o),l.append("fileName",i.name),this.setState({uploading:!0}),Object(X["a"])("".concat($["f"],"/v1").concat(ne(),"/files/multipart"),{processData:!1,method:"POST",type:"FORM",body:l,responseType:"text"}).then(function(t){J()(t)?(e.setState({uploading:!1,url:Object(te["e"])(t,n,void 0,o)}),ee["a"].success()):(ee["a"].error({message:JSON.parse(t).message}),e.setState({uploading:!1}))})}},{key:"closeFileUploadModal",value:function(){this.setState({fileUploadModalVisible:!1,uploading:!1,file:null,url:null})}},{key:"onFileUploadModalOk",value:function(){var e=this.state,t=e.url,a=e.file;try{V()(t)||this.editor.insertHtml('<a href="'.concat(t,'" >').concat(a.name,"</a>"))}catch(n){throw n}this.setState({fileUploadModalVisible:!1,file:null,url:null})}},{key:"render",value:function(){var e=this,t=this.props.style,a=void 0===t?{}:t,n=this.state,r=n.uploading,o=n.file,i=n.editorLoading,l=n.fileUploadModalVisible,c={beforeUpload:this.beforeUpload,fileList:o?[o]:[],onRemove:this.onRemove};return D.a.createElement(C["Fragment"],null,D.a.createElement(H["default"],{spinning:i},D.a.createElement("div",{contentEditable:"true",style:a,ref:function(t){e.element=t},id:"richTextEditor",className:"rich-text-editor"})),D.a.createElement(z["default"],{title:Y["a"].get("hzero.common.richTextEditor.insertImage").d("\u63d2\u5165\u6587\u4ef6"),visible:l,onOk:this.onFileUploadModalOk,onCancel:this.closeFileUploadModal},D.a.createElement(U["default"],c,D.a.createElement(q["default"],null,D.a.createElement(B["default"],{type:"upload"})," ",Y["a"].get("hzero.common.richTextEditor.selectFile").d("\u9009\u62e9\u56fe\u7247"))),D.a.createElement("br",null),D.a.createElement(q["default"],{className:"upload-demo-start",type:"primary",onClick:this.upload,disabled:V()(o),loading:r},r?Y["a"].get("hzero.common.richTextEditor.uploading").d("\u6b63\u5728\u4e0a\u4f20"):Y["a"].get("hzero.common.richTextEditor.startUpload").d("\u5f00\u59cb\u4e0a\u4f20"))))}}]),t}(D.a.Component),Object(L["a"])(j.prototype,"getContent",[b],Object.getOwnPropertyDescriptor(j.prototype,"getContent"),j.prototype),Object(L["a"])(j.prototype,"initCKEditor",[f],Object.getOwnPropertyDescriptor(j.prototype,"initCKEditor"),j.prototype),Object(L["a"])(j.prototype,"_attachEventHandlers",[h],Object.getOwnPropertyDescriptor(j.prototype,"_attachEventHandlers"),j.prototype),Object(L["a"])(j.prototype,"_attachEventHandler",[g],Object.getOwnPropertyDescriptor(j.prototype,"_attachEventHandler"),j.prototype),Object(L["a"])(j.prototype,"_destroyEditor",[y],Object.getOwnPropertyDescriptor(j.prototype,"_destroyEditor"),j.prototype),Object(L["a"])(j.prototype,"beforeUpload",[v],Object.getOwnPropertyDescriptor(j.prototype,"beforeUpload"),j.prototype),Object(L["a"])(j.prototype,"onRemove",[T],Object.getOwnPropertyDescriptor(j.prototype,"onRemove"),j.prototype),Object(L["a"])(j.prototype,"upload",[O],Object.getOwnPropertyDescriptor(j.prototype,"upload"),j.prototype),Object(L["a"])(j.prototype,"closeFileUploadModal",[k],Object.getOwnPropertyDescriptor(j.prototype,"closeFileUploadModal"),j.prototype),Object(L["a"])(j.prototype,"onFileUploadModalOk",[x],Object.getOwnPropertyDescriptor(j.prototype,"onFileUploadModalOk"),j.prototype),j);re.defaultProps={type:"classic",data:"",config:{},readOnly:!1},re.editorUrl="".concat("/","lib/ckeditor/ckeditor.js");var oe,ie,le,ce,pe,se,ue,de,me,be,fe,he,ge,ye=a(187),ve=a(3);function Te(e){var t=e.width,a=e.height;return'<div data-type="canvas" style="width: '.concat(t,"mm;height: ").concat(a,'mm; border: 1px dashed #1e3255;">')}function Oe(){return"</div>"}a.d(t,"default",function(){return ke});var ke=(oe=Object(R["Bind"])(),ie=Object(R["Debounce"])(ye["a"]),le=Object(R["Bind"])(),ce=Object(R["Bind"])(),pe=Object(R["Bind"])(),se=Object(R["Bind"])(),ue=Object(R["Bind"])(),de=Object(R["Bind"])(),Object(I["observer"])((ge=function(e){function t(){var e,a;Object(l["a"])(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=Object(p["a"])(this,(e=Object(u["a"])(t)).call.apply(e,[this].concat(r))),Object(i["a"])(a,"inited",fe,Object(s["a"])(a)),Object(i["a"])(a,"richTextEditorProps",he,Object(s["a"])(a)),a.taskRunning=!1,a.pendingTask=[],a.prevTemplateWidth=void 0,a.prevTemplateHigh=void 0,a.tasks={},a.richTextEditorRef=D.a.createRef(),a.triggerTaskTimer=void 0,a}return Object(E["a"])(t,e),Object(c["a"])(t,[{key:"getEditor",value:function(){return this.richTextEditorRef.current&&this.richTextEditorRef.current.editor||null}},{key:"componentDidMount",value:function(){var e=this;this.triggerTaskTimer=setInterval(this.triggerTaskRun,ye["a"]),this.disposer=Object(N["autorun"])(function(){e.autoUpdateEditor({templateWidth:e.templateWidth,templateHigh:e.templateHigh})}),this.runInitAll()}},{key:"componentWillUnmount",value:function(){void 0!==this.triggerTaskTimer&&(clearTimeout(this.triggerTaskTimer),this.triggerTaskTimer=void 0),this.tasks=null,this.disposer(),this.handleDataChange.cancel()}},{key:"runInitAll",value:function(){var e=this;this.runTask({name:"init",test:function(){var t=e.getEditor();return!!t},run:this.initAll,runUntilTestSuccess:!0,remainBefore:!1})}},{key:"travelTemplateContent",value:function(e,t){var a=new CKEDITOR.htmlParser,n=0,r=!1,o=0,i=!1;a.onCDATA=function(e){t(r&&!i?"cdataIn":"cdataOut",{cdata:e})},a.onComment=function(e){t(r&&!i?"commentIn":"commentOut",{comment:e})},a.onTagOpen=function(e,a,l){n+=1;var c=r,p=!1,s="";Object.keys(a||{}).forEach(function(e){"data-type"===e&&"canvas"===a[e]&&(r||(o=n,r=!0)),"data-shape"===e&&(p=!0,s=a[e])}),c&&n<=o?(i=!0,t("tagOpenOut",{tagName:e,attributes:a,selfClosing:l,isLabel:p,labelShape:s})):t(r?"tagOpenIn":"tagOpenOut",{tagName:e,attributes:a,selfClosing:l,isLabel:p,labelShape:s}),l&&(n-=1)},a.onTagClose=function(e){n-=1,t(r&&!i?"tagCloseIn":"tagCloseOut",{tagName:e})},a.onText=function(e){t(r&&!i?"textIn":"textOut",{text:e})},a.parse(e)}},{key:"checkAndReplaceTemplateContent",value:function(e){var t,a=[],n=[],r=!1,i=!1,l=!1;return this.travelTemplateContent(e,function(e,c){switch(e){case"tagOpenIn":r=!0;var p=c.selfClosing,s=c.tagName,u=c.attributes,d=c.isLabel,m=c.labelShape;l=d,t=m;var b=Object(o["a"])({},u);d&&(b.style="".concat(b["data-style"]," background-color: ").concat(b["data-backgroundcolor"],";"));var f=Object.keys(b).map(function(e){return"".concat(e,'="').concat(b[e],'"')}).join(" ");p?a.push("<".concat(s," ").concat(f," />")):a.push("<".concat(s," ").concat(f,">"));break;case"tagOpenOut":i=!0;var h=c.selfClosing,g=c.tagName,y=c.attributes,v=c.isLabel,T=c.labelShape;l=v,t=T;var O=Object(o["a"])({},y);v&&(O.style="".concat(O["data-style"]," background-color: ").concat(O["data-backgroundcolor"],";"));var k=Object.keys(O).map(function(e){return"".concat(e,'="').concat(O[e],'"')}).join(" ");h?n.push("<".concat(g," ").concat(k," />")):n.push("<".concat(g," ").concat(k,">"));break;case"tagCloseIn":var x=c.tagName;a.push("</".concat(x,">"));break;case"tagCloseOut":var j=c.tagName;n.push("</".concat(j,">"));break;case"textIn":r=!0;var w=c.text;l&&["circle","rectangle"].includes(t)?a.push(" ".concat(w.trim()," ")):a.push(w);break;case"textOut":i=!0;var E=c.text;n.push(E);break;default:break}}),a.splice.apply(a,[a.length-2,0].concat(n)),r||(a.unshift(Te(this.templateBuildConfig)),a.push(Oe())),{templateContent:a.join(""),hadReplace:i}}},{key:"handleDataChange",value:function(e){var a=this;this.runTask({name:"data-change",run:function(){if(e){var n=a.checkAndReplaceTemplateContent(e),r=n.hadReplace,o=n.templateContent;r?(ee["a"].info({message:Y["a"].get("hrpt.labelTemplate.view.message.rmOverflow").d("\u8d85\u51fa\u5185\u5bb9\u88ab\u79fb\u9664")}),m(Object(u["a"])(t.prototype),"setValue",a).call(a,o),a.getEditor().setData(o,{noSnapshot:!0})):m(Object(u["a"])(t.prototype),"setValue",a).call(a,e)}else{var i="".concat(Te(a.templateBuildConfig)).concat(Oe());m(Object(u["a"])(t.prototype),"setValue",a).call(a,"".concat(Te(a.templateBuildConfig)).concat(Oe())),a.getEditor().setData(i,{noSnapshot:!0})}},runUntilTestSuccess:!1,remainBefore:!1})}},{key:"initAll",value:function(){var e=this,t=this.getEditor();if(t){var a=window,n=a.CKEDITOR;Object(ve["default"])(n),this.runTask({name:"realInit",test:function(){var t=e.getEditor();return t&&t.document},run:this.realInit,runUntilTestSuccess:!0,remainBefore:!1})}}},{key:"realInit",value:function(){var e=this,a=this.getEditor();this.inited=!0;var n=m(Object(u["a"])(t.prototype),"getValue",this).call(this)||"";if(n){var r,i,l,c=[],p=[],s=[],d=!1,b=!1;this.travelTemplateContent(n,function(e,t){switch(e){case"tagOpenIn":d=!0;var n=t.tagName,l=t.attributes,u=t.isLabel,m=t.labelShape,f=t.selfClosing;b=u,i=m;var h=Object(o["a"])({},l);u&&(h.style="".concat(h["data-style"]," background-color: ").concat(h["data-backgroundcolor"],";"));var g=a.document.createElement(n,{attributes:h});r||(r=g),c.length>0&&c[c.length-1].append(g),f||c.push(g);break;case"tagOpenOut":!0;var y=t.tagName,v=t.attributes,T=t.isLabel,O=t.labelShape,k=t.selfClosing;b=T,i=O;var x=Object(o["a"])({},v);T&&(x.style="".concat(x["data-style"]," background-color: ").concat(x["data-backgroundcolor"],";"));var j=a.document.createElement(y,{attributes:x});p.length>0?p[p.length-1].append(j):s.push(j),k||p.push(j);break;case"tagCloseIn":c.length>0&&c.pop();break;case"tagCloseOut":p.length>0&&p.pop();break;case"textIn":d=!0,c.length>0&&c[c.length-1].appendText(b&&["circle","rectangle"].includes(i)?" ".concat(t.text.trim()," "):t.text);break;case"textOut":!0,p.length>0&&p[p.length-1].appendText(b&&["circle","rectangle"].includes(i)?" ".concat(t.text.trim()," "):t.text);break;default:break}}),r?(s.forEach(function(e){r.append(e)}),l=r.getOuterHtml()):l=s.map(function(e){return e.getOuterHtml()}).join("\n");var f=d?l:"".concat(Te(this.templateBuildConfig)).concat(l).concat(Oe());a.setData(f.replace("&nbsp;"," "))}else{var h="".concat(Te(this.templateBuildConfig),"init template").concat(Oe());m(Object(u["a"])(t.prototype),"setValue",this).call(this,h),a.setData(h)}a.on("change",function(t){e.handleDataChange(t.editor.getData())})}},{key:"autoUpdateEditor",value:function(e){var a=this,n=e.templateWidth,r=e.templateHigh;n===this.prevTemplateWidth&&r===this.prevTemplateHigh||this.runTask({test:function(){return a.inited&&(a.templateHigh!==a.prevTemplateHigh||a.templateWidth!==a.prevTemplateWidth)},name:"updateEditorStyle",run:function(){var e=(m(Object(u["a"])(t.prototype),"getValue",a).call(a)||"".concat(Te(a.templateBuildConfig),"init template").concat(Oe())).replace(/<div data-type="canvas" style="[\w ;:#]+">/,'<div data-type="canvas" style="width: '.concat(a.templateWidth,"mm;height: ").concat(a.templateHigh,'mm; border: 1px dashed #1e3255;">'));m(Object(u["a"])(t.prototype),"setValue",a).call(a,e),a.getEditor().setData(e),a.prevTemplateHigh=r,a.prevTemplateWidth=n},runUntilTestSuccess:!0,remainBefore:!1})}},{key:"runTask",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.name,n=t.run,r=t.runUntilTestSuccess,o=void 0===r||r,i=t.remainBefore,l=void 0===i||i,c=t.test,p=void 0===c?function(){return e.inited}:c;this.taskRunning?this.pendingTask.push({name:a,run:n,runUntilTestSuccess:o,remainBefore:l,test:p}):p()?n():o&&(l?(this.tasks[a]=this.tasks[a]||[],this.tasks[a].push({name:a,run:n,runUntilTestSuccess:o,remainBefore:l,test:p})):this.tasks[a]=[{name:a,run:n,runUntilTestSuccess:o,remainBefore:l,test:p}])}},{key:"triggerTaskRun",value:function(){var e=this;this.taskRunning=!0;var t={},a=!1;Object.keys(this.tasks).forEach(function(n){e.tasks[n].forEach(function(e){e.test()?e.run():(a=!0,t[e.name]=t[e.name]||[],t[e.name].push(e))})}),(a||0!==this.pendingTask.length)&&(this.pendingTask.forEach(function(e){e.remainBefore?(t[e.name]=t[e.name]||[],t[e.name].push(e)):t[e.name]=[e]}),this.tasks=t),this.pendingTask=[],this.taskRunning=!1}},{key:"setValue",value:function(e){m(Object(u["a"])(t.prototype),"setValue",this).call(this,e||"")}},{key:"render",value:function(){return D.a.createElement(r.a,{spinning:!this.inited},D.a.createElement(re,Object.assign({ref:this.richTextEditorRef},this.richTextEditorProps)))}},{key:"templateBuildConfig",get:function(){return{width:this.templateWidth,height:this.templateHigh}}},{key:"templateHigh",get:function(){return!this.props.templateHigh||this.props.templateHigh<1?100:this.props.templateHigh}},{key:"templateWidth",get:function(){return!this.props.templateWidth||this.props.templateWidth<1?100:this.props.templateWidth}}]),t}(S["FormField"]),be=ge,fe=Object(L["a"])(be.prototype,"inited",[N["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),he=Object(L["a"])(be.prototype,"richTextEditorProps",[N["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{key:P()(),config:{resize_enabled:!1,extraPlugins:"label-template",extraAllowedContent:{div:{attributes:"data-type",styles:["width","height","border"]},span:{attributes:"data-src,contenteditable,data-backgroundcolor,data-code,data-datatype,data-height,data-shape,data-style,data-type,data-value,data-width",styles:"position,display,width,height,border,border-radius,background-color,overflow,color"}},toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"},"/",{name:"label-template"}]}}}}),Object(L["a"])(be.prototype,"templateHigh",[N["computed"]],Object.getOwnPropertyDescriptor(be.prototype,"templateHigh"),be.prototype),Object(L["a"])(be.prototype,"templateWidth",[N["computed"]],Object.getOwnPropertyDescriptor(be.prototype,"templateWidth"),be.prototype),Object(L["a"])(be.prototype,"runInitAll",[oe],Object.getOwnPropertyDescriptor(be.prototype,"runInitAll"),be.prototype),Object(L["a"])(be.prototype,"handleDataChange",[ie,le],Object.getOwnPropertyDescriptor(be.prototype,"handleDataChange"),be.prototype),Object(L["a"])(be.prototype,"initAll",[ce],Object.getOwnPropertyDescriptor(be.prototype,"initAll"),be.prototype),Object(L["a"])(be.prototype,"realInit",[pe],Object.getOwnPropertyDescriptor(be.prototype,"realInit"),be.prototype),Object(L["a"])(be.prototype,"autoUpdateEditor",[se],Object.getOwnPropertyDescriptor(be.prototype,"autoUpdateEditor"),be.prototype),Object(L["a"])(be.prototype,"triggerTaskRun",[ue],Object.getOwnPropertyDescriptor(be.prototype,"triggerTaskRun"),be.prototype),Object(L["a"])(be.prototype,"setValue",[de,N["action"]],Object.getOwnPropertyDescriptor(be.prototype,"setValue"),be.prototype),me=be))||me)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a(323);var n=a(246),r=a.n(n),o=(a(237),a(258)),i=a.n(o),l=(a(304),a(273)),c=a.n(l),p=a(2),s=a.n(p),u=a(22),d=a(21),m=(a(305),a(243)),b=a.n(m),f=a(23),h=(a(240),a(241)),g=a.n(h),y=a(1),v=a.n(y),T=a(202),O=a.n(T),k=a(309),x=a(162),j=a(234),w=a(380),E=a.n(w);function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){var t=e.value,a=e.meaning;return v.a.createElement(g.a.Option,{value:t,key:t},a)})}var C=function(e){var t=e.isCreate,a=void 0===t||t,n=e.initialData,o=e.interactedRef,l=v.a.useState(),p=Object(f["a"])(l,2),m=(p[0],p[1]),h=v.a.useMemo(function(){var e=Object(j["c"])(),t=new b.a(Object(d["a"])({},e.ds));return t.create(a?{shape:e.constants.shape.rectangle,type:e.constants.type.text,sourceType:e.constants.sourceType.text,width:100,height:100,text:"label text",param:"",src:""}:n),{ds:t,constants:e.constants,options:e.options,srcFileList:a?[]:[{url:n.src,uid:"-1",status:"done"}]}},[]),y=h.ds,T=h.options,w=h.constants,C=h.srcFileList,D=v.a.useCallback(function(e){y.current.set("src",e.response||e.url||e.thumbUrl)},[y]);v.a.useEffect(function(){var e=function(e){var t=e.name;["shape","type","sourceType"].includes(t)&&m(O()())};return y.addEventListener("update",e),function(){y.removeEventListener("update",e)}},[y]),v.a.useImperativeHandle(o,function(){return{getValidateData:function(){var e=Object(u["a"])(s.a.mark(function e(){var t,a,n,r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=function(){if(!t.code)return!1;switch(t.sourceType){case w.sourceType.text:return!!t.text;case w.sourceType.param:return!!t.param;case w.sourceType.upload:return!!t.src;default:return!1}},n=function(){return t.width>0&&t.height>0},t=y.toData()[0],a=!1,e.t0=t.shape,e.next=e.t0===w.shape.horizontalLine?7:e.t0===w.shape.verticalLine?9:e.t0===w.shape.rectangle?11:e.t0===w.shape.circle?13:15;break;case 7:return n()&&(a=!0),e.abrupt("break",16);case 9:return n()&&(a=!0),e.abrupt("break",16);case 11:return n()&&r()&&(a=!0),e.abrupt("break",16);case 13:return n()&&r()&&(a=!0),e.abrupt("break",16);case 15:a=!1;case 16:if(!a){e.next=18;break}return e.abrupt("return",t);case 18:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}});var N=y.current.toData();return v.a.createElement(r.a,{columns:1,dataSet:y,className:E.a["label-editor"]},v.a.createElement(g.a,{key:"shape",name:"shape"},L(T.shape)),v.a.createElement(c.a,{key:"width",name:"width",min:1}),v.a.createElement(c.a,{key:"height",name:"height",min:1}),[w.shape.circle,w.shape.rectangle].includes(N.shape)&&[v.a.createElement(g.a,{key:"type",name:"type"},L(T.type)),v.a.createElement(i.a,{key:"code",name:"code"}),v.a.createElement(g.a,{key:"sourceType",name:"sourceType"},L(T.sourceType.filter(function(e){var t=e.value;return N.type===w.type.img||t!==w.sourceType.upload})))],[w.shape.circle,w.shape.rectangle].includes(N.shape)&&w.sourceType.text===N.sourceType&&v.a.createElement(i.a,{key:"text",name:"text"}),[w.shape.circle,w.shape.rectangle].includes(N.shape)&&w.sourceType.param===N.sourceType&&v.a.createElement(i.a,{key:"param",name:"param"}),[w.shape.circle,w.shape.rectangle].includes(N.shape)&&w.sourceType.upload===N.sourceType&&v.a.createElement(k["a"],{single:!0,key:"src",name:"src",fileType:"image/jpeg,image/png",onUploadSuccess:D,fileList:C,bucketName:x["c"]}))};t["default"]=C},function(e,t,a){"use strict";a.r(t),a.d(t,"hasDialog",function(){return r}),a.d(t,"buildName",function(){return o}),a.d(t,"transformDataToElement",function(){return i}),a.d(t,"transformElementToData",function(){return l});var n=a(234);function r(e,t){return e&&e.ui.hasDialog(t),!1}function o(e){return"hzero_label_".concat(e)}function i(e,t){var a=Object(n["c"])(),r=a.constants,o={width:e.width,height:e.height},i={};function l(e,a){t.setStyle(e,a),"background-color"!==e?i[e]=a:t.setAttribute("data-backgroundcolor",a)}function c(e){t.removeStyle(e),"background-color"===e&&t.removeAttribute("data-backgroundcolor"),delete i[e]}switch(e.shape){case r.shape.horizontalLine:o.shape="horizontalLine",o.tag="span";break;case r.shape.verticalLine:o.shape="verticalLine",o.tag="span";break;case r.shape.rectangle:o.shape="rectangle",o.code=e.code;break;case r.shape.circle:o.shape="circle",o.code=e.code;break;default:break}if(!o.tag){switch(e.type){case r.type.text:o.tag="span",o.type="text";break;case r.type.qr:o.tag="img",o.type="qr";break;case r.type.bar:o.tag="img",o.type="bar";break;case r.type.img:o.tag="img",o.type="img";break;default:break}switch(e.sourceType){case r.sourceType.text:o.dataType="text",o.value=e.text;break;case r.sourceType.param:o.dataType="param",o.value=e.param;break;case r.sourceType.upload:o.dataType="upload",o.value=e.src;break;default:break}}t.setAttribute("contenteditable",!1),t.setAttribute("data-shape",o.shape),t.setAttribute("data-width",o.width),t.setAttribute("data-height",o.height),t.setAttribute("data-value",o.value),t.setAttribute("data-type",o.type),t.setAttribute("data-datatype",o.dataType),t.setAttribute("data-code",o.code),l("position","relative"),l("display","inline-block"),l("width","".concat(o.width,"mm")),l("height","".concat(o.height,"mm")),l("border","1px solid #000"),l("border-radius","circle"===o.shape?"50%":"0"),["horizontalLine","verticalLine"].includes(o.shape)&&c("border");var p="#";switch(o.shape){case"circle":case"rectangle":p+="c";break;case"horizontalLine":case"verticalLine":p+="0";break;default:p+="6";break}switch(o.dataType){case"param":case"text":p+="6";break;case"upload":p+="c";break;default:p+="0";break}switch(o.type){case"text":p+="6";break;case"qr":p+="c";break;case"bar":p+="c";break;case"img":t.setAttribute("data-src",o.value),t.removeAttribute("data-value"),p+="c";break;default:p+="0";break}t.setText(o.value),l("background-color",p),["verticalLine","horizontalLine"].includes(o.shape)&&(t.setText(o.shape),l("color",p),l("overflow","hidden")),t.setAttribute("data-style",Object.keys(i).map(function(e){return"".concat(e,": ").concat(i[e],";")}).join(" "))}function l(e){var t=Object(n["c"])(),a=t.constants,r={},o={};switch(r.shape=e.data("shape"),r.width=e.data("width"),r.height=e.data("height"),r.value=e.data("value"),r.type=e.data("type"),r.dataType=e.data("dataType"),r.code=e.data("code"),o.width=+r.width,o.height=+r.height,r.shape){case"horizontalLine":o.shape=a.shape.horizontalLine;break;case"verticalLine":o.shape=a.shape.verticalLine;break;case"rectangle":o.shape=a.shape.rectangle,o.code=r.code;break;case"circle":o.shape=a.shape.circle,o.code=r.code;break;default:return}switch(r.type){case"text":o.type=a.type.text;break;case"qr":o.type=a.type.qr;break;case"bar":o.type=a.type.bar;break;case"img":o.type=a.type.img,r.value=e.data("src");break;default:break}switch(r.dataType){case"param":o.sourceType=a.sourceType.param,o.param=r.value;break;case"upload":o.sourceType=a.sourceType.upload,o.src=r.value;break;case"text":o.sourceType=a.sourceType.text,o.text=r.value;break;default:break}return o}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(198)},function(e,t,a){"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}a.d(t,"a",function(){return n})},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}a.d(t,"a",function(){return n})},function(e,t,a){"use strict";function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}a.d(t,"a",function(){return r})},function(e,t,a){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r=a(127);function o(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?Object(r["a"])(e):t}a.d(t,"a",function(){return o})},function(e,t,a){"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}a.d(t,"a",function(){return r})},,function(e,t,a){e.exports=a(0)(1169)},,function(e,t,a){e.exports=a(98)(2563)},,function(e,t,a){"use strict";function n(e,t,a,n,r){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,n){return n(e,t,a)||a},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}a.d(t,"a",function(){return n})},function(e,t,a){e.exports=a(0)(111)},function(e,t,a){e.exports=a(0)(82)},function(e,t,a){e.exports=a(0)(1168)},function(e,t,a){e.exports=a(0)(37)},function(e,t,a){e.exports=a(0)(116)},function(e,t,a){"use strict";a(105),a(146),a(112)},function(e,t,a){e.exports=a(0)(1154)},,function(e,t,a){e.exports=a(0)(34)},,function(e,t,a){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.d(t,"a",function(){return n})},function(e,t,a){e.exports=a(0)(1167)},function(e,t,a){e.exports=a(0)(604)},function(e,t,a){e.exports=a(0)(1155)},function(e,t,a){e.exports=a(0)(829)},,,function(e,t,a){e.exports=a(0)(182)},function(e,t,a){e.exports=a(0)(274)},,,,,,function(e,t,a){e.exports=a(0)(130)},function(e,t,a){e.exports=a(98)(2648)},,function(e,t,a){e.exports=a(0)(1852)},function(e,t,a){"use strict";a(105),a(195)},function(e,t,a){e.exports={"ant-modal":"ant-modal","ant-modal-wrap":"ant-modal-wrap","ant-modal-title":"ant-modal-title","ant-modal-content":"ant-modal-content","ant-modal-close":"ant-modal-close","ant-modal-close-x":"ant-modal-close-x","ant-modal-header":"ant-modal-header","ant-modal-body":"ant-modal-body","ant-modal-footer":"ant-modal-footer","zoom-enter":"zoom-enter","zoom-appear":"zoom-appear","ant-modal-mask":"ant-modal-mask","ant-modal-mask-hidden":"ant-modal-mask-hidden","ant-modal-open":"ant-modal-open","vertical-center-modal":"vertical-center-modal","ant-confirm":"ant-confirm","ant-confirm-body-wrapper":"ant-confirm-body-wrapper","ant-confirm-body":"ant-confirm-body","ant-confirm-title":"ant-confirm-title","ant-confirm-content":"ant-confirm-content",anticon:"anticon","ant-confirm-btns":"ant-confirm-btns","ant-confirm-error":"ant-confirm-error","ant-confirm-warning":"ant-confirm-warning","ant-confirm-confirm":"ant-confirm-confirm","ant-confirm-info":"ant-confirm-info","ant-confirm-success":"ant-confirm-success"}},,function(e,t,a){e.exports=a(0)(661)},,function(e,t,a){e.exports=a(0)(2092)},function(e,t,a){e.exports=a(0)(849)},function(e,t,a){e.exports=a(0)(328)},function(e,t,a){e.exports=a(0)(270)},function(e,t,a){e.exports=a(0)(170)},function(e,t,a){e.exports=a(0)(324)},function(e,t,a){e.exports=a(0)(386)},function(e,t,a){e.exports=a(0)(387)},,,function(e,t,a){e.exports=a(0)(2130)},,,function(e,t,a){e.exports=a(0)(325)},,function(e,t,a){e.exports=a(98)(2662)},function(e,t,a){e.exports=a(0)(241)},function(e,t,a){e.exports=a(0)(151)},function(e,t,a){e.exports=a(98)(1367)},function(e,t,a){e.exports=a(0)(127)},function(e,t,a){e.exports=a(0)(484)},function(e,t,a){e.exports=a(0)(2129)},function(e,t,a){e.exports=a(0)(235)},function(e,t,a){e.exports=a(0)(209)},function(e,t,a){e.exports=a(0)(868)},function(e,t,a){e.exports=a(0)(385)},function(e,t,a){e.exports=a(0)(156)},function(e,t,a){e.exports=a(0)(255)},function(e,t,a){e.exports=a(0)(1960)},function(e,t,a){e.exports=a(0)(298)},function(e,t,a){e.exports=a(0)(1132)},function(e,t,a){e.exports=a(0)(580)},function(e,t,a){e.exports=a(0)(582)},function(e,t,a){e.exports=a(0)(128)},function(e,t,a){e.exports=a(0)(108)},function(e,t,a){e.exports=a(0)(472)},function(e,t,a){e.exports=a(0)(873)},,,,,,,function(e,t,a){e.exports=a(0)(418)},,function(e,t,a){e.exports={"ant-spin":"ant-spin","ant-spin-spinning":"ant-spin-spinning","ant-spin-nested-loading":"ant-spin-nested-loading","ant-spin-dot":"ant-spin-dot","ant-spin-text":"ant-spin-text","ant-spin-show-text":"ant-spin-show-text","ant-spin-sm":"ant-spin-sm","ant-spin-lg":"ant-spin-lg","ant-spin-container":"ant-spin-container","ant-spin-blur":"ant-spin-blur","ant-spin-tip":"ant-spin-tip",antSpinMove:"antSpinMove","ant-spin-dot-spin":"ant-spin-dot-spin",antRotate:"antRotate"}},,,,,,,function(e,t,a){e.exports=a(98)(2670)},function(e,t,a){e.exports=a(0)(382)},,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(1858)},function(e,t,a){"use strict";function n(e,t,a,n){a&&Object.defineProperty(e,t,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(n):void 0})}a.d(t,"a",function(){return n})},function(e,t,a){"use strict"},function(e,t,a){"use strict";var n=a(21),r=(a(238),a(130)),o=a(164),i=a(111);function l(e){var t=e||{},a=t.message,l=t.description,c=Object(o["a"])(t,["message","description"]);r["default"].success(Object(n["a"])({message:a||i["a"].get("hzero.common.notification.success").d("\u64cd\u4f5c\u6210\u529f"),description:l,duration:2.5,className:"success"},c))}function c(e){var t=e||{},a=t.message,l=t.description,c=Object(o["a"])(t,["message","description"]);r["default"].error(Object(n["a"])({message:a||i["a"].get("hzero.common.notification.error").d("\u64cd\u4f5c\u5931\u8d25"),description:l,duration:2.5,className:"error"},c))}function p(e){var t=e||{},a=t.message,l=t.description,c=Object(o["a"])(t,["message","description"]);r["default"].warning(Object(n["a"])({message:a||i["a"].get("hzero.common.notification.warn").d("\u64cd\u4f5c\u5f02\u5e38"),description:l,duration:2.5,className:"warn"},c))}function s(e){var t=e||{},a=t.message,i=t.description,l=Object(o["a"])(t,["message","description"]);r["default"].info(Object(n["a"])({message:a,description:i,duration:2.5,className:"info"},l))}t["a"]={success:l,error:c,warning:p,info:s}},function(e,t,a){e.exports=a(0)(61)},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"d",function(){return p}),a.d(t,"b",function(){return s}),a.d(t,"e",function(){return u}),a.d(t,"c",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"f",function(){return b});var n=a(21),r=a(111),o=a(162),i=a(113),l=Object(i["q"])(),c=Object(i["g"])(),p=function(){return{rowKey:"labelTemplateId",autoQuery:!0,selection:!1,queryFields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always"},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string"},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),type:"string"}],fields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",required:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string",required:!0},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",defaultValue:"1",required:!0,transformResponse:function(e){return 0===e?"0":"1"}},{name:"templateWidth",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateWidth").d("\u6a21\u677f\u5bbd\u5ea6"),type:"number",required:!0},{name:"templateHigh",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateHigh").d("\u6a21\u677f\u9ad8\u5ea6"),type:"number",required:!0}],transport:{read:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"GET",query:t})},create:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"POST",data:t[0]})},destroy:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"DELETE",data:t[0]})}}}},s=function(e,t){return{rowKey:"labelTemplateId",autoQuery:!0,paging:!1,fields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",required:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string",required:!0},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",required:!0,defaultValue:"1",transformResponse:function(e){return 0===e?"0":"1"}},{name:"templateWidth",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateWidth").d("\u6a21\u677f\u5bbd\u5ea6"),type:"number",required:!0},{name:"templateHigh",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateHigh").d("\u6a21\u677f\u9ad8\u5ea6"),type:"number",required:!0},{name:"templateContent",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateContent").d("\u6a21\u677f\u5185\u5bb9"),type:"string"}],transport:{read:function(t){var a=t.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-templates/").concat(e):"".concat(o["l"],"/v1/label-templates/").concat(e),method:"GET",query:{}})},update:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-templates"):"".concat(o["l"],"/v1/label-templates"),method:"PUT",data:t[0]})}},children:{labelParameterList:t}}},u=function(){return{rowKey:"labelParameterId",autoQuery:!1,paging:!1,selection:!1,fields:[{name:"parameterCode",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterCode").d("\u53c2\u6570\u4ee3\u7801"),type:"string",required:!0},{name:"parameterName",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterName").d("\u53c2\u6570\u540d\u79f0"),type:"string",required:!0},{name:"paramTypeCode",label:r["a"].get("hrpt.labelTemplate.model.parameter.parameterType").d("\u53c2\u6570\u7c7b\u578b"),type:"single",required:!0,lookupCode:"HRPT.LABEL_PARAM_TYPE"},{name:"textLength",label:r["a"].get("hrpt.labelTemplate.model.parameter.textLength").d("\u6587\u5b57\u957f\u5ea6"),type:"number"},{name:"maxRows",label:r["a"].get("hrpt.labelTemplate.model.parameter.maxRows").d("\u6700\u5927\u884c\u6570"),type:"number"},{name:"barCodeType",label:r["a"].get("hrpt.labelTemplate.model.parameter.barCodeType").d("\u6761\u7801\u7c7b\u578b"),type:"single",lookupCode:"HRPT.LABEL_BARCODE_TYPE"},{name:"characterEncoding",label:r["a"].get("hrpt.labelTemplate.model.parameter.characterEncoding").d("\u5b57\u7b26\u7f16\u7801"),type:"string",dynamicProps:{required:function(e){var t=e.record;return"BARCODE"===t.get("paramTypeCode")}},lookupCode:"HRPT.LABEL.CHARACTER_ENCODE"}],transport:{destroy:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-parameters"):"".concat(o["l"],"/v1/label-parameters"),method:"DELETE",data:t[0]})}}}},d=function(){return{constants:{shape:{circle:"1",rectangle:"2",horizontalLine:"4",verticalLine:"8"},type:{text:"1",img:"2",bar:"4",qr:"8"},sourceType:{text:"1",param:"2",upload:"4"}},options:{shape:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.shape.circle").d("\u5706")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.shape.rectangle").d("\u65b9\u5f62")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.hL").d("\u6a2a\u7ebf")},{value:"8",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.verticalLine").d("\u7ad6\u7ebf")}],type:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.text").d("\u6587\u672c")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.img").d("\u56fe\u7247")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.bar").d("\u6761\u7801")},{value:"8",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.type.qr").d("\u4e8c\u7ef4\u7801")}],sourceType:[{value:"1",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.text").d("\u624b\u52a8\u8f93\u5165")},{value:"2",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.param").d("\u8868\u8fbe\u5f0f")},{value:"4",meaning:r["a"].get("hrpt.labelTemplate.view.option.cke.p.label.sourceType.upload").d("\u4e0a\u4f20\u56fe\u7247")}]},ds:{fields:[{name:"shape",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.shape").d("\u5f62\u72b6"),required:!0},{name:"code",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.code").d("\u53c2\u6570"),required:!0},{name:"type",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.type").d("\u7c7b\u578b"),required:!0},{name:"sourceType",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.sourceType").d("\u8f93\u5165\u6e90"),required:!0,defaultValue:"1"},{name:"width",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.width").d("\u5bbd"),type:"number",required:!0},{name:"height",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.height").d("\u9ad8"),type:"number",required:!0},{name:"text",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.text").d("\u5185\u5bb9"),type:"string",required:!0},{name:"param",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.param").d("\u8868\u8fbe\u5f0f"),type:"string",required:!0},{name:"src",label:r["a"].get("hrpt.labelTemplate.model.cke.p.label.src").d("\u56fe\u7247URL"),type:"string",required:!0}]}}},m=function(e){return{autoQuery:!0,selection:!1,queryFields:[{name:"tenantLov",type:"object",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),lovCode:"HPFM.TENANT",ignore:"always",disabled:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"enabledFlag",label:r["a"].get("hzero.common.status").d("\u72b6\u6001"),type:"single",lookupCode:"HPFM.ENABLED_FLAG",disabled:!0},{name:"templateCode",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateCode").d("\u6a21\u677f\u4ee3\u7801"),type:"string",disabled:!0},{name:"templateName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.templateName").d("\u6a21\u677f\u540d\u79f0"),type:"string"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),type:"string"},{name:"datasetLov",type:"object",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.dataset").d("\u6570\u636e\u96c6"),lovCode:"HRPT.DATASET",ignore:"always",required:!0,cascadeMap:{tenantId:"tenantId"}},{name:"datasetId",bind:"datasetLov.datasetId",type:"number"},{name:"datasetName",label:r["a"].get("hrpt.labelTemplate.model.labelTemplate.datasetName").d("\u6570\u636e\u96c6\u540d\u79f0"),bind:"datasetLov.datasetName"}],fields:[{name:"tenantLov",type:"object",lovCode:"HPFM.TENANT",label:r["a"].get("entity.tenant.tag").d("\u79df\u6237"),ignore:"always",required:!0},{name:"tenantId",type:"number",bind:"tenantLov.tenantId"},{name:"tenantName",type:"string",bind:"tenantLov.tenantName"},{name:"roleLov",type:"object",lovCode:"HIAM.TENANT_ROLE",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.role").d("\u89d2\u8272"),cascadeMap:{tenantId:"tenantId"},ignore:"always",required:!0},{name:"roleId",type:"number",bind:"roleLov.id"},{name:"roleName",type:"string",bind:"roleLov.name"},{name:"startDate",type:"date",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.startDate").d("\u751f\u6548\u65e5\u671f"),dynamicProps:{max:function(e){var t=e.record;return t.get("endDate")}}},{name:"endDate",type:"date",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.endDate").d("\u5931\u6548\u65e5\u671f"),dynamicProps:{min:function(e){var t=e.record;return t.get("startDate")}}},{name:"remark",type:"string",label:r["a"].get("hrpt.labelTemplate.model.labelPermissions.remark").d("\u63cf\u8ff0")}],transport:{read:function(t){var a=t.params,r=t.config;return Object(n["a"])({},r,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"GET",params:Object(n["a"])({},a,{labelTemplateId:e.labelTemplateId})})},create:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"POST",data:t[0]})},update:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"PUT",data:t[0]})},destroy:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-permissions"):"".concat(o["l"],"/v1/label-permissions"),method:"DELETE",data:t[0]})}}}},b=function(e){return{autoQuery:!1,autoCreate:!0,paging:!1,fields:[{name:"paperSize",label:r["a"].get("hrpt.labelTemplate.model.print.paperSize").d("\u7eb8\u5f20\u5c3a\u5bf8"),lookupCode:"HRPT.LABEL.PAPER",type:"string",required:!0},{name:"paperWidth",label:r["a"].get("hrpt.labelTemplate.model.print.paperWidth").d("\u5bbd\u5ea6(mm)"),type:"number",required:!0,dynamicProps:{readOnly:function(e){var t=e.record;return"customize"!==t.get("paperSize")}}},{name:"paperHigh",label:r["a"].get("hrpt.labelTemplate.model.print.paperHigh").d("\u9ad8\u5ea6(mm)"),type:"number",dynamicProps:{readOnly:function(e){var t=e.record;return"customize"!==t.get("paperSize")||t.get("_paperNoLimit")},required:function(e){var t=e.record;return!t.get("_paperNoLimit")}}},{name:"_paperNoLimit",label:r["a"].get("hrpt.labelTemplate.model.print.paperNoLimit").d("\u65e0\u9650\u5236"),type:"boolean",trueValue:!0,falseValue:!1,defaultValue:!1,dynamicProps:{readOnly:function(e){var t=e.record;return"customize"!==t.get("paperSize")}}},{name:"printDirection",label:r["a"].get("hrpt.labelTemplate.model.print.printDirection").d("\u65b9\u5411"),type:"boolean",trueValue:0,falseValue:1,defaultValue:0},{name:"marginTop",label:r["a"].get("hrpt.labelTemplate.model.print.marginTop").d("\u4e0a(mm)"),type:"number",required:!0,defaultValue:0},{name:"marginRight",label:r["a"].get("hrpt.labelTemplate.model.print.marginRight").d("\u53f3(mm)"),type:"number",required:!0,defaultValue:0},{name:"marginBottom",label:r["a"].get("hrpt.labelTemplate.model.print.marginBottom").d("\u4e0b(mm)"),type:"number",defaultValue:0,dynamicProps:{readOnly:function(e){var t=e.record;return t.get("_paperNoLimit")},required:function(e){var t=e.record;return!t.get("_paperNoLimit")}}},{name:"marginLeft",label:r["a"].get("hrpt.labelTemplate.model.print.marginLeft").d("\u5de6(mm)"),type:"number",required:!0,defaultValue:0},{name:"wideQty",label:r["a"].get("hrpt.labelTemplate.model.print.wideQty").d("\u5bbd(\u4e2a)"),type:"number",required:!0,defaultValue:1},{name:"highQty",label:r["a"].get("hrpt.labelTemplate.model.print.highQty").d("\u9ad8(\u4e2a)"),type:"number",defaultValue:1,dynamicProps:{readOnly:function(e){var t=e.record;return t.get("_paperNoLimit")}}},{name:"highSpace",label:r["a"].get("hrpt.labelTemplate.model.print.highSpace").d("\u9ad8\u95f4\u8ddd(mm)"),type:"number",defaultValue:0,dynamicProps:{required:function(e){var t=e.record;return t.get("_paperNoLimit")}}}],transport:{read:function(t){var a=t.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-prints/").concat(e.templateCode):"".concat(o["l"],"/v1/label-prints/").concat(e.templateCode),method:"GET",params:{tenantId:c}})},create:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-prints"):"".concat(o["l"],"/v1/label-prints"),method:"POST",data:t[0]})},update:function(e){var t=e.data,a=e.config;return Object(n["a"])({},a,{url:l?"".concat(o["l"],"/v1/").concat(c,"/label-prints"):"".concat(o["l"],"/v1/label-prints"),method:"POST",data:t[0]})}}}}},,,function(e,t,a){"use strict";a(132),a(266),a(242)},,,,function(e,t,a){e.exports=a(0)(2305)},,function(e,t,a){e.exports=a(0)(1258)},,,function(e,t,a){e.exports=a(0)(2224)},,,,,,,,,,,,function(e,t,a){e.exports=a(0)(2270)},,,,,,,,function(e,t,a){e.exports={"c7n-pro-input":"c7n-pro-input","c7n-pro-input-focused":"c7n-pro-input-focused","c7n-pro-input-disabled":"c7n-pro-input-disabled","c7n-pro-input-prefix":"c7n-pro-input-prefix","c7n-pro-input-suffix":"c7n-pro-input-suffix","c7n-pro-input-prefix-button":"c7n-pro-input-prefix-button","c7n-pro-input-suffix-button":"c7n-pro-input-suffix-button","c7n-pro-input-inner-button":"c7n-pro-input-inner-button","c7n-pro-input-not-editable":"c7n-pro-input-not-editable","c7n-pro-input-placeholder":"c7n-pro-input-placeholder","c7n-pro-input-rendered-value":"c7n-pro-input-rendered-value","c7n-pro-input-placeholder-inner":"c7n-pro-input-placeholder-inner","c7n-pro-input-rendered-value-inner":"c7n-pro-input-rendered-value-inner","c7n-pro-input-lg":"c7n-pro-input-lg","c7n-pro-input-sm":"c7n-pro-input-sm","c7n-pro-input-wrapper":"c7n-pro-input-wrapper","c7n-pro-field-label":"c7n-pro-field-label","c7n-pro-input-inner-button-clear-button":"c7n-pro-input-inner-button-clear-button","c7n-pro-input-clear-button":"c7n-pro-input-clear-button","c7n-pro-input-empty":"c7n-pro-input-empty","c7n-pro-input-multiple-value":"c7n-pro-input-multiple-value","c7n-pro-input-multiple-input":"c7n-pro-input-multiple-input","c7n-pro-input-multiple":"c7n-pro-input-multiple","c7n-pro-input-multiple-block":"c7n-pro-input-multiple-block","c7n-pro-input-multiple-block-invalid":"c7n-pro-input-multiple-block-invalid","c7n-pro-input-multiple-block-disabled":"c7n-pro-input-multiple-block-disabled",icon:"icon","c7n-pro-input-range-text":"c7n-pro-input-range-text","c7n-pro-input-range-start":"c7n-pro-input-range-start","c7n-pro-input-range-end":"c7n-pro-input-range-end","c7n-pro-input-range-split":"c7n-pro-input-range-split","c7n-pro-input-range-input":"c7n-pro-input-range-input","c7n-pro-input-group":"c7n-pro-input-group","c7n-pro-input-group-wrapper":"c7n-pro-input-group-wrapper","c7n-pro-input-group-before":"c7n-pro-input-group-before","c7n-pro-input-group-after":"c7n-pro-input-group-after","c7n-pro-input-group-help":"c7n-pro-input-group-help","c7n-pro-input-group-input":"c7n-pro-input-group-input","c7n-pro-input-required":"c7n-pro-input-required","c7n-pro-input-invalid":"c7n-pro-input-invalid","c7n-pro-input-underline":"c7n-pro-input-underline","c7n-pro-input-ripple":"c7n-pro-input-ripple","c7n-pro-input-float-label":"c7n-pro-input-float-label","c7n-pro-field-label-wrapper":"c7n-pro-field-label-wrapper","c7n-pro-input-float-label-group":"c7n-pro-input-float-label-group","c7n-pro-input-uppercase":"c7n-pro-input-uppercase","c7n-pro-input-lowercase":"c7n-pro-input-lowercase","c7n-pro-input-capitalize":"c7n-pro-input-capitalize"}},,function(e,t,a){"use strict";a(105),a(306),a(308),a(128)},function(e,t,a){e.exports=a(0)(1208)},,,,function(e,t,a){e.exports=a(0)(2271)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports={"ant-upload":"ant-upload","ant-upload-btn":"ant-upload-btn","ant-upload-select":"ant-upload-select","ant-upload-select-picture-card":"ant-upload-select-picture-card","ant-upload-drag":"ant-upload-drag","ant-upload-drag-hover":"ant-upload-drag-hover","ant-upload-disabled":"ant-upload-disabled","ant-upload-drag-container":"ant-upload-drag-container","ant-upload-drag-icon":"ant-upload-drag-icon",anticon:"anticon","ant-upload-text":"ant-upload-text","ant-upload-hint":"ant-upload-hint","anticon-plus":"anticon-plus","ant-upload-list":"ant-upload-list","ant-upload-list-item":"ant-upload-list-item","ant-upload-list-item-name":"ant-upload-list-item-name","ant-upload-list-item-info":"ant-upload-list-item-info","anticon-loading":"anticon-loading","anticon-paper-clip":"anticon-paper-clip","anticon-cross":"anticon-cross","ant-upload-list-item-error":"ant-upload-list-item-error","ant-upload-list-item-progress":"ant-upload-list-item-progress","ant-upload-list-picture":"ant-upload-list-picture","ant-upload-list-picture-card":"ant-upload-list-picture-card","ant-upload-list-item-file-name":"ant-upload-list-item-file-name","ant-upload-list-item-uploading":"ant-upload-list-item-uploading","ant-upload-list-item-thumbnail":"ant-upload-list-item-thumbnail","ant-upload-list-item-icon":"ant-upload-list-item-icon","ant-upload-list-item-action-remove":"ant-upload-list-item-action-remove","ant-upload-list-item-picture-card":"ant-upload-list-item-picture-card","ant-upload-list-item-actions":"ant-upload-list-item-actions","anticon-eye-o":"anticon-eye-o","anticon-download":"anticon-download","anticon-upload":"anticon-upload","anticon-picture":"anticon-picture","ant-upload-list-item-uploading-text":"ant-upload-list-item-uploading-text","ant-upload-success-icon":"ant-upload-success-icon","ant-upload-animate-enter":"ant-upload-animate-enter","ant-upload-animate-leave":"ant-upload-animate-leave","ant-upload-animate-inline-enter":"ant-upload-animate-inline-enter","ant-upload-animate-inline-leave":"ant-upload-animate-inline-leave",uploadAnimateIn:"uploadAnimateIn",uploadAnimateOut:"uploadAnimateOut",uploadAnimateInlineIn:"uploadAnimateInlineIn",uploadAnimateInlineOut:"uploadAnimateInlineOut"}},,function(e,t,a){e.exports=a(0)(2098)},function(e,t,a){"use strict";a.d(t,"a",function(){return G});a(268);var n,r,o,i,l,c,p,s=a(269),u=(a(112),a(117)),d=(a(119),a(120)),m=a(164),b=a(21),f=a(2),h=a.n(f),g=a(22),y=a(262),v=a(107),T=a(108),O=a(109),k=a(106),x=a(127),j=a(110),w=a(116),E=(a(238),a(130)),L=a(310),C=a.n(L),D=a(311),N=a.n(D),I=a(129),R=a.n(I),S=a(24),A=a.n(S),P=a(222),z=a.n(P),U=a(1),q=a.n(U),B=a(114),H=a(315),_=a.n(H),F=a(111),M=a(227),V=a(113),W=a(162),K=a(158);E["default"].config({placement:"bottomRight"});var G=(n=Object(B["Bind"])(),r=Object(B["Bind"])(),o=Object(B["Bind"])(),i=Object(B["Bind"])(),l=Object(B["Bind"])(),c=Object(B["Bind"])(),p=function(e){function t(e){var a;Object(v["a"])(this,t),a=Object(O["a"])(this,Object(k["a"])(t).call(this,e));var n=a.props.onRef;return n&&n(Object(x["a"])(a)),a.state={fileList:null},a}return Object(j["a"])(t,e),Object(T["a"])(t,[{key:"setFileList",value:function(e){e&&this.setState({fileList:e})}},{key:"uploadData",value:function(e){var t=this.props,a=t.attachmentUUID,n=t.bucketName,r=t.uploadData,o=t.bucketDirectory,i=t.docType,l=t.storageCode,c=r?r(e):{};if(!(c instanceof FormData)){var p=c;c=new FormData,z()(c)&&Object.keys(p).forEach(function(e){c.append(e,p[e])})}return R()(a)||c.append("attachmentUUID",a),R()(n)||c.append("bucketName",n),R()(i)||c.append("docType",i),R()(l)||c.append("storageCode",l),R()(o)||c.append("directory",o),c}},{key:"onChange",value:function(e){var t=e.file,a=e.fileList,n=this.props,r=n.single,o=void 0!==r&&r,i=n.tenantId,l=n.bucketName,c=n.bucketDirectory,p=Object(y["a"])(a);if("done"===t.status){var s=t.response;if(s&&!0===s.failed)this.onUploadError(t,a);else{if(o){if(a.length>1){var u=this.props.onRemove;Promise.all(a.slice(0,a.length-1).map(function(){var e=Object(g["a"])(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.url){e.next=20;break}if(!u){e.next=11;break}return e.prev=2,e.next=5,u(t);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](2);case 9:e.next=20;break;case 11:return a=t.url&&t.url.split("=")||[],n=a[a.length-1],e.prev=13,e.next=16,Object(K["i"])({tenantId:i,bucketName:l,urls:[n]});case 16:e.next=20;break;case 18:e.prev=18,e.t1=e["catch"](13);case 20:case"end":return e.stop()}},e,null,[[2,7],[13,18]])}));return function(t){return e.apply(this,arguments)}}())).catch(function(){})}p=[{uid:t.uid,name:t.name,url:Object(V["e"])(t.response,l,i,c),thumbUrl:Object(V["e"])(t.response,l,i,c)}]}else p=a.map(function(e){return e.uid===t.uid&&(e.url=Object(V["e"])(e.response,l,i,c)),e});this.onUploadSuccess(t,p)}}else"error"===t.status&&(this.onUploadError(t,a),p=a.filter(function(e){return"error"!==e.status&&e.uid}));this.setState({fileList:C()(p,function(e,t){return e.uid===t.uid})})}},{key:"beforeUpload",value:function(e){var t=this.props,a=t.fileType,n=t.fileSize,r=void 0===n?31457280:n;if(a&&-1===a.indexOf(e.type)){e.status="error";var o={message:F["a"].get("hzero.common.upload.error.type",{fileType:a}).d("\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b\u5fc5\u987b\u662f\uff1a".concat(a))};return e.response=o,!1}if(e.size>r){e.status="error";var i={message:F["a"].get("hzero.common.upload.error.size",{fileSize:r/1048576}).d("\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7: ".concat(r/1048576," MB"))};return e.response=i,!1}return!0}},{key:"onRemove",value:function(e){var t=this,a=this.props,n=a.onRemove,r=a.bucketName,o=a.onRemoveSuccess,i=a.single,l=void 0!==i&&i,c=a.tenantId,p=this.state.fileList;if(e.url){if(n)return n(e);var s=e.url&&e.url.split("=")||[],u=s[s.length-1];return Object(K["i"])({tenantId:c,bucketName:r,urls:[u]}).then(function(a){return!!Object(V["k"])(a)&&(o&&o(),l?t.setState({fileList:[]}):(N()(p,function(t){return t.uid===e.uid}),t.setState({fileList:p})),!0)})}this.setState({fileList:p.filter(function(t){return t.uid!==e.uid})})}},{key:"onUploadSuccess",value:function(e,t){var a=this.props.onUploadSuccess;a&&a(e,t)}},{key:"onUploadError",value:function(e,t){var a=this.props.onUploadError,n=!0;a&&(n=!1!==a(e,t)),n&&E["default"].error({message:F["a"].get("hzero.common.upload.status.error").d("\u4e0a\u4f20\u5931\u8d25"),description:e.response&&e.response.message})}},{key:"changeFileList",value:function(e){var t=this.props,a=t.bucketName,n=t.bucketDirectory,r=t.tenantId;if(e)return e.map(function(e){return Object(b["a"])({},e,{url:Object(V["e"])(e.url,a,r,n)})})}},{key:"handleAction",value:function(e){var t=e.file,a=e.onProgress,n=e.onSuccess,r=e.onError,o=new _.a,i=o.signal,l=this.props.action,c=l||(Object(V["q"])()?"".concat(W["f"],"/v1/").concat(Object(V["g"])(),"/files/multipart"):"".concat(W["f"],"/v1/files/multipart")),p="".concat(c),s=this.uploadData(t);return s.append("file",t,t.name),Object(M["a"])(p,{processData:!1,method:"POST",type:"FORM",body:s,responseType:"text",signal:i,onProgress:a?function(e){return a(e,t)}:null},{beforeCatch:function(e){if("AbortError"!==e.name)throw new Error(e)}}).then(function(e){A()(e)?n(e):Object(V["k"])(e)||r(e)}),{abort:function(){o.abort()}}}},{key:"render",value:function(){var e=this.props,t=e.fileList,a=e.fileType,n=(e.fileSize,e.single,e.text),r=void 0===n?F["a"].get("hzero.common.upload.txt").d("\u4e0a\u4f20"):n,o=e.listType,i=void 0===o?"picture":o,l=(e.bucketName,e.onUploadSuccess,e.onUploadError,e.viewOnly),c=void 0!==l&&l,p=e.showRemoveIcon,b=void 0===p||p,f=(e.docType,e.storageCode,e.children),h=Object(m["a"])(e,["fileList","fileType","fileSize","single","text","listType","bucketName","onUploadSuccess","onUploadError","viewOnly","showRemoveIcon","docType","storageCode","children"]),g=Object(V["d"])(),y=this.changeFileList(t),v={};g&&(v.Authorization="bearer ".concat(g));var T,O=a&&-1===a.indexOf(",")?a.split(";").join(","):a;return T="picture-card"===i?q.a.createElement("div",null,q.a.createElement(d["default"],{style:{fontSize:"32px",color:"#999"},type:"plus"})):q.a.createElement(u["default"],null,q.a.createElement(d["default"],{type:"upload"})," ",r),q.a.createElement(s["default"],Object.assign({name:"file",accept:O,fileList:this.state.fileList||y,data:this.uploadData,customRequest:this.handleAction,headers:v,onChange:this.onChange,listType:i,beforeUpload:this.beforeUpload,onRemove:this.onRemove,showUploadList:{showRemoveIcon:!c&&b}},h),f||!c&&T)}}]),t}(q.a.Component),Object(w["a"])(p.prototype,"uploadData",[n],Object.getOwnPropertyDescriptor(p.prototype,"uploadData"),p.prototype),Object(w["a"])(p.prototype,"onChange",[r],Object.getOwnPropertyDescriptor(p.prototype,"onChange"),p.prototype),Object(w["a"])(p.prototype,"beforeUpload",[o],Object.getOwnPropertyDescriptor(p.prototype,"beforeUpload"),p.prototype),Object(w["a"])(p.prototype,"onRemove",[i],Object.getOwnPropertyDescriptor(p.prototype,"onRemove"),p.prototype),Object(w["a"])(p.prototype,"changeFileList",[l],Object.getOwnPropertyDescriptor(p.prototype,"changeFileList"),p.prototype),Object(w["a"])(p.prototype,"handleAction",[c],Object.getOwnPropertyDescriptor(p.prototype,"handleAction"),p.prototype),p)},function(e,t,a){var n=a(150);function r(e,t){return t="function"==typeof t?t:void 0,e&&e.length?n(e,void 0,t):[]}e.exports=r},function(e,t,a){var n=a(135),r=a(312);function o(e,t){var a=[];if(!e||!e.length)return a;var o=-1,i=[],l=e.length;t=n(t,3);while(++o<l){var c=e[o];t(c,o,e)&&(a.push(c),i.push(o))}return r(e,i),a}e.exports=o},function(e,t,a){var n=a(313),r=a(314),o=Array.prototype,i=o.splice;function l(e,t){var a=e?t.length:0,o=a-1;while(a--){var l=t[a];if(a==o||l!==c){var c=l;r(l)?i.call(e,l,1):n(e,l)}}return e}e.exports=l},function(e,t,a){e.exports=a(0)(2121)},function(e,t,a){e.exports=a(0)(242)},function(e,t,a){"use strict";var n="undefined"!==typeof self?self:"undefined"!==typeof window?window:void 0,r=n.AbortController,o=n.AbortSignal;e.exports=r,e.exports.AbortSignal=o,e.exports.default=r},,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(504)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(499)},function(e,t,a){e.exports={"label-editor":"hrpt-routes-label-template-components-label-ck-editor-plugins-label-template-styles-label-editor"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(26)},function(e,t,a){e.exports=a(0)(43)},function(e,t,a){e.exports=a(0)(277)},function(e,t,a){var n=a(468),r=n(function(e,t,a){return e+(a?"-":"")+t.toLowerCase()});e.exports=r},function(e,t,a){var n=a(469),r=a(470),o=a(473),i="['\u2019]",l=RegExp(i,"g");function c(e){return function(t){return n(o(r(t).replace(l,"")),e,"")}}e.exports=c},function(e,t){function a(e,t,a,n){var r=-1,o=null==e?0:e.length;n&&o&&(a=e[++r]);while(++r<o)a=t(a,e[r],r,e);return a}e.exports=a},function(e,t,a){var n=a(471),r=a(203),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,i="\\u0300-\\u036f",l="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",p=i+l+c,s="["+p+"]",u=RegExp(s,"g");function d(e){return e=r(e),e&&e.replace(o,n).replace(u,"")}e.exports=d},function(e,t,a){var n=a(472),r={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},o=n(r);e.exports=o},function(e,t){function a(e){return function(t){return null==e?void 0:e[t]}}e.exports=a},function(e,t,a){var n=a(474),r=a(475),o=a(203),i=a(476);function l(e,t,a){return e=o(e),t=a?void 0:t,void 0===t?r(e)?i(e):n(e):e.match(t)||[]}e.exports=l},function(e,t){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function n(e){return e.match(a)||[]}e.exports=n},function(e,t){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function n(e){return a.test(e)}e.exports=n},function(e,t){var a="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",i=n+r+o,l="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",p="\\xac\\xb1\\xd7\\xf7",s="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",u="\\u2000-\\u206f",d=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="A-Z\\xc0-\\xd6\\xd8-\\xde",b="\\ufe0e\\ufe0f",f=p+s+u+d,h="['\u2019]",g="["+f+"]",y="["+i+"]",v="\\d+",T="["+l+"]",O="["+c+"]",k="[^"+a+f+v+l+c+m+"]",x="\\ud83c[\\udffb-\\udfff]",j="(?:"+y+"|"+x+")",w="[^"+a+"]",E="(?:\\ud83c[\\udde6-\\uddff]){2}",L="[\\ud800-\\udbff][\\udc00-\\udfff]",C="["+m+"]",D="\\u200d",N="(?:"+O+"|"+k+")",I="(?:"+C+"|"+k+")",R="(?:"+h+"(?:d|ll|m|re|s|t|ve))?",S="(?:"+h+"(?:D|LL|M|RE|S|T|VE))?",A=j+"?",P="["+b+"]?",z="(?:"+D+"(?:"+[w,E,L].join("|")+")"+P+A+")*",U="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",q="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",B=P+A+z,H="(?:"+[T,E,L].join("|")+")"+B,_=RegExp([C+"?"+O+"+"+R+"(?="+[g,C,"$"].join("|")+")",I+"+"+S+"(?="+[g,C+N,"$"].join("|")+")",C+"?"+N+"+"+R,C+"+"+S,q,U,v,H].join("|"),"g");function F(e){return e.match(_)||[]}e.exports=F},function(e,t){function a(e,t){for(var a in t)e.setAttribute(a,t[a])}function n(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function r(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,o){var i=document.head||document.getElementsByTagName("head")[0],l=document.createElement("script");"function"===typeof t&&(o=t,t={}),t=t||{},o=o||function(){},l.type=t.type||"text/javascript",l.charset=t.charset||"utf8",l.async=!("async"in t)||!!t.async,l.src=e,t.attrs&&a(l,t.attrs),t.text&&(l.text=""+t.text);var c="onload"in l?n:r;c(l,o),l.onload||n(l,o),i.appendChild(l)}},function(e,t,a){"use strict";e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return/^[a-z][a-z0-9+.-]*:/.test(e)}}]]);