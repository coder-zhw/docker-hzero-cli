(window["webpackJsonppackages_hzero_front_hwfp_name_"]=window["webpackJsonppackages_hzero_front_hwfp_name_"]||[]).push([[35],{143:function(t,e,n){t.exports=n(0)(198)},152:function(t,e,n){t.exports=n(127)(2563)},153:function(t,e,n){t.exports=n(0)(1169)},154:function(t,e,n){"use strict";function o(t,e,n,o,a){var r={};return Object.keys(o).forEach(function(t){r[t]=o[t]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,o){return o(t,e,n)||n},r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}n.d(e,"a",function(){return o})},158:function(t,e,n){t.exports=n(0)(116)},162:function(t,e,n){t.exports=n(0)(82)},164:function(t,e,n){t.exports=n(0)(1161)},165:function(t,e,n){t.exports=n(0)(1168)},166:function(t,e,n){t.exports=n(0)(37)},167:function(t,e,n){t.exports=n(0)(1155)},169:function(t,e,n){t.exports=n(0)(829)},173:function(t,e,n){t.exports=n(127)(2648)},174:function(t,e,n){t.exports=n(0)(34)},176:function(t,e,n){t.exports=n(0)(274)},177:function(t,e,n){t.exports=n(0)(1167)},180:function(t,e,n){t.exports=n(0)(604)},181:function(t,e,n){t.exports=n(0)(130)},184:function(t,e,n){t.exports=n(0)(182)},185:function(t,e,n){t.exports=n(0)(661)},195:function(t,e,n){t.exports=n(0)(849)},196:function(t,e,n){t.exports=n(0)(328)},197:function(t,e,n){t.exports=n(0)(270)},198:function(t,e,n){t.exports=n(0)(170)},199:function(t,e,n){t.exports=n(0)(324)},200:function(t,e,n){t.exports=n(0)(386)},201:function(t,e,n){t.exports=n(0)(387)},204:function(t,e,n){t.exports=n(0)(868)},205:function(t,e,n){t.exports=n(0)(2092)},207:function(t,e,n){t.exports=n(0)(325)},208:function(t,e,n){t.exports=n(0)(209)},209:function(t,e,n){t.exports=n(127)(2662)},210:function(t,e,n){t.exports=n(0)(241)},211:function(t,e,n){t.exports=n(0)(235)},212:function(t,e,n){t.exports=n(0)(151)},213:function(t,e,n){t.exports=n(127)(1367)},214:function(t,e,n){t.exports=n(0)(582)},215:function(t,e,n){t.exports=n(0)(127)},216:function(t,e,n){t.exports=n(0)(484)},217:function(t,e,n){t.exports=n(0)(2129)},218:function(t,e,n){t.exports=n(0)(385)},219:function(t,e,n){t.exports=n(0)(156)},220:function(t,e,n){t.exports=n(0)(255)},221:function(t,e,n){t.exports=n(0)(1960)},222:function(t,e,n){t.exports=n(0)(298)},223:function(t,e,n){t.exports=n(0)(1132)},224:function(t,e,n){t.exports=n(0)(580)},225:function(t,e,n){t.exports=n(0)(128)},226:function(t,e,n){t.exports=n(0)(108)},227:function(t,e,n){t.exports=n(0)(472)},228:function(t,e,n){t.exports=n(0)(873)},229:function(t,e,n){t.exports=n(0)(2130)},232:function(t,e,n){t.exports=n(0)(1761)},243:function(t,e,n){t.exports=n(0)(1974)},322:function(t,e,n){t.exports=n(0)(2095)},323:function(t,e,n){t.exports=n(0)(1156)},67:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return N});n(322);var o,a,r,i,c,s=n(323),p=(n(193),n(164)),u=n(147),f=n(148),m=n(150),d=n(149),l=n(151),x=n(154),g=n(1),v=n.n(g),h=n(232),y=n(152),b=n(251),w=n(146),I=n(142),k=n(144),D="".concat(k["e"],"/v1"),N=(o=Object(h["connect"])(function(t){var e=t.monitor;return{monitor:e}}),a=Object(y["Bind"])(),o((c=function(t){function e(){var t,n;Object(u["a"])(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return n=Object(m["a"])(this,(t=Object(d["a"])(e)).call.apply(t,[this].concat(a))),n.state={forecastData:""},n.processImage=void 0,n.getForecastData=function(t){var e=[];if(t)for(var o=n.processImage,a=0;a<t.length;a+=1){var r=n.getForecastDiagram(0,o.offsetTop,t[a]);e.push(r)}return e},n}return Object(l["a"])(e,t),Object(f["a"])(e,[{key:"componentDidMount",value:function(){this.loadForecastDiagram()}},{key:"loadForecastDiagram",value:function(){var t=this,e=this.props,n=e.dispatch,o=e.tenantId,a=e.match;n({type:"monitor/fetchForecast",payload:{tenantId:o,id:a.params.id}}).then(function(e){e&&t.setState({forecastData:e})})}},{key:"getForecastDiagramTRs",value:function(t){var e=[],n=t.history||[],o=t.forecast;if(t.executed||n)for(var a=0;a<n.length;a+=1){var r=n[a].assigneeName||"",i=n[a].positionName||"",c=n[a].unitName||"";e.push({assigneeName:r,positionName:i,unitName:c,action:n[a].action,endTime:n[a].endTime,id:n[a].id,flag:!0})}if(o)for(var s=0;s<o.length;s+=1){var p=o[s].employeeCode||"",u=o[s].positionName||"",f=o[s].unitName||"";e.push({assigneeName:o[s].name,employeeCode:p,positionName:u,unitName:f,action:"",endTime:"",flag:!1})}return e}},{key:"getForecastDiagramContent",value:function(t){var e=this.getForecastDiagramTRs(t),n=[{title:w["a"].get("hwfp.common.model.approval.owner").d("\u5ba1\u6279\u4eba"),dataIndex:"assigneeName",render:function(t,e){return v.a.createElement("span",null,e.flag?"".concat(e.assigneeName):"".concat(e.assigneeName,"(").concat(e.employeeCode,")"))}},{title:w["a"].get("entity.position.name").d("\u5c97\u4f4d\u540d\u79f0"),dataIndex:"positionName"},{title:w["a"].get("entity.department.name").d("\u90e8\u95e8\u540d\u79f0"),dataIndex:"unitName"},{title:w["a"].get("hwfp.common.model.approval.action").d("\u5ba1\u6279\u52a8\u4f5c"),dataIndex:"action",render:b["a"]},{title:w["a"].get("hwfp.common.model.approval.time").d("\u5ba1\u6279\u65f6\u95f4"),dataIndex:"endTime"}];return v.a.createElement("div",{key:t.taskId},v.a.createElement(p["default"],{bordered:!0,columns:n,dataSource:e,pagination:!1}))}},{key:"getForecastDiagram",value:function(t,e,n){var o=n.graphicInfo,a=o.x+t,r=o.y+e;return v.a.createElement(s["default"],{content:this.getForecastDiagramContent(n),title:w["a"].get("hwfp.common.model.approval.record").d("\u5ba1\u6279\u8bb0\u5f55"),key:n.taskId},v.a.createElement("div",{id:n.taskId,name:"svgDiv",style:{width:o.width,height:o.height,position:"absolute",left:a,top:r}}))}},{key:"processImageSrc",value:function(){var t=this.props,e=t.tenantId,n=t.match,o=t.uselessParam,a=Object(I["d"])("access_token");return"".concat(k["a"]).concat(D,"/").concat(e,"/process/instance/monitor/diagram/").concat(n.params.id,"?access_token=").concat(a,"&t=").concat(o)}},{key:"render",value:function(){var t=this,e=this.state.forecastData;return v.a.createElement("div",{id:"processImg",style:{overflow:"scroll"},ref:function(e){t.processImage=e}},v.a.createElement("img",{alt:w["a"].get("hwfp.common.model.process.graph").d("\u6d41\u7a0b\u56fe"),id:"svg",type:"image/svg+xml",src:this.processImageSrc()}),this.getForecastData(e))}}]),e}(g["Component"]),i=c,Object(x["a"])(i.prototype,"processImageSrc",[a],Object.getOwnPropertyDescriptor(i.prototype,"processImageSrc"),i.prototype),r=i))||r)}}]);