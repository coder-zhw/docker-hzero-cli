(window["webpackJsonppackages_hzero_front_hitf_name_"]=window["webpackJsonppackages_hzero_front_hitf_name_"]||[]).push([[34],{134:function(t,e,n){"use strict";n.d(e,"a",function(){return y});var a=n(2),r=n.n(a),o=n(31),i=n(32),c=(n(189),n(160)),d=n(180),s=n.n(d),l=n(169),u=n(135),p=n(133),h=n(132);function f(t){if(t.status>=200&&t.status<300)return t;var e=t.statusText,n=new Error(e);throw n.name=t.status,n.response=t,n}function m(t){return b.apply(this,arguments)}function b(){return b=Object(i["a"])(r.a.mark(function t(e){var n;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(501!==e.name){t.next=14;break}return t.prev=1,t.next=4,e.response.json();case 4:n=t.sent,dvaApp._store.dispatch({type:"error/updateState",payload:{normal501:n}}),dvaApp._store.dispatch(l["routerRedux"].push({pathname:"/exception/501"})),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](1),e;case 12:t.next=15;break;case 14:throw e;case 15:case"end":return t.stop()}},t,null,[[1,9]])})),b.apply(this,arguments)}c["default"].config({placement:"bottomRight"});var v={Pragma:"no-cache","Cache-Control":"no-cache"};function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={credentials:"include",headers:v},r=n.beforeCatch,i=t.startsWith("/api")||t.startsWith("http")?t:"".concat(p["a"]).concat(t),d=Object(o["a"])({},a,e);if("POST"!==d.method&&"PUT"!==d.method&&"DELETE"!==d.method&&"PATCH"!==d.method||(d.body instanceof FormData?d.headers=Object(o["a"])({Accept:"application/json"},d.headers):(d.headers=Object(o["a"])({Accept:"application/json","Content-Type":"application/json; charset=utf-8"},d.headers),d.body=JSON.stringify(d.body))),d.query){var b=d.query;"GET"===d.method&&(b=Object(h["c"])(d.query)),i=Object(h["d"])(i,b)}var O=Object(h["e"])();O&&(d.headers=Object(o["a"])({},d.headers,{Authorization:"bearer ".concat(O)}));var g=s()(i,d).then(f).then(function(t){return 204===t.status?{}:"blob"===d.responseType?t.blob():"text"===d.responseType?t.text():t.json()});return r&&(g=g.catch(r)),g=g.catch(m).catch(function(t){var e=t.name,n=Object(h["q"])("isErrorFlag");if(n||Object(h["x"])("isErrorFlag",!1),401===e){var a=encodeURIComponent(window.location.toString());return O?void y("".concat(p["j"],"/public/token/kickoff"),{method:"POST",query:{access_token:O}}).then(function(t){1===t.kickoff?(dvaApp._store.dispatch(l["routerRedux"].push({pathname:"/public/kickoff"})),Object(h["x"])("redirectUrl",a),Object(h["x"])("isErrorFlag",!1)):(dvaApp._store.dispatch(l["routerRedux"].push({pathname:"/public/unauthorized"})),Object(h["x"])("isErrorFlag",!0),Object(h["x"])("redirectUrl",a))}):(Object(h["v"])(),Object(h["w"])(),-1!==i.indexOf(p["b"])?void(p["m"].includes("?")?(window.location.href="".concat(p["m"],"&redirect_uri=").concat(a),Object(h["x"])("isErrorFlag",!1),Object(h["x"])("redirectUrl",a)):(window.location.href="".concat(p["m"],"?redirect_uri=").concat(a),h["x"].apply("isErrorFlag",!1),Object(h["x"])("redirectUrl",a))):void(n||(dvaApp._store.dispatch(l["routerRedux"].push({pathname:"/public/unauthorized"})),Object(h["x"])("isErrorFlag",!0),Object(h["x"])("redirectUrl",a))))}if(-1!==i.indexOf(p["b"]))return t;"TypeError"!==e?c["default"].error({message:"".concat(e),description:t.message}):c["default"].error({message:u["a"].get("hzero.common.notification.network.typeError").d("\u7f51\u7edc\u8bf7\u6c42\u5f02\u5e38"),description:u["a"].get("hzero.common.notification.typeError.description").d("\u8bf7\u7a0d\u540e\u91cd\u8bd5")})}),g}},143:function(t,e,n){"use strict";function a(t,e,n,a,r){var o={};return Object.keys(a).forEach(function(t){o[t]=a[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,a){return a(t,e,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}n.d(e,"a",function(){return a})},150:function(t,e,n){"use strict";n(144),n(172),n(141)},172:function(t,e,n){t.exports={"ant-modal":"ant-modal","ant-modal-wrap":"ant-modal-wrap","ant-modal-title":"ant-modal-title","ant-modal-content":"ant-modal-content","ant-modal-close":"ant-modal-close","ant-modal-close-x":"ant-modal-close-x","ant-modal-header":"ant-modal-header","ant-modal-body":"ant-modal-body","ant-modal-footer":"ant-modal-footer","zoom-enter":"zoom-enter","zoom-appear":"zoom-appear","ant-modal-mask":"ant-modal-mask","ant-modal-mask-hidden":"ant-modal-mask-hidden","ant-modal-open":"ant-modal-open","vertical-center-modal":"vertical-center-modal","ant-confirm":"ant-confirm","ant-confirm-body-wrapper":"ant-confirm-body-wrapper","ant-confirm-body":"ant-confirm-body","ant-confirm-title":"ant-confirm-title","ant-confirm-content":"ant-confirm-content",anticon:"anticon","ant-confirm-btns":"ant-confirm-btns","ant-confirm-error":"ant-confirm-error","ant-confirm-warning":"ant-confirm-warning","ant-confirm-confirm":"ant-confirm-confirm","ant-confirm-info":"ant-confirm-info","ant-confirm-success":"ant-confirm-success"}},25:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return C});n(150);var a,r,o,i,c,d,s,l=n(151),u=(n(141),n(145)),p=n(136),h=n(137),f=n(140),m=n(138),b=n(139),v=n(143),y=n(154),O=n.n(y),g=n(1),j=n.n(g),w=n(142),x=n(132),k=n(135),D=n(84),z=n(83),E=n(82),C=(a=Object(w["Bind"])(),r=Object(w["Bind"])(),o=Object(w["Bind"])(),i=Object(w["Bind"])(),c=Object(w["Bind"])(),s=function(t){function e(){var t,n;Object(p["a"])(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Object(f["a"])(this,(t=Object(m["a"])(e)).call.apply(t,[this].concat(r))),n.state=n.getInitState(),n}return Object(b["a"])(e,t),Object(h["a"])(e,[{key:"getInitState",value:function(){return{visible:!1,versionList:[],versionPage:{},detailList:[],versionLoading:!1,detailLoading:!1}}},{key:"fetchData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setState({versionLoading:!0});var n=this.props,a=n.entityCode,r=n.entityId,o={page:O()(e)?{}:e,entityCode:a,entityId:r};return Object(D["queryAuditVersion"])(o).then(function(e){Object(x["o"])(e)?t.setState({versionList:e.content||[],versionPage:Object(x["a"])(e),versionLoading:!1}):t.setState({versionLoading:!1})})}},{key:"fetchDetailData",value:function(t){var e=this.state.versionList;this.setState({detailLoading:!0,detailList:[]});var n=e.find(function(e){return e.auditDataId===t}),a=n.auditDataLineList;this.setState({detailList:a,detailLoading:!1})}},{key:"handleOpenModal",value:function(){this.setState({visible:!0}),this.fetchData()}},{key:"handleCloseModal",value:function(){this.setState(this.getInitState())}},{key:"render",value:function(){var t=this,e=this.props.columns,n=void 0===e?[]:e,a=this.state,r=a.visible,o=a.versionList,i=a.versionPage,c=a.detailList,d=a.versionLoading,s=a.detailLoading,p={dataSource:o,pagination:i,loading:d,onFetch:this.fetchDetailData,onChange:this.fetchData},h={dataSource:c,comparedData:n,loading:s};return j.a.createElement(g["Fragment"],null,j.a.createElement("a",{onClick:function(){return t.handleOpenModal()}},k["a"].get("hzero.common.components.dataAudit.viewHistory").d("\u67e5\u770b\u6570\u636e\u5386\u53f2")),r&&j.a.createElement(l["default"],{width:"50%",visible:r,destroyOnClose:!0,title:k["a"].get("hzero.common.components.dataAudit.changeHistory").d("\u6570\u636e\u53d8\u66f4\u5386\u53f2"),onCancel:this.handleCloseModal,footer:[j.a.createElement(u["default"],{key:"cancel",onClick:this.handleCloseModal},k["a"].get("hzero.common.button.close").d("\u5173\u95ed"))]},j.a.createElement("div",{style:{maxHeight:"60vh",overflowY:"scroll"}},j.a.createElement(z["default"],p),j.a.createElement(E["default"],h))))}}]),e}(g["Component"]),d=s,Object(v["a"])(d.prototype,"getInitState",[a],Object.getOwnPropertyDescriptor(d.prototype,"getInitState"),d.prototype),Object(v["a"])(d.prototype,"fetchData",[r],Object.getOwnPropertyDescriptor(d.prototype,"fetchData"),d.prototype),Object(v["a"])(d.prototype,"fetchDetailData",[o],Object.getOwnPropertyDescriptor(d.prototype,"fetchDetailData"),d.prototype),Object(v["a"])(d.prototype,"handleOpenModal",[i],Object.getOwnPropertyDescriptor(d.prototype,"handleOpenModal"),d.prototype),Object(v["a"])(d.prototype,"handleCloseModal",[c],Object.getOwnPropertyDescriptor(d.prototype,"handleCloseModal"),d.prototype),d)},82:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return y});n(170);var a,r,o=n(153),i=n(136),c=n(137),d=n(140),s=n(138),l=n(139),u=n(143),p=n(154),h=n.n(p),f=n(1),m=n.n(f),b=n(135),v=n(142),y=(a=Object(v["Bind"])(),r=function(t){function e(){return Object(i["a"])(this,e),Object(d["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(c["a"])(e,[{key:"renderField",value:function(t,e){if(e)return e;var n=this.props.comparedData,a=t;if(n.length&&a){var r=n.find(function(t){return t.dataIndex==a});!h()(r)&&r.title&&(a=r.title)}return a}},{key:"render",value:function(){var t=this,e=this.props.dataSource,n=[{title:b["a"].get("hzero.common.components.dataAudit.field").d("\u5b57\u6bb5"),dataIndex:"fieldCode",width:100,render:function(e,n){var a=n.displayName;return t.renderField(e,a)}},{title:b["a"].get("hzero.common.components.dataAudit.oldValue").d("\u539f\u503c"),dataIndex:"fieldValueOld",width:150,render:function(t,e){var n=e.fieldValueOldMeaning,a=e.fieldValueNewMeaning,r=t;return n&&a&&(r=n),r}},{title:b["a"].get("hzero.common.components.dataAudit.newValue").d("\u73b0\u503c"),dataIndex:"fieldValueNew",width:150,render:function(t,e){var n=e.fieldValueOldMeaning,a=e.fieldValueNewMeaning,r=t;return n&&a&&(r=a),r}},{title:b["a"].get("hzero.common.explain").d("\u8bf4\u660e"),dataIndex:"remark",width:100}];return m.a.createElement(o["default"],{rowKey:"auditDataLineId",bordered:!0,columns:n,dataSource:e,style:{marginTop:"50px"}})}}]),e}(f["PureComponent"]),Object(u["a"])(r.prototype,"renderField",[a],Object.getOwnPropertyDescriptor(r.prototype,"renderField"),r.prototype),r)},83:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return p});n(170);var a=n(153),r=n(136),o=n(137),i=n(140),c=n(138),d=n(139),s=n(1),l=n.n(s),u=n(135),p=function(t){function e(){return Object(r["a"])(this,e),Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"render",value:function(){var t=this.props,e=t.dataSource,n=t.loading,r=t.onFetch,o=t.pagination,i=t.onChange,c=[{title:u["a"].get("hzero.common.components.dataAudit.version").d("\u7248\u672c"),dataIndex:"entityVersion",width:200,render:function(t,e){var n=e.auditDataId;return l.a.createElement("a",{onClick:function(){return r(n)}},t)}},{title:u["a"].get("hzero.common.components.dataAudit.operationType").d("\u64cd\u4f5c\u7c7b\u578b"),dataIndex:"auditTypeMeaning",width:200},{title:u["a"].get("hzero.common.explain").d("\u8bf4\u660e"),dataIndex:"remark",width:100}];return l.a.createElement(a["default"],{rowKey:"auditDataId",bordered:!0,columns:c,dataSource:e,pagination:o,loading:n,onChange:function(t){return i(t)}})}}]),e}(s["PureComponent"])},84:function(t,e,n){"use strict";n.r(e),n.d(e,"queryAuditVersion",function(){return p});var a=n(2),r=n.n(a),o=n(31),i=n(32),c=n(134),d=n(133),s=n(132),l=Object(s["h"])(),u=Object(s["t"])();function p(t){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(r.a.mark(function t(e){var n;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(s["u"])(e),t.abrupt("return",Object(c["a"])(u?"".concat(d["h"],"/v1/").concat(l,"/audit-datas"):"".concat(d["h"],"/v1/audit-datas"),{method:"GET",query:Object(o["a"])({},n)}));case 2:case"end":return t.stop()}},t)})),h.apply(this,arguments)}}}]);