(window["webpackJsonppackages_hzero_front_hitf_name_"]=window["webpackJsonppackages_hzero_front_hitf_name_"]||[]).push([[9,45],[,,,function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return B});a(150);var n,o,r,i,c,s,l,u,p,d,f,m,h,v=a(151),b=(a(141),a(145)),g=a(31),y=a(246),O=a(136),j=a(137),x=a(140),D=a(138),w=a(139),C=a(143),k=a(1),z=a.n(k),E=a(231),I=a(176),A=a.n(I),_=a(142),V=a(135),P=a(132),L=a(201),S=a(39),B=(n=Object(E["connect"])(function(e){var t=e.services,a=e.loading;return{services:t,loading:a.effects["services/queryAlternative"]||a.effects["services/deleteAlternative"],confirmLoading:a.effects["services/saveAlternative"]}}),o=Object(_["Bind"])(),r=Object(_["Bind"])(),i=Object(_["Bind"])(),c=Object(_["Bind"])(),s=Object(_["Bind"])(),l=Object(_["Bind"])(),u=Object(_["Bind"])(),p=Object(_["Bind"])(),d=Object(_["Bind"])(),n((h=function(e){function t(){var e,a;Object(O["a"])(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=Object(x["a"])(this,(e=Object(D["a"])(t)).call.apply(e,[this].concat(o))),a.state={visible:!1},a}return Object(w["a"])(t,e),Object(j["a"])(t,[{key:"fetchAlterativeData",value:function(){var e=this.props,t=e.dispatch,a=e.paramId;t({type:"services/queryAlternative",payload:a})}},{key:"handleCreateAlternative",value:function(){var e=this.props,t=e.dispatch,a=e.services,n=a.alternativeData,o=a.documentData,r=e.interfaceId,i=e.paramId;t({type:"services/updateState",payload:{alternativeData:[{defaultFlag:0,documentId:o.documentId,interfaceId:r,paramId:i,paramValue:"",paramValueId:A()(),remark:"",_status:"create"}].concat(Object(y["a"])(n))}})}},{key:"handleEditLine",value:function(e,t){var a=this.props,n=a.dispatch,o=a.services.alternativeData,r=void 0===o?[]:o,i=r.map(function(a){return a.paramValueId===e.paramValueId?Object(g["a"])({},a,{_status:t?"update":""}):a});n({type:"services/updateState",payload:{alternativeData:Object(y["a"])(i)}})}},{key:"handleSaveAlternative",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.services.alternativeData,o=t.paramId,r=n.some(function(e){return"_status"in e});if(r){var i=Object(P["n"])(n,["paramValueId"]);Array.isArray(i)&&0!==i.length&&(i=i.map(function(e){var t=Object(g["a"])({},e);return"_status"in t&&delete t._status,t}),a({type:"services/saveAlternative",payload:{alternativeList:i,paramId:o}}).then(function(t){t&&(L["a"].success(),e.fetchAlterativeData())}))}else this.handleCloseModal()}},{key:"handleCleanLine",value:function(e){var t=this.props,a=t.dispatch,n=t.services.alternativeData,o=n.filter(function(t){return t.paramValueId!==e.paramValueId});a({type:"services/updateState",payload:{alternativeData:Object(y["a"])(o)}})}},{key:"handleDelete",value:function(e){var t=this,a=this.props,n=a.dispatch,o=a.paramId;n({type:"services/deleteAlternative",payload:Object(g["a"])({},e,{paramId:o})}).then(function(e){e&&(L["a"].success(),t.fetchAlterativeData())})}},{key:"changeDefaultFlag",value:function(e,t){var a=this.props,n=a.dispatch,o=a.services.alternativeData,r=Object(y["a"])(o);r=r.map(function(a){var n=Object(g["a"])({},a);return n.defaultFlag=e&&a.paramValueId===t.paramValueId?1:0,n}),n({type:"services/updateState",payload:{alternativeData:Object(y["a"])(r)}})}},{key:"handleOpenModal",value:function(){this.setState({visible:!0}),this.fetchAlterativeData()}},{key:"handleCloseModal",value:function(){var e=this.props.dispatch;this.setState({visible:!1},function(){e({type:"services/updateState",payload:{alternativeData:[]}})})}},{key:"render",value:function(){var e=this,t=this.state.visible,a=this.props,n=a.services.alternativeData,o=a.loading,r=a.confirmLoading,i={loading:o,dataSource:n,onEditLine:this.handleEditLine,onCleanLine:this.handleCleanLine,onDelete:this.handleDelete,onChangeDefaultFlag:this.changeDefaultFlag};return z.a.createElement(k["Fragment"],null,z.a.createElement("a",{onClick:function(){return e.handleOpenModal()}},V["a"].get("hitf.document.view.title.alternative").d("\u5907\u9009\u503c")),t&&z.a.createElement(v["default"],{width:700,visible:t,destroyOnClose:!0,title:V["a"].get("hitf.document.view.title.alternative").d("\u5907\u9009\u503c"),onCancel:this.handleCloseModal,onOk:this.handleSaveAlternative,maskClosable:!1,confirmLoading:r},z.a.createElement("div",{className:"table-list-operator"},z.a.createElement(b["default"],{type:"primary",onClick:this.handleCreateAlternative},V["a"].get("hzero.common.button.create").d("\u65b0\u5efa"))),z.a.createElement(S["default"],i)))}}]),t}(k["Component"]),m=h,Object(C["a"])(m.prototype,"fetchAlterativeData",[o],Object.getOwnPropertyDescriptor(m.prototype,"fetchAlterativeData"),m.prototype),Object(C["a"])(m.prototype,"handleCreateAlternative",[r],Object.getOwnPropertyDescriptor(m.prototype,"handleCreateAlternative"),m.prototype),Object(C["a"])(m.prototype,"handleEditLine",[i],Object.getOwnPropertyDescriptor(m.prototype,"handleEditLine"),m.prototype),Object(C["a"])(m.prototype,"handleSaveAlternative",[c],Object.getOwnPropertyDescriptor(m.prototype,"handleSaveAlternative"),m.prototype),Object(C["a"])(m.prototype,"handleCleanLine",[s],Object.getOwnPropertyDescriptor(m.prototype,"handleCleanLine"),m.prototype),Object(C["a"])(m.prototype,"handleDelete",[l],Object.getOwnPropertyDescriptor(m.prototype,"handleDelete"),m.prototype),Object(C["a"])(m.prototype,"changeDefaultFlag",[u],Object.getOwnPropertyDescriptor(m.prototype,"changeDefaultFlag"),m.prototype),Object(C["a"])(m.prototype,"handleOpenModal",[p],Object.getOwnPropertyDescriptor(m.prototype,"handleOpenModal"),m.prototype),Object(C["a"])(m.prototype,"handleCloseModal",[d],Object.getOwnPropertyDescriptor(m.prototype,"handleCloseModal"),m.prototype),f=m))||f)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return j});a(202);var n,o,r=a(203),i=(a(149),a(147)),c=(a(146),a(148)),s=(a(241),a(308)),l=a(136),u=a(137),p=a(140),d=a(138),f=a(139),m=a(143),h=a(1),v=a.n(h),b=a(142),g=a(135),y=a(186),O=a(248),j=(n=Object(b["Bind"])(),o=function(e){function t(){return Object(l["a"])(this,t),Object(p["a"])(this,Object(d["a"])(t).apply(this,arguments))}return Object(f["a"])(t,e),Object(u["a"])(t,[{key:"changeDefaultValue",value:function(e,t){var a=this.props.onChangeDefaultFlag;a(e.target.checked,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.dataSource,n=t.loading,o=t.onEditLine,l=t.onCleanLine,u=t.onDelete,p=[{title:g["a"].get("hitf.services.model.services.requiredFlag").d("\u662f\u5426\u5fc5\u586b"),dataIndex:"defaultFlag",width:70,align:"center",render:function(t,a){return["update","create"].includes(a._status)?v.a.createElement(s["default"],{checked:1===t,onChange:function(t){return e.changeDefaultValue(t,a)}}):v.a.createElement(s["default"],{disabled:!0,checked:1===t})}},{title:g["a"].get("hitf.services.model.services.param.alternative.value").d("\u53c2\u6570\u6f5c\u5728\u503c"),dataIndex:"paramValue",width:150,render:function(e,t){return["update","create"].includes(t._status)?v.a.createElement(i["default"].Item,null,t.$form.getFieldDecorator("paramValue",{rules:[{required:!0,message:g["a"].get("hzero.common.validation.notNull",{name:g["a"].get("hitf.services.model.services.param.alternative.value").d("\u53c2\u6570\u6f5c\u5728\u503c")})},{max:128,message:g["a"].get("hzero.common.validation.max",{max:128})}],initialValue:e})(v.a.createElement(c["default"],null))):e}},{title:g["a"].get("hitf.services.model.services.remark").d("\u8bf4\u660e"),dataIndex:"remark",width:150,render:function(e,t){return["update","create"].includes(t._status)?v.a.createElement(i["default"].Item,null,t.$form.getFieldDecorator("remark",{initialValue:e})(v.a.createElement(c["default"],null))):e}},{title:g["a"].get("hzero.common.button.action").d("\u64cd\u4f5c"),width:90,render:function(e,t){var a=[];return"create"===t._status?a.push({key:"clean",ele:v.a.createElement("a",{onClick:function(){return l(t)}},g["a"].get("hzero.common.button.clean").d("\u6e05\u9664")),len:2,title:g["a"].get("hzero.common.button.clean").d("\u6e05\u9664")}):"update"===t._status?a.push({key:"cancel",ele:v.a.createElement("a",{onClick:function(){return o(t,!1)}},g["a"].get("hzero.common.status.cancel").d("\u53d6\u6d88")),len:2,title:g["a"].get("hzero.common.status.cancel").d("\u53d6\u6d88")}):a.push({key:"edit",ele:v.a.createElement("a",{onClick:function(){return o(t,!0)}},g["a"].get("hzero.common.status.edit").d("\u7f16\u8f91")),len:2,title:g["a"].get("hzero.common.status.edit").d("\u7f16\u8f91")},{key:"delete",ele:v.a.createElement(r["default"],{title:g["a"].get("hzero.common.message.confirm.delete").d("\u662f\u5426\u5220\u9664\u6b64\u6761\u8bb0\u5f55\uff1f"),placement:"topRight",onConfirm:function(){return u(t)}},v.a.createElement("a",null,g["a"].get("hzero.common.button.delete").d("\u5220\u9664"))),len:2,title:g["a"].get("hzero.common.button.delete").d("\u5220\u9664")}),Object(y["d"])(a,t)}}];return v.a.createElement(O["a"],{bordered:!0,rowKey:"paramValueId",loading:n,columns:p,dataSource:a,pagination:!1})}}]),t}(h["PureComponent"]),Object(m["a"])(o.prototype,"changeDefaultValue",[n],Object.getOwnPropertyDescriptor(o.prototype,"changeDefaultValue"),o.prototype),o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(1169)},function(e,t,a){e.exports=a(123)(2563)},function(e,t,a){"use strict";function n(e,t,a,n,o){var r={};return Object.keys(n).forEach(function(e){r[e]=n[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=a.slice().reverse().reduce(function(a,n){return n(e,t,a)||a},r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}a.d(t,"a",function(){return n})},function(e,t,a){e.exports=a(0)(198)},function(e,t,a){e.exports=a(0)(111)},,function(e,t,a){e.exports=a(0)(1147)},function(e,t,a){e.exports=a(0)(293)},,function(e,t,a){"use strict";a(144),a(172),a(141)},function(e,t,a){e.exports=a(0)(1154)},,function(e,t,a){e.exports=a(0)(1161)},,,,,,function(e,t,a){e.exports=a(0)(116)},function(e,t,a){e.exports=a(0)(1155)},,,function(e,t,a){e.exports=a(0)(1168)},function(e,t,a){e.exports=a(0)(37)},function(e,t,a){e.exports=a(0)(82)},,,,,,function(e,t,a){e.exports=a(0)(34)},function(e,t,a){e.exports={"ant-modal":"ant-modal","ant-modal-wrap":"ant-modal-wrap","ant-modal-title":"ant-modal-title","ant-modal-content":"ant-modal-content","ant-modal-close":"ant-modal-close","ant-modal-close-x":"ant-modal-close-x","ant-modal-header":"ant-modal-header","ant-modal-body":"ant-modal-body","ant-modal-footer":"ant-modal-footer","zoom-enter":"zoom-enter","zoom-appear":"zoom-appear","ant-modal-mask":"ant-modal-mask","ant-modal-mask-hidden":"ant-modal-mask-hidden","ant-modal-open":"ant-modal-open","vertical-center-modal":"vertical-center-modal","ant-confirm":"ant-confirm","ant-confirm-body-wrapper":"ant-confirm-body-wrapper","ant-confirm-body":"ant-confirm-body","ant-confirm-title":"ant-confirm-title","ant-confirm-content":"ant-confirm-content",anticon:"anticon","ant-confirm-btns":"ant-confirm-btns","ant-confirm-error":"ant-confirm-error","ant-confirm-warning":"ant-confirm-warning","ant-confirm-confirm":"ant-confirm-confirm","ant-confirm-info":"ant-confirm-info","ant-confirm-success":"ant-confirm-success"}},,function(e,t,a){e.exports=a(0)(130)},,function(e,t,a){e.exports=a(123)(2670)},,function(e,t,a){e.exports=a(0)(156)},,,function(e,t,a){e.exports=a(0)(274)},function(e,t,a){e.exports=a(123)(2648)},function(e,t,a){e.exports=a(0)(604)},function(e,t,a){e.exports=a(0)(1167)},,,function(e,t,a){e.exports=a(0)(829)},function(e,t,a){e.exports=a(0)(182)},,function(e,t,a){e.exports=a(0)(2130)},function(e,t,a){e.exports=a(0)(661)},function(e,t,a){e.exports=a(0)(2092)},,function(e,t,a){e.exports=a(0)(849)},function(e,t,a){e.exports=a(0)(328)},function(e,t,a){e.exports=a(0)(270)},function(e,t,a){e.exports=a(0)(170)},function(e,t,a){e.exports=a(0)(324)},function(e,t,a){e.exports=a(0)(386)},function(e,t,a){e.exports=a(0)(387)},function(e,t,a){"use strict";var n=a(31),o=(a(189),a(160)),r=a(161),i=a(135);function c(e){var t=e||{},a=t.message,c=t.description,s=Object(r["a"])(t,["message","description"]);o["default"].success(Object(n["a"])({message:a||i["a"].get("hzero.common.notification.success").d("\u64cd\u4f5c\u6210\u529f"),description:c,duration:2.5,className:"success"},s))}function s(e){var t=e||{},a=t.message,c=t.description,s=Object(r["a"])(t,["message","description"]);o["default"].error(Object(n["a"])({message:a||i["a"].get("hzero.common.notification.error").d("\u64cd\u4f5c\u5931\u8d25"),description:c,duration:2.5,className:"error"},s))}function l(e){var t=e||{},a=t.message,c=t.description,s=Object(r["a"])(t,["message","description"]);o["default"].warning(Object(n["a"])({message:a||i["a"].get("hzero.common.notification.warn").d("\u64cd\u4f5c\u5f02\u5e38"),description:c,duration:2.5,className:"warn"},s))}function u(e){var t=e||{},a=t.message,i=t.description,c=Object(r["a"])(t,["message","description"]);o["default"].info(Object(n["a"])({message:a,description:i,duration:2.5,className:"info"},c))}t["a"]={success:c,error:s,warning:l,info:u}},function(e,t,a){e.exports=a(0)(2094)},function(e,t,a){e.exports=a(0)(535)},function(e,t,a){e.exports=a(0)(325)},function(e,t,a){e.exports=a(0)(1132)},,,,function(e,t,a){e.exports=a(123)(2662)},function(e,t,a){e.exports=a(0)(241)},function(e,t,a){e.exports=a(0)(151)},function(e,t,a){e.exports=a(123)(1367)},function(e,t,a){e.exports=a(0)(127)},function(e,t,a){e.exports=a(0)(484)},function(e,t,a){e.exports=a(0)(2129)},function(e,t,a){e.exports=a(0)(235)},function(e,t,a){e.exports=a(0)(209)},function(e,t,a){e.exports=a(0)(868)},function(e,t,a){e.exports=a(0)(385)},function(e,t,a){e.exports=a(0)(255)},function(e,t,a){e.exports=a(0)(1960)},function(e,t,a){e.exports=a(0)(298)},function(e,t,a){e.exports=a(0)(580)},function(e,t,a){e.exports=a(0)(582)},function(e,t,a){e.exports=a(0)(128)},function(e,t,a){e.exports=a(0)(108)},function(e,t,a){e.exports=a(0)(472)},function(e,t,a){e.exports=a(0)(873)},,,function(e,t,a){e.exports=a(0)(1761)},,,,,,,,,,function(e,t,a){e.exports=a(0)(1974)},,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return k});var n,o,r,i,c,s=a(31),l=a(136),u=a(137),p=a(140),d=a(138),f=a(139),m=a(143),h=(a(149),a(147)),v=a(161),b=(a(170),a(153)),g=a(1),y=a.n(g),O=a(142),j=a(261),x=a.n(j),D=b["default"].TableRowContext,w=function(e){var t=e.form,a=e.fixed,n=e.record,o=Object(v["a"])(e,["form","fixed","record"]);return a||"create"!==n._status&&"update"!==n._status?y.a.createElement("tr",o):(n.$form=t,y.a.createElement(D.Provider,{value:t},y.a.createElement("tr",o)))},C=h["default"].create({fieldNameProp:null,onValuesChange:function(e,t,a){var n=e.onDataChange,o=e.record;n&&n(o,t,a)},mapProps:function(e){var t=e||{},a=(t.onDataChange,Object(v["a"])(t,["onDataChange"]));return a}})(w),k=(n=Object(O["Bind"])(),o=Object(O["Bind"])(),r=Object(O["Bind"])(),c=function(e){function t(){var e,a;Object(l["a"])(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=Object(p["a"])(this,(e=Object(d["a"])(t)).call.apply(e,[this].concat(o))),a.dataHasChange=!1,a}return Object(f["a"])(t,e),Object(u["a"])(t,[{key:"componentDidUpdate",value:function(e){var t=e.prevDataSource,a=this.props.dataSource;t!==a&&this.dataHasChange&&(this.dataHasChange=!1)}},{key:"render",value:function(){var e=this.props,t=(e.onRow,Object(v["a"])(e,["onRow"])),a={body:{row:C}},n=Object(s["a"])({components:a,rowClassName:x.a["hzero-edit-table"],onRow:this.onRow},t);return y.a.createElement(b["default"],n)}},{key:"handleDataChange",value:function(e,t,a){this.dataHasChange||(this.dataHasChange=!0);var n=this.props.onDataChange;n&&n(e,t,a)}},{key:"onRow",value:function(e,t){var a,n=this.props.onRow;return a=n?n(e,t):{},Object(s["a"])({record:e},a,{onDataChange:this.handleDataChange})}},{key:"hasDataChange",value:function(){return this.dataHasChange}}]),t}(y.a.Component),i=c,Object(m["a"])(i.prototype,"handleDataChange",[n],Object.getOwnPropertyDescriptor(i.prototype,"handleDataChange"),i.prototype),Object(m["a"])(i.prototype,"onRow",[o],Object.getOwnPropertyDescriptor(i.prototype,"onRow"),i.prototype),Object(m["a"])(i.prototype,"hasDataChange",[r],Object.getOwnPropertyDescriptor(i.prototype,"hasDataChange"),i.prototype),i)},,,,,,,,,,,,,function(e,t,a){e.exports={"hzero-edit-table":"components-edit-table-index-hzero-edit-table"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(0)(157)}]]);