(window["webpackJsonppackages_hzero_front_hitf_name_"]=window["webpackJsonppackages_hzero_front_hitf_name_"]||[]).push([[93],{134:function(t,e,a){"use strict";a.d(e,"a",function(){return y});var n=a(2),o=a.n(n),i=a(31),r=a(32),c=(a(189),a(160)),d=a(180),l=a.n(d),s=a(169),u=a(135),p=a(133),f=a(132);function m(t){if(t.status>=200&&t.status<300)return t;var e=t.statusText,a=new Error(e);throw a.name=t.status,a.response=t,a}function h(t){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(o.a.mark(function t(e){var a;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(501!==e.name){t.next=14;break}return t.prev=1,t.next=4,e.response.json();case 4:a=t.sent,dvaApp._store.dispatch({type:"error/updateState",payload:{normal501:a}}),dvaApp._store.dispatch(s["routerRedux"].push({pathname:"/exception/501"})),t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](1),e;case 12:t.next=15;break;case 14:throw e;case 15:case"end":return t.stop()}},t,null,[[1,9]])})),b.apply(this,arguments)}c["default"].config({placement:"bottomRight"});var v={Pragma:"no-cache","Cache-Control":"no-cache"};function y(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={credentials:"include",headers:v},o=a.beforeCatch,r=t.startsWith("/api")||t.startsWith("http")?t:"".concat(p["a"]).concat(t),d=Object(i["a"])({},n,e);if("POST"!==d.method&&"PUT"!==d.method&&"DELETE"!==d.method&&"PATCH"!==d.method||(d.body instanceof FormData?d.headers=Object(i["a"])({Accept:"application/json"},d.headers):(d.headers=Object(i["a"])({Accept:"application/json","Content-Type":"application/json; charset=utf-8"},d.headers),d.body=JSON.stringify(d.body))),d.query){var b=d.query;"GET"===d.method&&(b=Object(f["c"])(d.query)),r=Object(f["d"])(r,b)}var g=Object(f["e"])();g&&(d.headers=Object(i["a"])({},d.headers,{Authorization:"bearer ".concat(g)}));var O=l()(r,d).then(m).then(function(t){return 204===t.status?{}:"blob"===d.responseType?t.blob():"text"===d.responseType?t.text():t.json()});return o&&(O=O.catch(o)),O=O.catch(h).catch(function(t){var e=t.name,a=Object(f["q"])("isErrorFlag");if(a||Object(f["x"])("isErrorFlag",!1),401===e){var n=encodeURIComponent(window.location.toString());return g?void y("".concat(p["j"],"/public/token/kickoff"),{method:"POST",query:{access_token:g}}).then(function(t){1===t.kickoff?(dvaApp._store.dispatch(s["routerRedux"].push({pathname:"/public/kickoff"})),Object(f["x"])("redirectUrl",n),Object(f["x"])("isErrorFlag",!1)):(dvaApp._store.dispatch(s["routerRedux"].push({pathname:"/public/unauthorized"})),Object(f["x"])("isErrorFlag",!0),Object(f["x"])("redirectUrl",n))}):(Object(f["v"])(),Object(f["w"])(),-1!==r.indexOf(p["b"])?void(p["m"].includes("?")?(window.location.href="".concat(p["m"],"&redirect_uri=").concat(n),Object(f["x"])("isErrorFlag",!1),Object(f["x"])("redirectUrl",n)):(window.location.href="".concat(p["m"],"?redirect_uri=").concat(n),f["x"].apply("isErrorFlag",!1),Object(f["x"])("redirectUrl",n))):void(a||(dvaApp._store.dispatch(s["routerRedux"].push({pathname:"/public/unauthorized"})),Object(f["x"])("isErrorFlag",!0),Object(f["x"])("redirectUrl",n))))}if(-1!==r.indexOf(p["b"]))return t;"TypeError"!==e?c["default"].error({message:"".concat(e),description:t.message}):c["default"].error({message:u["a"].get("hzero.common.notification.network.typeError").d("\u7f51\u7edc\u8bf7\u6c42\u5f02\u5e38"),description:u["a"].get("hzero.common.notification.typeError.description").d("\u8bf7\u7a0d\u540e\u91cd\u8bd5")})}),O}},143:function(t,e,a){"use strict";function n(t,e,a,n,o){var i={};return Object.keys(n).forEach(function(t){i[t]=n[t]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=a.slice().reverse().reduce(function(a,n){return n(t,e,a)||a},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}a.d(e,"a",function(){return n})},150:function(t,e,a){"use strict";a(144),a(172),a(141)},172:function(t,e,a){t.exports={"ant-modal":"ant-modal","ant-modal-wrap":"ant-modal-wrap","ant-modal-title":"ant-modal-title","ant-modal-content":"ant-modal-content","ant-modal-close":"ant-modal-close","ant-modal-close-x":"ant-modal-close-x","ant-modal-header":"ant-modal-header","ant-modal-body":"ant-modal-body","ant-modal-footer":"ant-modal-footer","zoom-enter":"zoom-enter","zoom-appear":"zoom-appear","ant-modal-mask":"ant-modal-mask","ant-modal-mask-hidden":"ant-modal-mask-hidden","ant-modal-open":"ant-modal-open","vertical-center-modal":"vertical-center-modal","ant-confirm":"ant-confirm","ant-confirm-body-wrapper":"ant-confirm-body-wrapper","ant-confirm-body":"ant-confirm-body","ant-confirm-title":"ant-confirm-title","ant-confirm-content":"ant-confirm-content",anticon:"anticon","ant-confirm-btns":"ant-confirm-btns","ant-confirm-error":"ant-confirm-error","ant-confirm-warning":"ant-confirm-warning","ant-confirm-confirm":"ant-confirm-confirm","ant-confirm-info":"ant-confirm-info","ant-confirm-success":"ant-confirm-success"}},201:function(t,e,a){"use strict";var n=a(31),o=(a(189),a(160)),i=a(161),r=a(135);function c(t){var e=t||{},a=e.message,c=e.description,d=Object(i["a"])(e,["message","description"]);o["default"].success(Object(n["a"])({message:a||r["a"].get("hzero.common.notification.success").d("\u64cd\u4f5c\u6210\u529f"),description:c,duration:2.5,className:"success"},d))}function d(t){var e=t||{},a=e.message,c=e.description,d=Object(i["a"])(e,["message","description"]);o["default"].error(Object(n["a"])({message:a||r["a"].get("hzero.common.notification.error").d("\u64cd\u4f5c\u5931\u8d25"),description:c,duration:2.5,className:"error"},d))}function l(t){var e=t||{},a=e.message,c=e.description,d=Object(i["a"])(e,["message","description"]);o["default"].warning(Object(n["a"])({message:a||r["a"].get("hzero.common.notification.warn").d("\u64cd\u4f5c\u5f02\u5e38"),description:c,duration:2.5,className:"warn"},d))}function s(t){var e=t||{},a=e.message,r=e.description,c=Object(i["a"])(e,["message","description"]);o["default"].info(Object(n["a"])({message:a,description:r,duration:2.5,className:"info"},c))}e["a"]={success:c,error:d,warning:l,info:s}},264:function(t,e,a){t.exports={"top-tabs":"hitf-routes-services-document-index-top-tabs","sub-params-tabs":"hitf-routes-services-document-index-sub-params-tabs","hiam-interface-model-btns":"hitf-routes-services-document-index-hiam-interface-model-btns","hzero-codemirror":"hitf-routes-services-document-index-hzero-codemirror","hitf-view-modal":"hitf-routes-services-document-index-hitf-view-modal",wrapper:"hitf-routes-services-document-index-wrapper",demo:"hitf-routes-services-document-index-demo",alternative:"hitf-routes-services-document-index-alternative","hitf-remark-wrapper":"hitf-routes-services-document-index-hitf-remark-wrapper"}},281:function(t,e,a){"use strict";a(144),a(296),a(298),a(184)},296:function(t,e,a){t.exports={"ant-upload":"ant-upload","ant-upload-btn":"ant-upload-btn","ant-upload-select":"ant-upload-select","ant-upload-select-picture-card":"ant-upload-select-picture-card","ant-upload-drag":"ant-upload-drag","ant-upload-drag-hover":"ant-upload-drag-hover","ant-upload-disabled":"ant-upload-disabled","ant-upload-drag-container":"ant-upload-drag-container","ant-upload-drag-icon":"ant-upload-drag-icon",anticon:"anticon","ant-upload-text":"ant-upload-text","ant-upload-hint":"ant-upload-hint","anticon-plus":"anticon-plus","ant-upload-list":"ant-upload-list","ant-upload-list-item":"ant-upload-list-item","ant-upload-list-item-name":"ant-upload-list-item-name","ant-upload-list-item-info":"ant-upload-list-item-info","anticon-loading":"anticon-loading","anticon-paper-clip":"anticon-paper-clip","anticon-cross":"anticon-cross","ant-upload-list-item-error":"ant-upload-list-item-error","ant-upload-list-item-progress":"ant-upload-list-item-progress","ant-upload-list-picture":"ant-upload-list-picture","ant-upload-list-picture-card":"ant-upload-list-picture-card","ant-upload-list-item-file-name":"ant-upload-list-item-file-name","ant-upload-list-item-uploading":"ant-upload-list-item-uploading","ant-upload-list-item-thumbnail":"ant-upload-list-item-thumbnail","ant-upload-list-item-icon":"ant-upload-list-item-icon","ant-upload-list-item-action-remove":"ant-upload-list-item-action-remove","ant-upload-list-item-picture-card":"ant-upload-list-item-picture-card","ant-upload-list-item-actions":"ant-upload-list-item-actions","anticon-eye-o":"anticon-eye-o","anticon-download":"anticon-download","anticon-upload":"anticon-upload","anticon-picture":"anticon-picture","ant-upload-list-item-uploading-text":"ant-upload-list-item-uploading-text","ant-upload-success-icon":"ant-upload-success-icon","ant-upload-animate-enter":"ant-upload-animate-enter","ant-upload-animate-leave":"ant-upload-animate-leave","ant-upload-animate-inline-enter":"ant-upload-animate-inline-enter","ant-upload-animate-inline-leave":"ant-upload-animate-inline-leave",uploadAnimateIn:"uploadAnimateIn",uploadAnimateOut:"uploadAnimateOut",uploadAnimateInlineIn:"uploadAnimateInlineIn",uploadAnimateInlineOut:"uploadAnimateInlineOut"}},315:function(t,e,a){var n=a(316),o=n(function(t,e,a){return t+(a?"-":"")+e.toLowerCase()});t.exports=o},316:function(t,e,a){var n=a(317),o=a(318),i=a(321),r="['\u2019]",c=RegExp(r,"g");function d(t){return function(e){return n(i(o(e).replace(c,"")),t,"")}}t.exports=d},317:function(t,e){function a(t,e,a,n){var o=-1,i=null==t?0:t.length;n&&i&&(a=t[++o]);while(++o<i)a=e(a,t[o],o,t);return a}t.exports=a},318:function(t,e,a){var n=a(319),o=a(249),i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r="\\u0300-\\u036f",c="\\ufe20-\\ufe2f",d="\\u20d0-\\u20ff",l=r+c+d,s="["+l+"]",u=RegExp(s,"g");function p(t){return t=o(t),t&&t.replace(i,n).replace(u,"")}t.exports=p},319:function(t,e,a){var n=a(320),o={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},i=n(o);t.exports=i},320:function(t,e){function a(t){return function(e){return null==t?void 0:t[e]}}t.exports=a},321:function(t,e,a){var n=a(322),o=a(323),i=a(249),r=a(324);function c(t,e,a){return t=i(t),e=a?void 0:e,void 0===e?o(t)?r(t):n(t):t.match(e)||[]}t.exports=c},322:function(t,e){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function n(t){return t.match(a)||[]}t.exports=n},323:function(t,e){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function n(t){return a.test(t)}t.exports=n},324:function(t,e){var a="\\ud800-\\udfff",n="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",r=n+o+i,c="\\u2700-\\u27bf",d="a-z\\xdf-\\xf6\\xf8-\\xff",l="\\xac\\xb1\\xd7\\xf7",s="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",u="\\u2000-\\u206f",p=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="A-Z\\xc0-\\xd6\\xd8-\\xde",m="\\ufe0e\\ufe0f",h=l+s+u+p,b="['\u2019]",v="["+h+"]",y="["+r+"]",g="\\d+",O="["+c+"]",x="["+d+"]",w="[^"+a+h+g+c+d+f+"]",j="\\ud83c[\\udffb-\\udfff]",E="(?:"+y+"|"+j+")",k="[^"+a+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",U="[\\ud800-\\udbff][\\udc00-\\udfff]",T="["+f+"]",z="\\u200d",S="(?:"+x+"|"+w+")",A="(?:"+T+"|"+w+")",D="(?:"+b+"(?:d|ll|m|re|s|t|ve))?",R="(?:"+b+"(?:D|LL|M|RE|S|T|VE))?",_=E+"?",N="["+m+"]?",F="(?:"+z+"(?:"+[k,C,U].join("|")+")"+N+_+")*",I="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",P=N+_+F,H="(?:"+[O,C,U].join("|")+")"+P,M=RegExp([T+"?"+x+"+"+D+"(?="+[v,T,"$"].join("|")+")",A+"+"+R+"(?="+[v,T+S,"$"].join("|")+")",T+"?"+S+"+"+D,T+"+"+R,L,I,g,H].join("|"),"g");function B(t){return t.match(M)||[]}t.exports=B},325:function(t,e){function a(t,e){for(var a in e)t.setAttribute(a,e[a])}function n(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function o(t,e){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,t))}}t.exports=function(t,e,i){var r=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");"function"===typeof e&&(i=e,e={}),e=e||{},i=i||function(){},c.type=e.type||"text/javascript",c.charset=e.charset||"utf8",c.async=!("async"in e)||!!e.async,c.src=t,e.attrs&&a(c,e.attrs),e.text&&(c.text=""+e.text);var d="onload"in c?n:o;d(c,i),c.onload||n(c,i),r.appendChild(c)}},326:function(t,e,a){"use strict";t.exports=function(t){if("string"!==typeof t)throw new TypeError("Expected a string");return/^[a-z][a-z0-9+.-]*:/.test(t)}},52:function(t,e,a){"use strict";a.r(e);var n,o,i,r,c,d,l,s,u,p,f,m,h=a(136),b=a(137),v=a(140),y=a(138),g=a(139),O=a(1),x=a.n(O),w=a(208),j=a.n(w),E=a(176),k=a.n(E),C=(a(150),a(151)),U=(a(281),a(282)),T=(a(141),a(145)),z=(a(163),a(164)),S=(a(175),a(162)),A=a(31),D=a(143),R=a(159),_=a.n(R),N=a(154),F=a.n(N),I=a(315),L=a.n(I),P=a(325),H=a.n(P),M=a(142),B=a(326),K=a.n(B),q=a(135),Z=a(134),G=a(133),J=a(201),V=a(132);function W(t){if("string"!==typeof t||t.length<1)throw new TypeError("CKEditor URL must be a non-empty string.");return"CKEDITOR"in window?(window.CKEDITOR&&(window.CKEDITOR.disableAutoInline=!0),Promise.resolve(window.CKEDITOR)):(m||(m=new Promise(function(e,a){H()(t,function(t){t?a(t):(window.CKEDITOR&&(window.CKEDITOR.disableAutoInline=!0),e(window.CKEDITOR),m=void 0)})})),m)}function Y(){var t=Object(V["h"])();return Object(V["t"])()?"/".concat(t):""}var X=(n=Object(M["Bind"])(),o=Object(M["Bind"])(),i=Object(M["Bind"])(),r=Object(M["Bind"])(),c=Object(M["Bind"])(),d=Object(M["Bind"])(),l=Object(M["Bind"])(),s=Object(M["Bind"])(),u=Object(M["Bind"])(),p=Object(M["Bind"])(),f=function(t){function e(t){var a;return Object(h["a"])(this,e),a=Object(v["a"])(this,Object(y["a"])(e).call(this,t)),a.element=null,a.editor=null,a.state={fileUploadModalVisible:!1,file:null},a}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"componentDidMount",value:function(){this.initCKEditor()}},{key:"componentWillUnmount",value:function(){this._destroyEditor()}},{key:"componentDidUpdate",value:function(t){var e=this.props,a=this.editor;a&&(t.data!==e.data&&a.getData()!==e.data&&a.setData(e.data),t.readOnly!==e.readOnly&&a.setReadOnly(e.readOnly),t.style!==e.style&&a.container.setStyles(e.style),this._attachEventHandlers(t),window.addEventListener("popstate",function(){a&&1===a.commands.maximize.state&&(a.destroy(),window.location.reload())}))}},{key:"getContent",value:function(){var t=this.editor.getData,e=void 0===t?function(){}:t;return e()}},{key:"initCKEditor",value:function(){var t=this,a=this.props,n=a.onEditorChange,o=void 0===n?function(){}:n,i=a.content,r=a.readOnly,c=a.config,d=void 0===c?{}:c,l=a.style,s=this.state.editorLoading;s||window.CKEDITOR||this.setState({editorLoading:!0}),W(e.editorUrl).then(function(e){try{var a=L()(Object(V["g"])()||"zh_cn").toLocaleLowerCase();if(t.setState({editorLoading:!1}),t.element&&(t.editor=e.replace(t.element,Object(A["a"])({removeButtons:"About,Flash,Save,Source,Form,Checkbox,Button,ShowBlocks,NewPage,Print,Language,Templates,CreateDiv,Radio,TextField,Textarea,Select,HiddenField",removePlugins:"image,scayt,wsc,iframe",language:a,readOnly:r,height:600,uploadUrl:"".concat(G["e"],"/v1").concat(Y(),"/files/multipart"),filebrowserUploadUrl:"".concat(G["e"],"/v1").concat(Y(),"/files/multipart"),disableNativeSpellChecker:!1,font_names:"Arial/Arial, Helvetica, sans-serif; Comic Sans MS/Comic Sans MS;Courier New/Courier New;Georgia/Georgia;Lucida Sans Unicode/Lucida Sans Unicode;Times New Roman/Times New Roman, Times, serif;Verdana;\u5b8b\u4f53/\u5b8b\u4f53;\u9ed1\u4f53/\u9ed1\u4f53;\u4eff\u5b8b/\u4eff\u5b8b_GB2312;\u6977\u4f53/\u6977\u4f53_GB2312;\u96b6\u4e66/\u96b6\u4e66;\u5e7c\u5706/\u5e7c\u5706;\u5fae\u8f6f\u96c5\u9ed1/\u5fae\u8f6f\u96c5\u9ed1;"},d))),t.editor&&(t.editor.filter=t.editor.filter||{},t._attachEventHandlers(),i&&t.editor.setData(i),t._attachEventHandlers(),_()(t.editor.on))){t.editor.on("change",function(t){o(t.editor.getData())}),l&&t.editor.on("loaded",function(){t.editor.container.setStyles(l),t.editor.addCommand("insertFiles",{exec:function(){t.setState({fileUploadModalVisible:!0})}}),t.editor.ui.addButton("insertFilesBtn",{label:q["a"].get("hzero.common.richTextEditor.insertFile").d("\u63d2\u5165\u6587\u4ef6"),command:"insertFiles",toolbar:"insert",icon:"Templates"})});var n=Object(V["e"])();t.editor.on("fileUploadRequest",function(e){var a=t.props,o=a.bucketName,i=void 0===o?G["d"]:o,r=a.bucketDirectory,c=void 0===r?"editor":r,d=e.data.fileLoader,l=d.xhr;l.open("POST",d.uploadUrl,!0),n&&l.setRequestHeader("Authorization","bearer ".concat(n)),l.setRequestHeader("Cache-Control","no-cache"),l.setRequestHeader("X-File-Name",t.fileName),l.setRequestHeader("X-File-Size",t.total);var s=new FormData;s.append("file",d.file,d.fileName),s.append("bucketName",i),s.append("directory",c),s.append("fileName",d.fileName),l.send(s),e.stop()},null,null,4),t.editor.on("fileUploadResponse",function(e){e.stop();var a=t.props,n=a.resolveImageUrl,o=void 0===n?function(){}:n,i=a.bucketName,r=void 0===i?G["d"]:i,c=e.data.fileLoader,d=c.xhr,l=d.responseText;if(K()(l)){var s=o(l,r);e.data.url=s&&K()(s)?s:l}else e.data.message=JSON.parse(l).message})}}catch(c){throw c}}).catch(window.console.error)}},{key:"_attachEventHandlers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this.props;Object.keys(this.props).forEach(function(n){n.startsWith("on")&&e[n]!==a[n]&&t._attachEventHandler(n,e[n])})}},{key:"_attachEventHandler",value:function(t,e){try{var a="".concat(t[2].toLowerCase()).concat(t.substr(3));e&&this.editor.removeListener(a,e),_()(this.editor.on)&&this.editor.on(a,this.props[t])}catch(n){throw n}}},{key:"_destroyEditor",value:function(){try{this.editor&&this.editor.destroy(!0),this.editor=null,this.element=null}catch(t){throw t}}},{key:"beforeUpload",value:function(t){return this.setState({file:t}),!1}},{key:"onRemove",value:function(){this.setState({file:null})}},{key:"upload",value:function(){var t=this,e=this.props,a=e.bucketName,n=void 0===a?G["d"]:a,o=e.bucketDirectory,i=void 0===o?"editor":o,r=this.state.file,c=new FormData;c.append("file",r,r.name),c.append("bucketName",n),c.append("directory",i),c.append("fileName",r.name),this.setState({uploading:!0}),Object(Z["a"])("".concat(G["e"],"/v1").concat(Y(),"/files/multipart"),{processData:!1,method:"POST",type:"FORM",body:c,responseType:"text"}).then(function(e){K()(e)?(t.setState({uploading:!1,url:Object(V["f"])(e,n,void 0,i)}),J["a"].success()):(J["a"].error({message:JSON.parse(e).message}),t.setState({uploading:!1}))})}},{key:"closeFileUploadModal",value:function(){this.setState({fileUploadModalVisible:!1,uploading:!1,file:null,url:null})}},{key:"onFileUploadModalOk",value:function(){var t=this.state,e=t.url,a=t.file;try{F()(e)||this.editor.insertHtml('<a href="'.concat(e,'" >').concat(a.name,"</a>"))}catch(n){throw n}this.setState({fileUploadModalVisible:!1,file:null,url:null})}},{key:"render",value:function(){var t=this,e=this.props.style,a=void 0===e?{}:e,n=this.state,o=n.uploading,i=n.file,r=n.editorLoading,c=n.fileUploadModalVisible,d={beforeUpload:this.beforeUpload,fileList:i?[i]:[],onRemove:this.onRemove};return x.a.createElement(O["Fragment"],null,x.a.createElement(S["default"],{spinning:r},x.a.createElement("div",{contentEditable:"true",style:a,ref:function(e){t.element=e},id:"richTextEditor",className:"rich-text-editor"})),x.a.createElement(C["default"],{title:q["a"].get("hzero.common.richTextEditor.insertImage").d("\u63d2\u5165\u6587\u4ef6"),visible:c,onOk:this.onFileUploadModalOk,onCancel:this.closeFileUploadModal},x.a.createElement(U["default"],d,x.a.createElement(T["default"],null,x.a.createElement(z["default"],{type:"upload"})," ",q["a"].get("hzero.common.richTextEditor.selectFile").d("\u9009\u62e9\u56fe\u7247"))),x.a.createElement("br",null),x.a.createElement(T["default"],{className:"upload-demo-start",type:"primary",onClick:this.upload,disabled:F()(i),loading:o},o?q["a"].get("hzero.common.richTextEditor.uploading").d("\u6b63\u5728\u4e0a\u4f20"):q["a"].get("hzero.common.richTextEditor.startUpload").d("\u5f00\u59cb\u4e0a\u4f20"))))}}]),e}(x.a.Component),Object(D["a"])(f.prototype,"getContent",[n],Object.getOwnPropertyDescriptor(f.prototype,"getContent"),f.prototype),Object(D["a"])(f.prototype,"initCKEditor",[o],Object.getOwnPropertyDescriptor(f.prototype,"initCKEditor"),f.prototype),Object(D["a"])(f.prototype,"_attachEventHandlers",[i],Object.getOwnPropertyDescriptor(f.prototype,"_attachEventHandlers"),f.prototype),Object(D["a"])(f.prototype,"_attachEventHandler",[r],Object.getOwnPropertyDescriptor(f.prototype,"_attachEventHandler"),f.prototype),Object(D["a"])(f.prototype,"_destroyEditor",[c],Object.getOwnPropertyDescriptor(f.prototype,"_destroyEditor"),f.prototype),Object(D["a"])(f.prototype,"beforeUpload",[d],Object.getOwnPropertyDescriptor(f.prototype,"beforeUpload"),f.prototype),Object(D["a"])(f.prototype,"onRemove",[l],Object.getOwnPropertyDescriptor(f.prototype,"onRemove"),f.prototype),Object(D["a"])(f.prototype,"upload",[s],Object.getOwnPropertyDescriptor(f.prototype,"upload"),f.prototype),Object(D["a"])(f.prototype,"closeFileUploadModal",[u],Object.getOwnPropertyDescriptor(f.prototype,"closeFileUploadModal"),f.prototype),Object(D["a"])(f.prototype,"onFileUploadModalOk",[p],Object.getOwnPropertyDescriptor(f.prototype,"onFileUploadModalOk"),f.prototype),f);X.defaultProps={type:"classic",data:"",config:{},readOnly:!1},X.editorUrl="".concat("/","lib/ckeditor/ckeditor.js");var $=a(264),Q=a.n($);a.d(e,"default",function(){return tt});var tt=function(t){function e(t){var a;return Object(h["a"])(this,e),a=Object(v["a"])(this,Object(y["a"])(e).call(this,t)),a.staticTextEditor=x.a.createRef(),a.state={editorKey:k()(),prevContent:t.content},a}return Object(g["a"])(e,t),Object(b["a"])(e,[{key:"componentDidMount",value:function(){var t=this.props.onRef;t(this)}},{key:"render",value:function(){var t=this.state,e=t.prevContent,a=t.editorKey;return x.a.createElement("div",{className:j()(Q.a["hitf-remark-wrapper"])},x.a.createElement(X,{key:a,content:e,ref:this.staticTextEditor}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var a=t.content;return a!==e.prevContent?{editorKey:k()(),prevContent:a||""}:null}}]),e}(O["Component"])}}]);