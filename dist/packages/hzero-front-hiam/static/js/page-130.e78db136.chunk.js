(window["webpackJsonppackages_hzero_front_hiam_name_"]=window["webpackJsonppackages_hzero_front_hiam_name_"]||[]).push([[76,67,192,211,232,233,234,235,236,243,247,251,252,253,254,255,256,257,258,259,265,269,270,271,276,279,280,281,282,283],{140:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return L});n(314);var a,o,i,r,p,l=n(313),c=(n(430),n(392)),s=(n(330),n(331)),u=(n(404),n(405)),d=(n(332),n(333)),m=(n(310),n(309)),f=(n(414),n(374)),h=n(295),b=n(296),g=n(298),v=n(297),x=n(299),y=n(301),O=(n(305),n(304)),w=n(315),k=n.n(w),j=n(324),A=n.n(j),z=n(1),I=n.n(z),E=n(300),S=n(694),D=n(302),C=n(387),U=n(453),N=n(292),q=O["default"].Item,L=(a=O["default"].create({fieldNameProp:null}),o=Object(E["Bind"])(),i=Object(E["Bind"])(),a((p=function(e){function t(){return Object(h["a"])(this,t),Object(g["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(x["a"])(t,e),Object(b["a"])(t,[{key:"handleOK",value:function(){var e=this.props,t=e.form,n=e.onOk;t.validateFields(function(e,t){A()(e)&&k()(n)&&n(t)})}},{key:"onUploadSuccess",value:function(e){var t=this.props.form;e&&t.setFieldsValue({appImage:e.response})}},{key:"render",value:function(){var e=this.props,t=e.form,n=e.modalVisible,a=e.openAppDetail,o=e.codeList,i=e.channelTypes,r=e.onCancel,p=e.fetchDetailLoading,h=e.saveDetailLoading,b=e.detailTitle,g=e.fileList,v=void 0===g?[]:g,x=a.openAppId,y=a.appCode,w=a.appId,k=a.orderSeq,j=a.appName,A=a.appKey,z=a.appImage,E=a.channel,L=a.subAppId,P=t.getFieldDecorator;return I.a.createElement(l["default"],{destroyOnClose:!0,title:b,visible:n,width:"1000px",confirmLoading:h,wrapClassName:"ant-modal-sidebar-right",transitionName:"move-right",onCancel:r,onOk:this.handleOK},I.a.createElement(c["default"],{spinning:!!x&&p},I.a.createElement(O["default"],null,I.a.createElement(s["default"],null,I.a.createElement(d["default"],C["k"],I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.appCode").d("\u5e94\u7528\u7f16\u7801")},C["q"]),P("appCode",{initialValue:y,rules:[{required:!0,message:D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.appCode").d("\u5e94\u7528\u7f16\u7801")})},{pattern:U["a"],message:D["a"].get("hzero.common.validation.code").d("\u5927\u5c0f\u5199\u53ca\u6570\u5b57\uff0c\u5fc5\u987b\u4ee5\u5b57\u6bcd\u3001\u6570\u5b57\u5f00\u5934\uff0c\u53ef\u5305\u542b\u201c-\u201d\u3001\u201c_\u201d\u3001\u201c.\u201d\u3001\u201c/\u201d")}]})(I.a.createElement(f["default"],{disabled:!!x,allowClear:!0},o.map(function(e){return I.a.createElement(f["default"].Option,{value:e.value,key:e.value},e.meaning)})))),I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.appId").d("APP ID")},C["q"]),P("appId",{initialValue:w,rules:[{required:!0,message:D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.appId").d("APP ID")})}]})(I.a.createElement(m["default"],null))),I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.appName").d("\u5e94\u7528\u540d\u79f0")},C["q"]),P("appName",{initialValue:j,rules:[{required:!0,message:D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.appName").d("\u5e94\u7528\u540d\u79f0")})}]})(I.a.createElement(m["default"],null))),I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.subAppId").d("\u5b50\u5e94\u7528ID")},C["q"]),P("subAppId",{initialValue:L})(I.a.createElement(m["default"],null)))),I.a.createElement(d["default"],C["k"],I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.channel").d("\u767b\u5f55\u6e20\u9053")},C["q"]),P("channel",{initialValue:E,rules:[{required:!0,message:D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.channel").d("\u767b\u5f55\u6e20\u9053")})}]})(I.a.createElement(f["default"],{disabled:!!x,allowClear:!0},i.map(function(e){return I.a.createElement(f["default"].Option,{value:e.value,key:e.value},e.meaning)})))),I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.appKey").d("APP Key")},C["q"]),P("appKey",{initialValue:A,rules:[{required:!w,message:D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.appKey").d("APP Key")})}]})(I.a.createElement(m["default"],{placeholder:w&&D["a"].get("hiam.openApp.view.validation.notChange").d("\u672a\u66f4\u6539")}))),I.a.createElement(q,Object.assign({label:D["a"].get("hiam.openApp.model.openApp.orderSeq").d("\u5e8f\u53f7")},C["q"]),P("orderSeq",{initialValue:k,rules:[{required:!0,message:D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.orderSeq").d("\u5e8f\u53f7")})}]})(I.a.createElement(u["default"],{min:0}))),I.a.createElement(q,Object.assign({label:I.a.createElement("span",{className:"ant-form-item-required"},D["a"].get("hiam.openApp.model.openApp.appleImage").d("\u5e94\u7528\u56fe\u7247")),extra:D["a"].get("hiam.openApp.model.openApp.uploadSupport").d("\u4e0a\u4f20\u683c\u5f0f\uff1a*.png;*.jpeg")},C["q"]),I.a.createElement(S["a"],{accept:".jpeg,.png",fileType:"image/jpeg;image/png",single:!0,fileList:v,bucketName:N["e"],bucketDirectory:"hiam01",onUploadSuccess:this.onUploadSuccess})),I.a.createElement(q,{wrapperCol:{span:10,offset:6}},P("appImage",{rules:[{validator:function(e,t,n){t?n():n(new Error(D["a"].get("hzero.common.validation.notNull",{name:D["a"].get("hiam.openApp.model.openApp.appImage").d("\u5e94\u7528\u56fe\u7247")})))}}],initialValue:z})(I.a.createElement("span",null))))))))}}]),t}(I.a.PureComponent),Object(y["a"])(p.prototype,"handleOK",[o],Object.getOwnPropertyDescriptor(p.prototype,"handleOK"),p.prototype),Object(y["a"])(p.prototype,"onUploadSuccess",[i],Object.getOwnPropertyDescriptor(p.prototype,"onUploadSuccess"),p.prototype),r=p))||r)},294:function(e,t,n){e.exports=n(0)(198)},300:function(e,t,n){e.exports=n(237)(2563)},301:function(e,t,n){"use strict";function a(e,t,n,a,o){var i={};return Object.keys(a).forEach(function(e){i[e]=a[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,a){return a(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n.d(t,"a",function(){return a})},303:function(e,t,n){e.exports=n(0)(1169)},304:function(e,t,n){e.exports=n(0)(1147)},305:function(e,t,n){"use strict";n(294),n(328),n(321)},307:function(e,t,n){e.exports=n(0)(111)},309:function(e,t,n){e.exports=n(0)(293)},311:function(e,t,n){e.exports=n(0)(1155)},313:function(e,t,n){e.exports=n(0)(1154)},314:function(e,t,n){"use strict";n(294),n(343),n(303)},315:function(e,t,n){e.exports=n(0)(116)},317:function(e,t,n){e.exports=n(0)(1852)},318:function(e,t,n){e.exports=n(0)(1168)},319:function(e,t,n){e.exports=n(0)(37)},320:function(e,t,n){e.exports=n(0)(82)},325:function(e,t,n){e.exports=n(0)(1858)},328:function(e,t,n){e.exports={"ant-form":"ant-form","ant-form-item-required":"ant-form-item-required","ant-form-hide-required-mark":"ant-form-hide-required-mark","ant-form-item-children":"ant-form-item-children","ant-input":"ant-input","ant-input-disabled":"ant-input-disabled","ant-input-number-input":"ant-input-number-input","ant-cascader-picker":"ant-cascader-picker","ant-cascader-picker-disabled":"ant-cascader-picker-disabled","ant-time-picker-input":"ant-time-picker-input","ant-select-disabled":"ant-select-disabled","ant-select-selection":"ant-select-selection","ant-input-group-addon":"ant-input-group-addon","has-error":"has-error",disabled:"disabled","ant-radio-inline":"ant-radio-inline","ant-radio-vertical":"ant-radio-vertical","ant-checkbox-inline":"ant-checkbox-inline","ant-checkbox-vertical":"ant-checkbox-vertical","ant-radio":"ant-radio","ant-checkbox":"ant-checkbox","ant-form-item":"ant-form-item",anticon:"anticon","ant-form-item-control":"ant-form-item-control","ant-form-item-with-help":"ant-form-item-with-help","ant-form-item-label":"ant-form-item-label","ant-switch":"ant-switch","ant-form-item-no-colon":"ant-form-item-no-colon","ant-form-explain":"ant-form-explain","ant-form-extra":"ant-form-extra","ant-form-text":"ant-form-text","ant-form-split":"ant-form-split","has-feedback":"has-feedback","ant-select":"ant-select","ant-select-arrow":"ant-select-arrow","ant-select-selection__clear":"ant-select-selection__clear","ant-select-selection-selected-value":"ant-select-selection-selected-value","ant-cascader-picker-arrow":"ant-cascader-picker-arrow","ant-cascader-picker-clear":"ant-cascader-picker-clear","ant-input-search":"ant-input-search","ant-input-search-enter-button":"ant-input-search-enter-button","ant-input-suffix":"ant-input-suffix","ant-calendar-picker-icon":"ant-calendar-picker-icon","ant-time-picker-icon":"ant-time-picker-icon","ant-calendar-picker-clear":"ant-calendar-picker-clear","ant-time-picker-clear":"ant-time-picker-clear","ant-upload":"ant-upload","ant-input-number":"ant-input-number","ant-input-number-handler-wrap":"ant-input-number-handler-wrap","ant-input-group":"ant-input-group","ant-input-group-wrapper":"ant-input-group-wrapper","ant-input-group-wrap":"ant-input-group-wrap","ant-select-selection--single":"ant-select-selection--single","ant-select-selection__rendered":"ant-select-selection__rendered","ant-select-open":"ant-select-open","ant-form-vertical":"ant-form-vertical","ant-col-24":"ant-col-24","ant-col-xl-24":"ant-col-xl-24","ant-form-item-control-wrapper":"ant-form-item-control-wrapper","ant-col-xs-24":"ant-col-xs-24","ant-col-sm-24":"ant-col-sm-24","ant-col-md-24":"ant-col-md-24","ant-col-lg-24":"ant-col-lg-24","ant-form-inline":"ant-form-inline","has-success":"has-success","has-warning":"has-warning","is-validating":"is-validating",zoomIn:"zoomIn",diffZoomIn1:"diffZoomIn1","ant-calendar-picker-open":"ant-calendar-picker-open","ant-calendar-picker-input":"ant-calendar-picker-input","ant-input-prefix":"ant-input-prefix",diffZoomIn3:"diffZoomIn3","ant-select-focused":"ant-select-focused","ant-picker-icon":"ant-picker-icon","ant-input-number-focused":"ant-input-number-focused","ant-time-picker-input-focused":"ant-time-picker-input-focused","ant-cascader-input":"ant-cascader-input",diffZoomIn2:"diffZoomIn2","ant-select-auto-complete":"ant-select-auto-complete","ant-mention-wrapper":"ant-mention-wrapper","ant-mention-editor":"ant-mention-editor","ant-mention-active":"ant-mention-active",loadingCircle:"loadingCircle","ant-advanced-search-form":"ant-advanced-search-form","show-help-enter":"show-help-enter","show-help-appear":"show-help-appear","show-help-leave":"show-help-leave","show-help-enter-active":"show-help-enter-active","show-help-appear-active":"show-help-appear-active",antShowHelpIn:"antShowHelpIn","show-help-leave-active":"show-help-leave-active",antShowHelpOut:"antShowHelpOut"}},330:function(e,t,n){"use strict";n(294),n(321)},331:function(e,t,n){e.exports=n(0)(261)},332:function(e,t,n){"use strict";n(294),n(321)},333:function(e,t,n){e.exports=n(0)(144)},334:function(e,t,n){e.exports=n(0)(1167)},335:function(e,t,n){e.exports=n(0)(182)},336:function(e,t,n){e.exports=n(0)(274)},337:function(e,t,n){e.exports=n(237)(2648)},339:function(e,t,n){e.exports=n(0)(34)},340:function(e,t,n){e.exports=n(0)(130)},341:function(e,t,n){e.exports=n(0)(829)},342:function(e,t,n){e.exports=n(0)(604)},343:function(e,t,n){e.exports={"ant-modal":"ant-modal","ant-modal-wrap":"ant-modal-wrap","ant-modal-title":"ant-modal-title","ant-modal-content":"ant-modal-content","ant-modal-close":"ant-modal-close","ant-modal-close-x":"ant-modal-close-x","ant-modal-header":"ant-modal-header","ant-modal-body":"ant-modal-body","ant-modal-footer":"ant-modal-footer","zoom-enter":"zoom-enter","zoom-appear":"zoom-appear","ant-modal-mask":"ant-modal-mask","ant-modal-mask-hidden":"ant-modal-mask-hidden","ant-modal-open":"ant-modal-open","vertical-center-modal":"vertical-center-modal","ant-confirm":"ant-confirm","ant-confirm-body-wrapper":"ant-confirm-body-wrapper","ant-confirm-body":"ant-confirm-body","ant-confirm-title":"ant-confirm-title","ant-confirm-content":"ant-confirm-content",anticon:"anticon","ant-confirm-btns":"ant-confirm-btns","ant-confirm-error":"ant-confirm-error","ant-confirm-warning":"ant-confirm-warning","ant-confirm-confirm":"ant-confirm-confirm","ant-confirm-info":"ant-confirm-info","ant-confirm-success":"ant-confirm-success"}},345:function(e,t,n){e.exports=n(0)(156)},346:function(e,t,n){e.exports=n(0)(151)},347:function(e,t,n){e.exports=n(0)(484)},352:function(e,t,n){e.exports=n(0)(2092)},356:function(e,t,n){e.exports=n(0)(661)},358:function(e,t,n){e.exports=n(0)(868)},359:function(e,t,n){e.exports=n(0)(2130)},360:function(e,t,n){e.exports=n(0)(325)},361:function(e,t,n){e.exports=n(0)(241)},362:function(e,t,n){e.exports=n(0)(385)},363:function(e,t,n){e.exports=n(0)(1132)},364:function(e,t,n){e.exports=n(0)(255)},365:function(e,t,n){e.exports=n(0)(1960)},366:function(e,t,n){e.exports=n(0)(298)},367:function(e,t,n){e.exports=n(0)(849)},368:function(e,t,n){e.exports=n(0)(328)},369:function(e,t,n){e.exports=n(0)(270)},370:function(e,t,n){e.exports=n(0)(170)},371:function(e,t,n){e.exports=n(0)(324)},372:function(e,t,n){e.exports=n(0)(386)},373:function(e,t,n){e.exports=n(0)(387)},374:function(e,t,n){e.exports=n(0)(164)},375:function(e,t,n){e.exports=n(237)(2662)},376:function(e,t,n){e.exports=n(237)(1367)},377:function(e,t,n){e.exports=n(0)(127)},378:function(e,t,n){e.exports=n(0)(2129)},379:function(e,t,n){e.exports=n(0)(235)},380:function(e,t,n){e.exports=n(0)(209)},381:function(e,t,n){e.exports=n(0)(580)},382:function(e,t,n){e.exports=n(0)(582)},383:function(e,t,n){e.exports=n(0)(128)},384:function(e,t,n){e.exports=n(0)(108)},385:function(e,t,n){e.exports=n(0)(472)},386:function(e,t,n){e.exports=n(0)(873)},392:function(e,t,n){e.exports=n(0)(418)},404:function(e,t,n){e.exports=n(0)(1971)},405:function(e,t,n){e.exports=n(0)(662)},430:function(e,t,n){"use strict";n(294),n(621)},452:function(e,t,n){e.exports=n(0)(61)},453:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"g",function(){return o}),n.d(t,"f",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return c});var a=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,o=/^134[0-8]\d{7}$|^13[^4]\d{8}$|^14[5-9]\d{8}$|^15[^4]\d{8}$|^16[6]\d{8}$|^17[0-8]\d{8}$|^18[\d]{9}$|^19[8,9]\d{8}$/,i=/^(?![0-9]+$)(?![a-zA-Z]+$)(?![a-z]+$)(?![!@#$%^&*=]+$)[0-9A-Za-z!@#$%^&*=]{6,}$/,r=/^[a-zA-Z0-9][a-zA-Z0-9-_.\/]*$/,p=/^[a-z0-9][a-z0-9-_.\/]*$/,l=/^[A-Z0-9][A-Z0-9-_.\/]*$/,c=/^\d+$/},569:function(e,t,n){"use strict";n(294),n(618),n(571),n(334)},570:function(e,t,n){e.exports=n(0)(1208)},571:function(e,t,n){e.exports=n(0)(2098)},618:function(e,t,n){e.exports={"ant-upload":"ant-upload","ant-upload-btn":"ant-upload-btn","ant-upload-select":"ant-upload-select","ant-upload-select-picture-card":"ant-upload-select-picture-card","ant-upload-drag":"ant-upload-drag","ant-upload-drag-hover":"ant-upload-drag-hover","ant-upload-disabled":"ant-upload-disabled","ant-upload-drag-container":"ant-upload-drag-container","ant-upload-drag-icon":"ant-upload-drag-icon",anticon:"anticon","ant-upload-text":"ant-upload-text","ant-upload-hint":"ant-upload-hint","anticon-plus":"anticon-plus","ant-upload-list":"ant-upload-list","ant-upload-list-item":"ant-upload-list-item","ant-upload-list-item-name":"ant-upload-list-item-name","ant-upload-list-item-info":"ant-upload-list-item-info","anticon-loading":"anticon-loading","anticon-paper-clip":"anticon-paper-clip","anticon-cross":"anticon-cross","ant-upload-list-item-error":"ant-upload-list-item-error","ant-upload-list-item-progress":"ant-upload-list-item-progress","ant-upload-list-picture":"ant-upload-list-picture","ant-upload-list-picture-card":"ant-upload-list-picture-card","ant-upload-list-item-file-name":"ant-upload-list-item-file-name","ant-upload-list-item-uploading":"ant-upload-list-item-uploading","ant-upload-list-item-thumbnail":"ant-upload-list-item-thumbnail","ant-upload-list-item-icon":"ant-upload-list-item-icon","ant-upload-list-item-action-remove":"ant-upload-list-item-action-remove","ant-upload-list-item-picture-card":"ant-upload-list-item-picture-card","ant-upload-list-item-actions":"ant-upload-list-item-actions","anticon-eye-o":"anticon-eye-o","anticon-download":"anticon-download","anticon-upload":"anticon-upload","anticon-picture":"anticon-picture","ant-upload-list-item-uploading-text":"ant-upload-list-item-uploading-text","ant-upload-success-icon":"ant-upload-success-icon","ant-upload-animate-enter":"ant-upload-animate-enter","ant-upload-animate-leave":"ant-upload-animate-leave","ant-upload-animate-inline-enter":"ant-upload-animate-inline-enter","ant-upload-animate-inline-leave":"ant-upload-animate-inline-leave",uploadAnimateIn:"uploadAnimateIn",uploadAnimateOut:"uploadAnimateOut",uploadAnimateInlineIn:"uploadAnimateInlineIn",uploadAnimateInlineOut:"uploadAnimateInlineOut"}},621:function(e,t,n){e.exports={"ant-spin":"ant-spin","ant-spin-spinning":"ant-spin-spinning","ant-spin-nested-loading":"ant-spin-nested-loading","ant-spin-dot":"ant-spin-dot","ant-spin-text":"ant-spin-text","ant-spin-show-text":"ant-spin-show-text","ant-spin-sm":"ant-spin-sm","ant-spin-lg":"ant-spin-lg","ant-spin-container":"ant-spin-container","ant-spin-blur":"ant-spin-blur","ant-spin-tip":"ant-spin-tip",antSpinMove:"antSpinMove","ant-spin-dot-spin":"ant-spin-dot-spin",antRotate:"antRotate"}},656:function(e,t,n){var a=n(336),o=n(657);function i(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],p=e.length;t=a(t,3);while(++i<p){var l=e[i];t(l,i,e)&&(n.push(l),r.push(i))}return o(e,r),n}e.exports=i},657:function(e,t,n){var a=n(658),o=n(659),i=Array.prototype,r=i.splice;function p(e,t){var n=e?t.length:0,i=n-1;while(n--){var p=t[n];if(n==i||p!==l){var l=p;o(p)?r.call(e,p,1):a(e,p)}}return e}e.exports=p},658:function(e,t,n){e.exports=n(0)(2121)},659:function(e,t,n){e.exports=n(0)(242)},694:function(e,t,n){"use strict";n.d(t,"a",function(){return M});n(569);var a,o,i,r,p,l,c,s=n(570),u=(n(303),n(307)),d=(n(318),n(319)),m=n(308),f=n(58),h=n(2),b=n.n(h),g=n(57),v=n(426),x=n(295),y=n(296),O=n(298),w=n(297),k=n(389),j=n(299),A=n(301),z=(n(338),n(311)),I=n(695),E=n.n(I),S=n(656),D=n.n(S),C=n(342),U=n.n(C),N=n(61),q=n.n(N),L=n(452),P=n.n(L),_=n(1),$=n.n(_),R=n(300),T=n(696),Z=n.n(T),F=n(302),K=n(293),V=n(291),B=n(292),H=n(316);z["default"].config({placement:"bottomRight"});var M=(a=Object(R["Bind"])(),o=Object(R["Bind"])(),i=Object(R["Bind"])(),r=Object(R["Bind"])(),p=Object(R["Bind"])(),l=Object(R["Bind"])(),c=function(e){function t(e){var n;Object(x["a"])(this,t),n=Object(O["a"])(this,Object(w["a"])(t).call(this,e));var a=n.props.onRef;return a&&a(Object(k["a"])(n)),n.state={fileList:null},n}return Object(j["a"])(t,e),Object(y["a"])(t,[{key:"setFileList",value:function(e){e&&this.setState({fileList:e})}},{key:"uploadData",value:function(e){var t=this.props,n=t.attachmentUUID,a=t.bucketName,o=t.uploadData,i=t.bucketDirectory,r=t.docType,p=t.storageCode,l=o?o(e):{};if(!(l instanceof FormData)){var c=l;l=new FormData,P()(l)&&Object.keys(c).forEach(function(e){l.append(e,c[e])})}return U()(n)||l.append("attachmentUUID",n),U()(a)||l.append("bucketName",a),U()(r)||l.append("docType",r),U()(p)||l.append("storageCode",p),U()(i)||l.append("directory",i),l}},{key:"onChange",value:function(e){var t=e.file,n=e.fileList,a=this.props,o=a.single,i=void 0!==o&&o,r=a.tenantId,p=a.bucketName,l=a.bucketDirectory,c=Object(v["a"])(n);if("done"===t.status){var s=t.response;if(s&&!0===s.failed)this.onUploadError(t,n);else{if(i){if(n.length>1){var u=this.props.onRemove;Promise.all(n.slice(0,n.length-1).map(function(){var e=Object(g["a"])(b.a.mark(function e(t){var n,a;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t.url){e.next=20;break}if(!u){e.next=11;break}return e.prev=2,e.next=5,u(t);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](2);case 9:e.next=20;break;case 11:return n=t.url&&t.url.split("=")||[],a=n[n.length-1],e.prev=13,e.next=16,Object(H["m"])({tenantId:r,bucketName:p,urls:[a]});case 16:e.next=20;break;case 18:e.prev=18,e.t1=e["catch"](13);case 20:case"end":return e.stop()}},e,null,[[2,7],[13,18]])}));return function(t){return e.apply(this,arguments)}}())).catch(function(){})}c=[{uid:t.uid,name:t.name,url:Object(V["j"])(t.response,p,r,l),thumbUrl:Object(V["j"])(t.response,p,r,l)}]}else c=n.map(function(e){return e.uid===t.uid&&(e.url=Object(V["j"])(e.response,p,r,l)),e});this.onUploadSuccess(t,c)}}else"error"===t.status&&(this.onUploadError(t,n),c=n.filter(function(e){return"error"!==e.status&&e.uid}));this.setState({fileList:E()(c,function(e,t){return e.uid===t.uid})})}},{key:"beforeUpload",value:function(e){var t=this.props,n=t.fileType,a=t.fileSize,o=void 0===a?31457280:a;if(n&&-1===n.indexOf(e.type)){e.status="error";var i={message:F["a"].get("hzero.common.upload.error.type",{fileType:n}).d("\u4e0a\u4f20\u6587\u4ef6\u7c7b\u578b\u5fc5\u987b\u662f\uff1a".concat(n))};return e.response=i,!1}if(e.size>o){e.status="error";var r={message:F["a"].get("hzero.common.upload.error.size",{fileSize:o/1048576}).d("\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7: ".concat(o/1048576," MB"))};return e.response=r,!1}return!0}},{key:"onRemove",value:function(e){var t=this,n=this.props,a=n.onRemove,o=n.bucketName,i=n.onRemoveSuccess,r=n.single,p=void 0!==r&&r,l=n.tenantId,c=this.state.fileList;if(e.url){if(a)return a(e);var s=e.url&&e.url.split("=")||[],u=s[s.length-1];return Object(H["m"])({tenantId:l,bucketName:o,urls:[u]}).then(function(n){return!!Object(V["u"])(n)&&(i&&i(),p?t.setState({fileList:[]}):(D()(c,function(t){return t.uid===e.uid}),t.setState({fileList:c})),!0)})}this.setState({fileList:c.filter(function(t){return t.uid!==e.uid})})}},{key:"onUploadSuccess",value:function(e,t){var n=this.props.onUploadSuccess;n&&n(e,t)}},{key:"onUploadError",value:function(e,t){var n=this.props.onUploadError,a=!0;n&&(a=!1!==n(e,t)),a&&z["default"].error({message:F["a"].get("hzero.common.upload.status.error").d("\u4e0a\u4f20\u5931\u8d25"),description:e.response&&e.response.message})}},{key:"changeFileList",value:function(e){var t=this.props,n=t.bucketName,a=t.bucketDirectory,o=t.tenantId;if(e)return e.map(function(e){return Object(f["a"])({},e,{url:Object(V["j"])(e.url,n,o,a)})})}},{key:"handleAction",value:function(e){var t=e.file,n=e.onProgress,a=e.onSuccess,o=e.onError,i=new Z.a,r=i.signal,p=this.props.action,l=p||(Object(V["z"])()?"".concat(B["g"],"/v1/").concat(Object(V["m"])(),"/files/multipart"):"".concat(B["g"],"/v1/files/multipart")),c="".concat(l),s=this.uploadData(t);return s.append("file",t,t.name),Object(K["a"])(c,{processData:!1,method:"POST",type:"FORM",body:s,responseType:"text",signal:r,onProgress:n?function(e){return n(e,t)}:null},{beforeCatch:function(e){if("AbortError"!==e.name)throw new Error(e)}}).then(function(e){q()(e)?a(e):Object(V["u"])(e)||o(e)}),{abort:function(){i.abort()}}}},{key:"render",value:function(){var e=this.props,t=e.fileList,n=e.fileType,a=(e.fileSize,e.single,e.text),o=void 0===a?F["a"].get("hzero.common.upload.txt").d("\u4e0a\u4f20"):a,i=e.listType,r=void 0===i?"picture":i,p=(e.bucketName,e.onUploadSuccess,e.onUploadError,e.viewOnly),l=void 0!==p&&p,c=e.showRemoveIcon,f=void 0===c||c,h=(e.docType,e.storageCode,e.children),b=Object(m["a"])(e,["fileList","fileType","fileSize","single","text","listType","bucketName","onUploadSuccess","onUploadError","viewOnly","showRemoveIcon","docType","storageCode","children"]),g=Object(V["i"])(),v=this.changeFileList(t),x={};g&&(x.Authorization="bearer ".concat(g));var y,O=n&&-1===n.indexOf(",")?n.split(";").join(","):n;return y="picture-card"===r?$.a.createElement("div",null,$.a.createElement(d["default"],{style:{fontSize:"32px",color:"#999"},type:"plus"})):$.a.createElement(u["default"],null,$.a.createElement(d["default"],{type:"upload"})," ",o),$.a.createElement(s["default"],Object.assign({name:"file",accept:O,fileList:this.state.fileList||v,data:this.uploadData,customRequest:this.handleAction,headers:x,onChange:this.onChange,listType:r,beforeUpload:this.beforeUpload,onRemove:this.onRemove,showUploadList:{showRemoveIcon:!l&&f}},b),h||!l&&y)}}]),t}($.a.Component),Object(A["a"])(c.prototype,"uploadData",[a],Object.getOwnPropertyDescriptor(c.prototype,"uploadData"),c.prototype),Object(A["a"])(c.prototype,"onChange",[o],Object.getOwnPropertyDescriptor(c.prototype,"onChange"),c.prototype),Object(A["a"])(c.prototype,"beforeUpload",[i],Object.getOwnPropertyDescriptor(c.prototype,"beforeUpload"),c.prototype),Object(A["a"])(c.prototype,"onRemove",[r],Object.getOwnPropertyDescriptor(c.prototype,"onRemove"),c.prototype),Object(A["a"])(c.prototype,"changeFileList",[p],Object.getOwnPropertyDescriptor(c.prototype,"changeFileList"),c.prototype),Object(A["a"])(c.prototype,"handleAction",[l],Object.getOwnPropertyDescriptor(c.prototype,"handleAction"),c.prototype),c)},695:function(e,t,n){var a=n(352);function o(e,t){return t="function"==typeof t?t:void 0,e&&e.length?a(e,void 0,t):[]}e.exports=o},696:function(e,t,n){"use strict";var a="undefined"!==typeof self?self:"undefined"!==typeof window?window:void 0,o=a.AbortController,i=a.AbortSignal;e.exports=o,e.exports.AbortSignal=i,e.exports.default=o}}]);