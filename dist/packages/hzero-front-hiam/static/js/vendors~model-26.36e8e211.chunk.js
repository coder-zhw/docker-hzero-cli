(window["webpackJsonppackages_hzero_front_hiam_name_"]=window["webpackJsonppackages_hzero_front_hiam_name_"]||[]).push([[293],{272:function(e,t,r){"use strict";r.r(t);var n=r(59),a=r(2),c=r.n(a),u=r(58),s=r(324),o=r.n(s),i=r(316),p=r(291),l=r(57),h=r(403),d=r.n(h),f=r(293),b=r(292);function w(){return v.apply(this,arguments)}function v(){return v=Object(l["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/member-roles/self"),{query:t}));case 2:case"end":return e.stop()}},e)})),v.apply(this,arguments)}function y(e){return m.apply(this,arguments)}function m(){return m=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/member-roles/create-roles-subtree/").concat(t)));case 1:case"end":return e.stop()}},e)})),m.apply(this,arguments)}function x(){return O.apply(this,arguments)}function O(){return O=Object(l["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/member-roles/inherit-roles-tree"),{query:t}));case 2:case"end":return e.stop()}},e)})),O.apply(this,arguments)}function j(){return k.apply(this,arguments)}function k(){return k=Object(l["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(f["a"])("".concat(b["m"],"/v1/lovs/value"),{query:t}));case 2:case"end":return e.stop()}},e)})),k.apply(this,arguments)}function R(e){return g.apply(this,arguments)}function g(){return g=Object(l["a"])(c.a.mark(function e(t){var r,n;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,n=t.status,e.abrupt("return",Object(f["a"])("".concat(b["h"],"/v1/roles/").concat(r,"/").concat(n?"enable":"disable"),{method:"PUT"}));case 2:case"end":return e.stop()}},e)})),g.apply(this,arguments)}function S(e){return z.apply(this,arguments)}function z(){return z=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/v1/labels"),{query:t}));case 1:case"end":return e.stop()}},e)})),z.apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return P=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/roles/").concat(t)));case 1:case"end":return e.stop()}},e)})),P.apply(this,arguments)}function A(e,t){return T.apply(this,arguments)}function T(){return T=Object(l["a"])(c.a.mark(function e(t,r){var n,a=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/permissions/").concat(t),{query:n}));case 2:case"end":return e.stop()}},e)})),T.apply(this,arguments)}function q(e,t){return L.apply(this,arguments)}function L(){return L=Object(l["a"])(c.a.mark(function e(t,r){var n,a,u=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:{},a=u.length>3?u[3]:void 0,e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(a,"/permissions/").concat(t),{query:n}));case 3:case"end":return e.stop()}},e)})),L.apply(this,arguments)}function _(e){return C.apply(this,arguments)}function C(){return C=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/permissions/all/").concat(t)));case 1:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function I(e,t){return E.apply(this,arguments)}function E(){return E=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(r,"/permissions/all/").concat(t)));case 1:case"end":return e.stop()}},e)})),E.apply(this,arguments)}function M(e,t){return U.apply(this,arguments)}function U(){return U=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/permissions/revoked/all/").concat(t),{query:r}));case 1:case"end":return e.stop()}},e)})),U.apply(this,arguments)}function H(e,t,r){return V.apply(this,arguments)}function V(){return V=Object(l["a"])(c.a.mark(function e(t,r,n){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(n,"/permissions/revoked/all/").concat(t),{query:r}));case 1:case"end":return e.stop()}},e)})),V.apply(this,arguments)}function Y(e){return J.apply(this,arguments)}function J(){return J=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/roles"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e)})),J.apply(this,arguments)}function G(e,t){return B.apply(this,arguments)}function B(){return B=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(r,"/roles"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e)})),B.apply(this,arguments)}function F(e){return K.apply(this,arguments)}function K(){return K=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/roles"),{method:"PUT",body:t}));case 1:case"end":return e.stop()}},e)})),K.apply(this,arguments)}function N(e,t){return Q.apply(this,arguments)}function Q(){return Q=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(r,"/roles"),{method:"PUT",body:t}));case 1:case"end":return e.stop()}},e)})),Q.apply(this,arguments)}function W(e){return X.apply(this,arguments)}function X(){return X=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/roles/copy"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e)})),X.apply(this,arguments)}function Z(e,t){return $.apply(this,arguments)}function $(){return $=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(r,"/roles/copy"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e)})),$.apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=Object(l["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/roles/inherit"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e)})),te.apply(this,arguments)}function re(e,t){return ne.apply(this,arguments)}function ne(){return ne=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(r,"/roles/inherit"),{method:"POST",body:t}));case 1:case"end":return e.stop()}},e)})),ne.apply(this,arguments)}function ae(e,t){return ce.apply(this,arguments)}function ce(){return ce=Object(l["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/role-permissions/").concat(t,"/unrevoke"),{method:"POST",body:r}));case 1:case"end":return e.stop()}},e)})),ce.apply(this,arguments)}function ue(e,t,r){return se.apply(this,arguments)}function se(){return se=Object(l["a"])(c.a.mark(function e(t,r,n){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["a"])("".concat(b["h"],"/hzero/v1/").concat(n,"/role-permissions/").concat(t,"/unrevoke"),{method:"POST",body:r}));case 1:case"end":return e.stop()}},e)})),se.apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return ie=Object(l["a"])(c.a.mark(function e(t){var r,n;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.roleId,n=t.body,e.abrupt("return",Object(f["a"])("".concat(b["h"],"/v1/roles/").concat(r,"/role-auths"),{method:"GET",query:n}));case 2:case"end":return e.stop()}},e)})),ie.apply(this,arguments)}function pe(e){return le.apply(this,arguments)}function le(){return le=Object(l["a"])(c.a.mark(function e(t){var r,n;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.roleId,n=t.body,e.abrupt("return",Object(f["a"])("".concat(b["h"],"/v1/roles/").concat(r,"/role-auths"),{method:"POST",body:n}));case 2:case"end":return e.stop()}},e)})),le.apply(this,arguments)}function he(e){return de.apply(this,arguments)}function de(){return de=Object(l["a"])(c.a.mark(function e(t){var r,n;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.roleId,n=t.body,e.abrupt("return",Object(f["a"])("".concat(b["h"],"/v1/roles/").concat(r,"/role-auths?").concat(d.a.stringify({roleAuthId:n.roleAuthId})),{method:"DELETE",body:n}));case 2:case"end":return e.stop()}},e)})),de.apply(this,arguments)}var fe={list:[],pagination:{pageSize:10,total:0,current:1}};function be(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1,configurable:!0})}t["default"]={namespace:"role",state:{code:{},adminRoleList:[],currentAdminRole:{},rolesList:{managedRoleList:[],awardedRoleList:[]},roleDetail:{form:{},permissions:Object(u["a"])({},fe),revokedPermissions:Object(u["a"])({},fe),permissionsDrawer:Object(u["a"])({},fe)},roleAuth:{},roleAuthScopeCode:[],roleAuthScopeTypeCode:[]},effects:{queryAdminRoles:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.put,a=r.call,e.next=3,a(w);case 3:if(u=e.sent,!u||u.failed){e.next=7;break}return e.next=7,n({type:"updateStateReducer",payload:{adminRoleList:u.map(function(e){return{value:e.id,title:e.name,assignLevel:e.assignLevel,assignLevelValue:e.assignLevelValue,assignLevelValueMeaning:e.assignLevelValueMeaning,level:e.level}})}});case 7:case"end":return e.stop()}},e)}),queryManagedRoleList:c.a.mark(function e(t,r){var n,a,u,s,i,p,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.put,u=r.call,e.next=4,u(y,n);case 4:if(s=e.sent,!s||s.failed){e.next=11;break}return i=o()(s)?[]:[s],p=function e(t){var r=t||i;return r.map(function(t){var r=t;return r.key=r.id,o()(r.childRoles)?r:(r.children=e(r.childRoles),r)})},l=p()||[],e.next=11,a({type:"updateStateReducer",payload:{rolesList:{managedRoleList:l}}});case 11:case"end":return e.stop()}},e)}),queryAwardedRoleList:c.a.mark(function e(t,r){var n,a,s,i,p,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.put,s=r.call,e.next=4,s(x,n);case 4:if(i=e.sent,!i||i.failed){e.next=10;break}return p=function e(t){return t.map(function(t){var r=t;return o()(t.inheritedRole)||be(r,"children",[Object(u["a"])({},t.inheritedRole)]),o()(r.children)||(r.children=e(r.children)),r})},l=p((i||[]).map(function(e){var t=Object(u["a"])({key:e.id},e,{inherited:o()(e.inheritedRole)?"":e.inheritedRole.name});return t})),e.next=10,a({type:"updateStateReducer",payload:{rolesList:{awardedRoleList:l}}});case 10:case"end":return e.stop()}},e)}),setRoleEnabled:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.call,e.next=4,a(R,n);case 4:return u=e.sent,e.abrupt("return",u&&!u.failed);case 6:case"end":return e.stop()}},e)}),queryCode:c.a.mark(function e(t,r){var a,u,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,u=r.put,s=r.call,e.next=4,s(j,a);case 4:if(o=e.sent,!o||o.failed){e.next=8;break}return e.next=8,u({type:"setCodeReducer",payload:Object(n["a"])({},a.lovCode,o)});case 8:case"end":return e.stop()}},e)}),queryRole:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.put,u=r.call,e.next=4,u(D,n);case 4:if(s=e.sent,!s||s.failed){e.next=8;break}return e.next=8,a({type:"updateRoleDetailReducer",payload:{form:s}});case 8:case"end":return e.stop()}},e)}),queryLabels:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.call,e.next=4,a(S,n);case 4:return u=e.sent,e.abrupt("return",u&&!u.failed?u:[]);case 6:case"end":return e.stop()}},e)}),queryPermissionsAll:c.a.mark(function e(t,r){var n,a,u,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.put,u=r.call,s=Object(p["m"])(),0===s){e.next=9;break}return e.next=6,u(I,n,s);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,u(_,n);case 11:o=e.sent;case 12:if(!o||o.failed){e.next=15;break}return e.next=15,a({type:"updateRoleDetailReducer",payload:{permissions:{list:o||[],pagination:Object(p["c"])({number:0,totalElements:o.length})}}});case 15:case"end":return e.stop()}},e)}),queryLevelPermissions:c.a.mark(function e(t,r){var n,a,u,s,o,i,l,h,d,f,b;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.id,a=t.level,u=t.params,s=void 0===u?{}:u,o=r.call,i=r.put,l=Object(p["m"])(),0===l){e.next=9;break}return e.next=6,o(q,n,a,s,l);case 6:h=e.sent,e.next=12;break;case 9:return e.next=11,o(A,n,a,s);case 11:h=e.sent;case 12:if(d=Object(p["u"])(h),!d||d.failed){e.next=18;break}return f=d.content,b=Object(p["c"])(d),e.next=18,i({type:"updateRoleDetailPermissionsDrawerReducer",payload:{list:f,pagination:b}});case 18:case"end":return e.stop()}},e)}),queryRevokedPermissionsAll:c.a.mark(function e(t,r){var n,a,s,o,i,l,h,d;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.roleId,a=t.payload,s=r.put,o=r.call,i=Object(p["m"])(),0===i){e.next=9;break}return e.next=6,o(H,n,a,i);case 6:l=e.sent,e.next=12;break;case 9:return e.next=11,o(M,n,a);case 11:l=e.sent;case 12:if(!l||l.failed){e.next=16;break}return h=l,d=h.content,e.next=16,s({type:"updateRoleDetailReducer",payload:{revokedPermissions:{list:d.map(function(e){return Object(u["a"])({key:e.id},e)})||[],pagination:Object(p["c"])(l)}}});case 16:case"end":return e.stop()}},e)}),createRole:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.call,u=Object(p["m"])(),0===u){e.next=9;break}return e.next=6,a(G,n,u);case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,a(Y,n);case 11:s=e.sent;case 12:return e.abrupt("return",Object(p["u"])(s));case 13:case"end":return e.stop()}},e)}),editRole:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.call,u=Object(p["m"])(),0===u){e.next=9;break}return e.next=6,a(N,n,u);case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,a(F,n);case 11:s=e.sent;case 12:return e.abrupt("return",Object(p["u"])(s));case 13:case"end":return e.stop()}},e)}),copyRole:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.call,u=Object(p["m"])(),0===u){e.next=9;break}return e.next=6,a(Z,n,u);case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,a(W,n);case 11:s=e.sent;case 12:return e.abrupt("return",Object(p["u"])(s));case 13:case"end":return e.stop()}},e)}),inheritRole:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.call,u=Object(p["m"])(),0===u){e.next=9;break}return e.next=6,a(re,n,u);case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,a(ee,n);case 11:s=e.sent;case 12:return e.abrupt("return",Object(p["u"])(s));case 13:case"end":return e.stop()}},e)}),unrevoke:c.a.mark(function e(t,r){var n,a,u,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.roleId,a=t.payload,u=r.call,s=Object(p["m"])(),0===s){e.next=9;break}return e.next=6,u(ue,n,a,s);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,u(ae,n,a);case 11:o=e.sent;case 12:return e.abrupt("return",o&&!o.failed);case 13:case"end":return e.stop()}},e)}),queryRoleAuthScopeCode:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.call,a=r.put,e.next=3,n(i["f"],"HIAM.AUTHORITY_SCOPE_CODE");case 3:return u=e.sent,s=Object(p["u"])(u),e.next=7,a({type:"updateStateReducer",payload:{roleAuthScopeCode:s}});case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}),queryRoleAuthScopeTypeCode:c.a.mark(function e(t,r){var n,a,u,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=r.call,a=r.put,e.next=3,n(i["f"],"HIAM.AUTHORITY_TYPE_CODE");case 3:return u=e.sent,s=Object(p["u"])(u),e.next=7,a({type:"updateStateReducer",payload:{roleAuthScopeTypeCode:s}});case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}),queryRoleAuth:c.a.mark(function e(t,r){var n,a,u,s,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.call,u=r.put,e.next=4,a(oe,n);case 4:return s=e.sent,o=Object(p["u"])(s),e.next=8,u({type:"updateStateReducer",payload:{roleAuth:o}});case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}},e)}),saveRoleAuth:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.call,e.next=4,a(pe,n);case 4:return u=e.sent,e.abrupt("return",Object(p["u"])(u));case 6:case"end":return e.stop()}},e)}),deleteRoleAuth:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.call,e.next=4,a(he,n);case 4:return u=e.sent,e.abrupt("return",Object(p["u"])(u));case 6:case"end":return e.stop()}},e)})},reducers:{updateStateReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,r)},setCodeReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,{code:Object.assign(e.code,r)})},updateRoleDetailReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,{roleDetail:Object(u["a"])({},e.roleDetail,r)})},initRoleDetailReducer:function(e){return Object(u["a"])({},e,{roleDetail:Object.assign(e.roleDetail,{form:{},permissions:Object(u["a"])({},fe),revokedPermissions:Object(u["a"])({},fe)})})},updateRoleDetailPermissionsDrawerReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,{roleDetail:Object(u["a"])({},e.roleDetail,{permissionsDrawer:Object(u["a"])({},e.roleDetail.permissionsDrawer,r)})})}}}}}]);