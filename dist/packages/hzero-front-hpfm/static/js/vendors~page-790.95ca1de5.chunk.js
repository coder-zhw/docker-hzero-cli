(window["webpackJsonppackages_hzero_front_hpfm_name_"]=window["webpackJsonppackages_hzero_front_hpfm_name_"]||[]).push([[405,381],{139:function(e,n,o){"use strict";o.r(n),o.d(n,"DragType",function(){return t}),o.d(n,"DropType",function(){return r}),o.d(n,"emptyFieldType",function(){return l}),o.d(n,"emptyField",function(){return d}),o.d(n,"attributeNameProp",function(){return c}),o.d(n,"attributeValueProp",function(){return m}),o.d(n,"attributeTypeProp",function(){return s}),o.d(n,"fieldNameProp",function(){return p}),o.d(n,"fieldLabelProp",function(){return u}),o.d(n,"maxFormCol",function(){return f}),o.d(n,"defaultFormCol",function(){return h}),o.d(n,"autoSizeWidth",function(){return g}),o.d(n,"DynamicConfigContext",function(){return v});var a=o(1),i=o.n(a),t={dragComponent:"dragComponent",dragField:"dragField",drawDragComponent:"drawDragComponent",drawDragField:"drawDragField"},r={draw:[t.dragComponent],drawComponent:[t.dragComponent,t.drawDragComponent],drawField:[t.dragField,t.drawDragField]},l="empty",d={componentType:l},c="attributeName",m="value",s="attributeType",p="fieldName",u="fieldLabel",f=4,h=2,g=120,v=i.a.createContext({})},151:function(e,n,o){"use strict";o.r(n),o.d(n,"default",function(){return z});o(516);var a=o(515),i=(o(658),o(585)),t=(o(502),o(508)),r=(o(513),o(514)),l=(o(586),o(587)),d=(o(671),o(672)),c=o(493),m=o(494),s=o(496),p=o(495),u=o(523),f=o(497),h=o(570),g=o.n(h),v=o(542),R=o.n(v),y=o(978),b=o.n(y),w=o(678),C=o.n(w),x=o(827),k=o.n(x),P=o(692),E=o.n(P),F=o(507),O=o.n(F),j=o(1),N=o.n(j),T=o(589),I=o(501),W=o(684),D=o.n(W),M=o(139),X={padding:2},Y={appendRow:"appendRow",appendCol:"appendCol",removeRow:"removeRow",removeCol:"removeCol",mergeRight:"mergeRight",cancelMergeRight:"cancelMergeRight"},z=function(e){function n(e){var o;return Object(c["a"])(this,n),o=Object(s["a"])(this,Object(p["a"])(n).call(this,e)),o.menuRef=N.a.createRef(),o.handleRemoveTrigger=o.handleRemoveTrigger.bind(Object(u["a"])(o)),o.handleFieldMenuClick=o.handleFieldMenuClick.bind(Object(u["a"])(o)),o.handleRemoveRow=o.handleRemoveRow.bind(Object(u["a"])(o)),o.handleRemoveCol=o.handleRemoveCol.bind(Object(u["a"])(o)),o.handleRefresh=o.handleRefresh.bind(Object(u["a"])(o)),o.handleCleanWillRemovePositionX=o.handleCleanWillRemovePositionX.bind(Object(u["a"])(o)),o.handleCleanWillRemovePositionY=o.handleCleanWillRemovePositionY.bind(Object(u["a"])(o)),o}return Object(f["a"])(n,e),Object(m["a"])(n,[{key:"render",value:function(){var e=this,n=this.props,o=n.children,a=n.menuItemProps,c=n.component,m=n.currentEditField,s=n.willRemovePositionY,p=n.willRemovePositionX,u=n.positionY,f=n.positionX,h=n.positionRightX,g=n.isOverAndCanDrop,v=[D.a["cell-control"]],R=m===c,y=c.componentType!==M["emptyFieldType"],b=!1;return u===s?b=!0:p>=f&&p<h&&(b=!0),R&&v.push(D.a["cell-control-active"]),y||v.push(D.a["cell-control-placeholder"]),b&&v.push(D.a["cell-control-will-remove"]),g&&v.push(D.a["cell-control-over"]),N.a.createElement("div",{className:v.join(" ")},N.a.createElement("div",{className:D.a["cell-control-component"]},o),y&&N.a.createElement("i",{className:D.a["cell-control-remove"]},N.a.createElement(d["default"],{onConfirm:this.handleRemoveTrigger,title:I["a"].get("hpfm.ui.message.field.removeTitle").d("\u662f\u5426\u786e\u8ba4\u5220\u9664")},N.a.createElement("i",{className:"anticon"}))),N.a.createElement("div",{className:D.a["cell-control-menu"],ref:this.menuRef},N.a.createElement(i["default"],{getPopupContainer:function(){return e.menuRef.current||document.body},overlay:N.a.createElement(l["default"],{onClick:this.handleFieldMenuClick},N.a.createElement(l["default"].Item,{key:Y.appendRow,disabled:!a.canInsertBottom},N.a.createElement("i",{className:"menu-icon menu-icon-append-row"}),I["a"].get("hpfm.codeRule.model.codeRule.addRow").d("\u5411\u4e0b\u65b0\u589e\u4e00\u884c")),N.a.createElement(l["default"].Item,{key:Y.appendCol,disabled:!a.canInsertRight},N.a.createElement("i",{className:"menu-icon menu-icon-append-col"}),I["a"].get("hpfm.codeRule.model.codeRule.addColumn").d("\u5411\u4e0b\u65b0\u589e\u4e00\u5217")),N.a.createElement(l["default"].Divider,null),N.a.createElement(l["default"].Item,{key:Y.mergeRight,disabled:!a.canMergeRight},N.a.createElement("i",{className:"menu-icon menu-icon-merge-right"}),I["a"].get("hpfm.codeRule.model.codeRule.combineRight").d("\u5411\u53f3\u5408\u5e76")),N.a.createElement(l["default"].Item,{key:Y.cancelMergeRight,disabled:!a.canCancelMergeRight},N.a.createElement("i",{className:"menu-icon menu-icon-cancel-merge-right"}),I["a"].get("hpfm.codeRule.model.codeRule.cancelCombine").d("\u53d6\u6d88\u5408\u5e76")),N.a.createElement(l["default"].Divider,null),N.a.createElement(l["default"].Item,{key:Y.removeRow,disabled:!a.canRemoveRow},N.a.createElement("i",{className:"menu-icon menu-icon-remove-row"}),I["a"].get("hpfm.codeRule.model.codeRule.deleteRow").d("\u5220\u9664\u884c")),N.a.createElement(l["default"].Item,{key:Y.removeCol,disabled:!a.canRemoveCol},N.a.createElement("i",{className:"menu-icon menu-icon-remove-col"}),I["a"].get("hpfm.codeRule.model.codeRule.deleteCol").d("\u5220\u9664\u5217")))},N.a.createElement(t["default"],{style:X},N.a.createElement(r["default"],{type:"down"})))))}},{key:"handleRemoveTrigger",value:function(e){e.stopPropagation();var n=this.props,o=n.component,a=n.pComponent,i=n.fieldOptions,t=n.onRemoveField;O()(t)&&t(a,o,i)}},{key:"handleFieldMenuClick",value:function(e){var n=e.key;switch(n){case Y.appendRow:this.handleAppendRow();break;case Y.appendCol:this.handleAppendCol();break;case Y.removeRow:this.handleRemoveRowTrigger();break;case Y.removeCol:this.handleRemoveColTrigger();break;case Y.mergeRight:this.handleMergeRight();break;case Y.cancelMergeRight:this.handleCancelMergeRight();break;default:break}}},{key:"handleAppendRow",value:function(){for(var e=this.props,n=e.colCount,o=e.rowIndex,a=e.pComponent,i=[],t=0;t<n;t+=1)i.push(E()(M["emptyField"]));var r=o+1;a.fields=k()([],C()(a.fields,0,r),[i],C()(a.fields,r)),this.handleRefresh()}},{key:"handleRemoveRowTrigger",value:function(){var e=this.props,n=e.rowCount,o=e.pComponent,i=e.positionY,t=e.rowIndex;n<2?T["a"].warning({message:I["a"].get("hpfm.codeRule.model.codeRule.canNotDelLastRow").d("\u4e0d\u80fd\u5220\u9664\u6700\u540e\u4e00\u884c")}):b()(o.fields[t],function(e){return e.componentType===M["emptyFieldType"]})?this.handleRemoveRow():(this.handleUpdateWillRemovePositionY(i),a["default"].confirm({content:I["a"].get("hpfm.codeRule.model.codeRule.isDelCurRow").d("\u662f\u5426\u5220\u9664\u5f53\u524d\u884c"),onOk:this.handleRemoveRow,onCancel:this.handleCleanWillRemovePositionY}))}},{key:"handleRemoveRow",value:function(){var e=this.props,n=e.rowIndex,o=e.pComponent;o.fields=k()([],C()(o.fields,0,n),C()(o.fields,n+1)),this.handleCleanWillRemovePositionY(),this.handleRefresh()}},{key:"handleAppendCol",value:function(){for(var e=this.props,n=e.pComponent,o=e.rowIndex,a=e.colIndex,i=n.fields[o],t=0,r=0;r<=a;r+=1){var l=i[r];l.colspan&&R()(l.colspan)?t+=l.colspan:t+=1}g()(n.fields,function(e,o){var a=0;g()(e,function(i,r){var l=i.colspan&&R()(i.colspan);if(a+=l?i.colspan:1,a>t)return i.colspan+=1,!1;if(a===t){var d=r+1;return n.fields[o]=k()([],C()(e,0,d),[E()(M["emptyField"])],C()(e,d)),!1}})}),this.handleRefresh()}},{key:"handleRemoveColTrigger",value:function(){var e=this.props,n=e.colCount,o=e.positionRightX;n<2?T["a"].warning({message:I["a"].get("hpfm.codeRule.model.codeRule.canNotDelLastCol").d("\u4e0d\u80fd\u5220\u9664\u6700\u540e\u4e00\u5217")}):(this.handleUpdateWillRemovePositionX(o-1),a["default"].confirm({content:I["a"].get("hpfm.codeRule.model.codeRule.isDelCurCol").d("\u662f\u5426\u5220\u9664\u5f53\u524d\u5217"),onOk:this.handleRemoveCol,onCancel:this.handleCleanWillRemovePositionX}))}},{key:"handleRemoveCol",value:function(){for(var e=this.props,n=e.pComponent,o=e.rowIndex,a=e.colIndex,i=n.fields[o],t=0,r=0;r<=a;r+=1){var l=i[r];l.colspan&&R()(l.colspan)?t+=l.colspan:t+=1}g()(n.fields,function(e,o){var a=0;g()(e,function(i,r){var l=i.colspan&&R()(i.colspan);return a+=l?i.colspan:1,a>=t&&l?(2===i.colspan?delete i.colspan:i.colspan-=1,!1):a===t?(n.fields[o]=k()([],C()(e,0,r),C()(e,r+1)),!1):void 0})}),this.handleCleanWillRemovePositionX(),this.handleRefresh()}},{key:"handleUpdateWillRemovePositionY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=this.props.onUpdateWillRemovePositionY;O()(n)&&n(e)}},{key:"handleUpdateWillRemovePositionX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=this.props.onUpdateWillRemovePositionX;O()(n)&&n(e)}},{key:"handleCleanWillRemovePositionY",value:function(){var e=this.props.onUpdateWillRemovePositionY;O()(e)&&e(-1)}},{key:"handleCleanWillRemovePositionX",value:function(){var e=this.props.onUpdateWillRemovePositionX;O()(e)&&e(-1)}},{key:"handleMergeRight",value:function(){var e=this.props,n=e.rowIndex,o=e.colIndex,a=e.pComponent,i=a.fields,t=void 0===i?[]:i,r=t[n];if(r[o+1]&&r[o+1].componentType===M["emptyFieldType"]){var l=r[o];l.colspan&&R()(l.colspan)?l.colspan+=1:l.colspan=2,a.fields[n]=k()([],C()(r,0,o+1),C()(r,o+2)),this.handleRefresh()}else T["a"].warning({message:I["a"].get("hpfm.codeRule.model.codeRule.canCombineRightFiled").d("\u53ea\u80fd\u5408\u5e76\u53f3\u4fa7\u7a7a\u5b57\u6bb5")})}},{key:"handleCancelMergeRight",value:function(){var e=this.props,n=e.component,o=e.pComponent,a=e.rowIndex,i=e.colIndex;n.colspan&&R()(n.colspan)||T["a"].warning({message:I["a"].get("hpfm.codeRule.model.codeRule.canQCFiled").d("\u53ea\u80fd\u62c6\u5206\u5408\u5e76\u540e\u7684\u5b57\u6bb5")}),n.colspan>2?n.colspan-=1:delete n.colspan;var t=o.fields[a],r=i+1;o.fields[a]=k()([],C()(t,0,r),[E()(M["emptyField"])],C()(t,r)),this.handleRefresh()}},{key:"handleRefresh",value:function(){var e=this.props.onRefresh;O()(e)&&e()}}]),n}(N.a.Component)},516:function(e,n,o){"use strict";o(498),o(549),o(502)},549:function(e,n,o){e.exports={"ant-modal":"ant-modal","ant-modal-wrap":"ant-modal-wrap","ant-modal-title":"ant-modal-title","ant-modal-content":"ant-modal-content","ant-modal-close":"ant-modal-close","ant-modal-close-x":"ant-modal-close-x","ant-modal-header":"ant-modal-header","ant-modal-body":"ant-modal-body","ant-modal-footer":"ant-modal-footer","zoom-enter":"zoom-enter","zoom-appear":"zoom-appear","ant-modal-mask":"ant-modal-mask","ant-modal-mask-hidden":"ant-modal-mask-hidden","ant-modal-open":"ant-modal-open","vertical-center-modal":"vertical-center-modal","ant-confirm":"ant-confirm","ant-confirm-body-wrapper":"ant-confirm-body-wrapper","ant-confirm-body":"ant-confirm-body","ant-confirm-title":"ant-confirm-title","ant-confirm-content":"ant-confirm-content",anticon:"anticon","ant-confirm-btns":"ant-confirm-btns","ant-confirm-error":"ant-confirm-error","ant-confirm-warning":"ant-confirm-warning","ant-confirm-confirm":"ant-confirm-confirm","ant-confirm-info":"ant-confirm-info","ant-confirm-success":"ant-confirm-success"}},589:function(e,n,o){"use strict";var a=o(131),i=(o(664),o(537)),t=o(509),r=o(501);function l(e){var n=e||{},o=n.message,l=n.description,d=Object(t["a"])(n,["message","description"]);i["default"].success(Object(a["a"])({message:o||r["a"].get("hzero.common.notification.success").d("\u64cd\u4f5c\u6210\u529f"),description:l,duration:2.5,className:"success"},d))}function d(e){var n=e||{},o=n.message,l=n.description,d=Object(t["a"])(n,["message","description"]);i["default"].error(Object(a["a"])({message:o||r["a"].get("hzero.common.notification.error").d("\u64cd\u4f5c\u5931\u8d25"),description:l,duration:2.5,className:"error"},d))}function c(e){var n=e||{},o=n.message,l=n.description,d=Object(t["a"])(n,["message","description"]);i["default"].warning(Object(a["a"])({message:o||r["a"].get("hzero.common.notification.warn").d("\u64cd\u4f5c\u5f02\u5e38"),description:l,duration:2.5,className:"warn"},d))}function m(e){var n=e||{},o=n.message,r=n.description,l=Object(t["a"])(n,["message","description"]);i["default"].info(Object(a["a"])({message:o,description:r,duration:2.5,className:"info"},l))}n["a"]={success:l,error:d,warning:c,info:m}},678:function(e,n,o){var a=o(674),i=o(530),t=o(583);function r(e,n,o){var r=null==e?0:e.length;return r?(o&&"number"!=typeof o&&i(e,n,o)?(n=0,o=r):(n=null==n?0:t(n),o=void 0===o?r:t(o)),a(e,n,o)):[]}e.exports=r},684:function(e,n,o){e.exports={"drop-component":"hpfm-routes-ui-designer-designer-panel-index-drop-component","drop-component-active":"hpfm-routes-ui-designer-designer-panel-index-drop-component-active","drop-page-more":"hpfm-routes-ui-designer-designer-panel-index-drop-page-more","draw-drag-component":"hpfm-routes-ui-designer-designer-panel-index-draw-drag-component","draw-drag-field":"hpfm-routes-ui-designer-designer-panel-index-draw-drag-field","draw-drag-field-dragging":"hpfm-routes-ui-designer-designer-panel-index-draw-drag-field-dragging","dynamic-form":"hpfm-routes-ui-designer-designer-panel-index-dynamic-form","dynamic-form-row":"hpfm-routes-ui-designer-designer-panel-index-dynamic-form-row","dynamic-form-item":"hpfm-routes-ui-designer-designer-panel-index-dynamic-form-item","dynamic-form-item-placeholder":"hpfm-routes-ui-designer-designer-panel-index-dynamic-form-item-placeholder","dynamic-form-item-label":"hpfm-routes-ui-designer-designer-panel-index-dynamic-form-item-label",required:"hpfm-routes-ui-designer-designer-panel-index-required","dynamic-form-item-control":"hpfm-routes-ui-designer-designer-panel-index-dynamic-form-item-control","cell-control":"hpfm-routes-ui-designer-designer-panel-index-cell-control","cell-control-active":"hpfm-routes-ui-designer-designer-panel-index-cell-control-active","cell-control-remove":"hpfm-routes-ui-designer-designer-panel-index-cell-control-remove","cell-control-menu":"hpfm-routes-ui-designer-designer-panel-index-cell-control-menu","cell-control-placeholder":"hpfm-routes-ui-designer-designer-panel-index-cell-control-placeholder","cell-control-over":"hpfm-routes-ui-designer-designer-panel-index-cell-control-over","cell-control-component":"hpfm-routes-ui-designer-designer-panel-index-cell-control-component","cell-control-will-remove":"hpfm-routes-ui-designer-designer-panel-index-cell-control-will-remove","dynamic-toolbar":"hpfm-routes-ui-designer-designer-panel-index-dynamic-toolbar","dynamic-toolbar-item":"hpfm-routes-ui-designer-designer-panel-index-dynamic-toolbar-item","dynamic-toolbar-item-control":"hpfm-routes-ui-designer-designer-panel-index-dynamic-toolbar-item-control","dynamic-table":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table","dynamic-table-content":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-content","dynamic-table-content-field":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-content-field","dynamic-table-content-field-width":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-content-field-width","dynamic-table-content-field-width-rule-bg":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-content-field-width-rule-bg","dynamic-table-content-field-width-item":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-content-field-width-item","dynamic-table-data":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-data","dynamic-table-pagination":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-pagination","dynamic-table-item":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-item","dynamic-table-item-control":"hpfm-routes-ui-designer-designer-panel-index-dynamic-table-item-control","dynamic-tabs":"hpfm-routes-ui-designer-designer-panel-index-dynamic-tabs","dynamic-tabs-active":"hpfm-routes-ui-designer-designer-panel-index-dynamic-tabs-active","dynamic-tabs-placeholder":"hpfm-routes-ui-designer-designer-panel-index-dynamic-tabs-placeholder","dynamic-tabs-field-active":"hpfm-routes-ui-designer-designer-panel-index-dynamic-tabs-field-active"}},827:function(e,n,o){var a=o(965),i=o(601),t=o(596),r=o(512);function l(){var e=arguments.length;if(!e)return[];var n=Array(e-1),o=arguments[0],l=e;while(l--)n[l-1]=arguments[l];return a(r(o)?t(o):[o],i(n,1))}e.exports=l},978:function(e,n,o){var a=o(979),i=o(980),t=o(541),r=o(512),l=o(530);function d(e,n,o){var d=r(e)?a:i;return o&&l(e,n,o)&&(n=void 0),d(e,t(n,3))}e.exports=d},979:function(e,n){function o(e,n){var o=-1,a=null==e?0:e.length;while(++o<a)if(!n(e[o],o,e))return!1;return!0}e.exports=o},980:function(e,n,o){var a=o(556);function i(e,n){var o=!0;return a(e,function(e,a,i){return o=!!n(e,a,i),o}),o}e.exports=i}}]);