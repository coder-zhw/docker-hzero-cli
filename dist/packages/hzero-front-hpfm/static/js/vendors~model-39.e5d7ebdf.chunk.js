(window["webpackJsonppackages_hzero_front_hpfm_name_"]=window["webpackJsonppackages_hzero_front_hpfm_name_"]||[]).push([[482],{457:function(e,t,r){"use strict";r.r(t);var n=r(132),a=r(2),c=r.n(a),u=r(131),s=r(504),o=r(134),i=r(648),p=r(631),l=Object(s["m"])();function h(){return Object(s["A"])()?"".concat(l,"/permission-rel"):"permission-rel"}function d(){return b.apply(this,arguments)}function b(){return b=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-ranges"),{query:t}));case 2:case"end":return e.stop()}},e)})),b.apply(this,arguments)}function f(){return v.apply(this,arguments)}function v(){return v=Object(o["a"])(c.a.mark(function e(){var t,r,n=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1?n[1]:void 0,e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-ranges"),{query:t}));case 3:case"end":return e.stop()}},e)})),v.apply(this,arguments)}function w(){return O.apply(this,arguments)}function O(){return O=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-rules"),{query:t}));case 2:case"end":return e.stop()}},e)})),O.apply(this,arguments)}function m(){return j.apply(this,arguments)}function j(){return j=Object(o["a"])(c.a.mark(function e(){var t,r,n=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1?n[1]:void 0,e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-rules"),{query:t}));case 3:case"end":return e.stop()}},e)})),j.apply(this,arguments)}function y(){return x.apply(this,arguments)}function x(){return x=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/lovs/value"),{query:t}));case 2:case"end":return e.stop()}},e)})),x.apply(this,arguments)}function k(){return g.apply(this,arguments)}function g(){return g=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-rules"),{method:"POST",body:t}));case 2:case"end":return e.stop()}},e)})),g.apply(this,arguments)}function E(){return R.apply(this,arguments)}function R(){return R=Object(o["a"])(c.a.mark(function e(){var t,r,n=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1?n[1]:void 0,e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-rules"),{method:"POST",body:t}));case 3:case"end":return e.stop()}},e)})),R.apply(this,arguments)}function T(){return S.apply(this,arguments)}function S(){return S=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-rules"),{method:"PUT",body:t}));case 2:case"end":return e.stop()}},e)})),S.apply(this,arguments)}function A(){return _.apply(this,arguments)}function _(){return _=Object(o["a"])(c.a.mark(function e(){var t,r,n=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1?n[1]:void 0,e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-rules"),{method:"PUT",body:t}));case 3:case"end":return e.stop()}},e)})),_.apply(this,arguments)}function P(e){return q.apply(this,arguments)}function q(){return q=Object(o["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-rules"),{method:"DELETE",body:t}));case 1:case"end":return e.stop()}},e)})),q.apply(this,arguments)}function z(e,t){return G.apply(this,arguments)}function G(){return G=Object(o["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-rules"),{method:"DELETE",body:t}));case 1:case"end":return e.stop()}},e)})),G.apply(this,arguments)}function U(){return C.apply(this,arguments)}function C(){return C=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-ranges"),{method:"POST",body:t}));case 2:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function F(){return L.apply(this,arguments)}function L(){return L=Object(o["a"])(c.a.mark(function e(){var t,r,n=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1?n[1]:void 0,e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-ranges"),{method:"POST",body:t}));case 3:case"end":return e.stop()}},e)})),L.apply(this,arguments)}function D(){return J.apply(this,arguments)}function J(){return J=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-ranges"),{method:"PUT",body:t}));case 2:case"end":return e.stop()}},e)})),J.apply(this,arguments)}function I(){return W.apply(this,arguments)}function W(){return W=Object(o["a"])(c.a.mark(function e(){var t,r,n=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=n.length>1?n[1]:void 0,e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-ranges"),{method:"PUT",body:t}));case 3:case"end":return e.stop()}},e)})),W.apply(this,arguments)}function H(e){return N.apply(this,arguments)}function N(){return N=Object(o["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/permission-ranges"),{method:"DELETE",body:t}));case 1:case"end":return e.stop()}},e)})),N.apply(this,arguments)}function B(e,t){return K.apply(this,arguments)}function K(){return K=Object(o["a"])(c.a.mark(function e(t,r){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(r,"/permission-ranges"),{method:"DELETE",body:t}));case 1:case"end":return e.stop()}},e)})),K.apply(this,arguments)}function M(){return Q.apply(this,arguments)}function Q(){return Q=Object(o["a"])(c.a.mark(function e(){var t,r=arguments;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(h()),{method:"POST",body:t}));case 2:case"end":return e.stop()}},e)})),Q.apply(this,arguments)}function V(e){return X.apply(this,arguments)}function X(){return X=Object(o["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(h(),"/").concat(t)));case 1:case"end":return e.stop()}},e)})),X.apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return Z=Object(o["a"])(c.a.mark(function e(t){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["a"])("".concat(p["k"],"/v1/").concat(h()),{method:"DELETE",body:t}));case 1:case"end":return e.stop()}},e)})),Z.apply(this,arguments)}t["default"]={namespace:"permission",state:{code:{},range:{list:{dataSource:[],pagination:{pageSize:10,total:0,current:1}}},rule:{list:{dataSource:[],pagination:{pageSize:10,total:0,current:1}}}},effects:{queryRangeList:c.a.mark(function e(t,r){var n,a,o,i,p,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.put,o=r.call,i=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,o(f,Object(u["a"])({page:0,size:10},n),i);case 6:p=e.sent,e.next=12;break;case 9:return e.next=11,o(d,Object(u["a"])({page:0,size:10},n));case 11:p=e.sent;case 12:if(l=Object(s["u"])(p),!l){e.next=16;break}return e.next=16,a({type:"updateRangeStateReducer",payload:{list:{dataSource:l.content||[],pagination:Object(s["c"])(l)}}});case 16:case"end":return e.stop()}},e)}),queryRuleList:c.a.mark(function e(t,r){var n,a,o,i,p,l;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.put,o=r.call,i=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,o(m,Object(u["a"])({page:0,size:10},n),i);case 6:p=e.sent,e.next=12;break;case 9:return e.next=11,o(w,Object(u["a"])({page:0,size:10},n));case 11:p=e.sent;case 12:if(l=Object(s["u"])(p),!l){e.next=16;break}return e.next=16,a({type:"updateRuleStateReducer",payload:{list:{dataSource:l.content||[],pagination:Object(s["c"])(l)}}});case 16:case"end":return e.stop()}},e)}),queryCode:c.a.mark(function e(t,r){var a,u,o,i,p;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.payload,u=r.put,o=r.call,e.next=4,o(y,a);case 4:if(i=e.sent,p=Object(s["u"])(i),!p){e.next=9;break}return e.next=9,u({type:"setCodeReducer",payload:Object(n["a"])({},a.lovCode,p)});case 9:case"end":return e.stop()}},e)}),createRule:c.a.mark(function e(t,r){var n,a,u,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.data,a=r.call,u=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,a(E,n,u);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,a(k,n,u);case 11:o=e.sent;case 12:return e.abrupt("return",Object(s["u"])(o));case 13:case"end":return e.stop()}},e)}),updateRule:c.a.mark(function e(t,r){var n,a,u,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.data,a=r.call,u=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,a(A,n,u);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,a(T,n);case 11:o=e.sent;case 12:return e.abrupt("return",Object(s["u"])(o));case 13:case"end":return e.stop()}},e)}),createRange:c.a.mark(function e(t,r){var n,a,u,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.data,a=r.call,u=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,a(F,n,u);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,a(U,n);case 11:o=e.sent;case 12:return e.abrupt("return",Object(s["u"])(o));case 13:case"end":return e.stop()}},e)}),updateRange:c.a.mark(function e(t,r){var n,a,u,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.data,a=r.call,u=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,a(I,n,u);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,a(D,n);case 11:o=e.sent;case 12:return e.abrupt("return",Object(s["u"])(o));case 13:case"end":return e.stop()}},e)}),deleteRule:c.a.mark(function e(t,r){var n,a,u,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.call,u=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,a(z,n,u);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,a(P,n);case 11:o=e.sent;case 12:return e.abrupt("return",Object(s["u"])(o));case 13:case"end":return e.stop()}},e)}),deleteRange:c.a.mark(function e(t,r){var n,a,u,o;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.payload,a=r.call,u=Object(s["m"])(),!Object(s["A"])()){e.next=9;break}return e.next=6,a(B,n,u);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,a(H,n);case 11:o=e.sent;case 12:return e.abrupt("return",Object(s["u"])(o));case 13:case"end":return e.stop()}},e)}),addPermissionRel:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data,a=r.call,e.next=4,a(M,n);case 4:return u=e.sent,e.abrupt("return",Object(s["u"])(u));case 6:case"end":return e.stop()}},e)}),queryPermissionRel:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.rangeId,a=r.call,e.next=4,a(V,n);case 4:return u=e.sent,e.abrupt("return",Object(s["u"])(u));case 6:case"end":return e.stop()}},e)}),deletePermissionRel:c.a.mark(function e(t,r){var n,a,u;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.payload,a=r.call,e.next=4,a(Y,n);case 4:return u=e.sent,e.abrupt("return",Object(s["u"])(u));case 6:case"end":return e.stop()}},e)})},reducers:{updateStateReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,r)},updateRangeStateReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,{range:Object(u["a"])({},e.range,r)})},updateRuleStateReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,{rule:Object(u["a"])({},e.rule,r)})},setCodeReducer:function(e,t){var r=t.payload;return Object(u["a"])({},e,{code:Object.assign(e.code,r)})}}}},648:function(e,t,r){"use strict";r.d(t,"a",function(){return O});var n=r(2),a=r.n(n),c=r(131),u=r(134),s=(r(664),r(537)),o=r(604),i=r.n(o),p=r(535),l=r(501),h=r(631),d=r(504);function b(e){if(e.status>=200&&e.status<300)return e;var t=e.statusText,r=new Error(t);throw r.name=e.status,r.response=e,r}function f(e){return v.apply(this,arguments)}function v(){return v=Object(u["a"])(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(501!==t.name){e.next=14;break}return e.prev=1,e.next=4,t.response.json();case 4:r=e.sent,dvaApp._store.dispatch({type:"error/updateState",payload:{normal501:r}}),dvaApp._store.dispatch(p["routerRedux"].push({pathname:"/exception/501"})),e.next=12;break;case 9:throw e.prev=9,e.t0=e["catch"](1),t;case 12:e.next=15;break;case 14:throw t;case 15:case"end":return e.stop()}},e,null,[[1,9]])})),v.apply(this,arguments)}s["default"].config({placement:"bottomRight"});var w={Pragma:"no-cache","Cache-Control":"no-cache"};function O(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={credentials:"include",headers:w},a=r.beforeCatch,u=e.startsWith("/api")||e.startsWith("http")?e:"".concat(h["a"]).concat(e),o=Object(c["a"])({},n,t);if("POST"!==o.method&&"PUT"!==o.method&&"DELETE"!==o.method&&"PATCH"!==o.method||(o.body instanceof FormData?o.headers=Object(c["a"])({Accept:"application/json"},o.headers):(o.headers=Object(c["a"])({Accept:"application/json","Content-Type":"application/json; charset=utf-8"},o.headers),o.body=JSON.stringify(o.body))),o.query){var v=o.query;"GET"===o.method&&(v=Object(d["g"])(o.query)),u=Object(d["h"])(u,v)}var m=Object(d["i"])();m&&(o.headers=Object(c["a"])({},o.headers,{Authorization:"bearer ".concat(m)}));var j=i()(u,o).then(b).then(function(e){return 204===e.status?{}:"blob"===o.responseType?e.blob():"text"===o.responseType?e.text():e.json()});return a&&(j=j.catch(a)),j=j.catch(f).catch(function(e){var t=e.name,r=Object(d["w"])("isErrorFlag");if(r||Object(d["G"])("isErrorFlag",!1),401===t){var n=encodeURIComponent(window.location.toString());return m?void O("".concat(h["j"],"/public/token/kickoff"),{method:"POST",query:{access_token:m}}).then(function(e){1===e.kickoff?(dvaApp._store.dispatch(p["routerRedux"].push({pathname:"/public/kickoff"})),Object(d["G"])("redirectUrl",n),Object(d["G"])("isErrorFlag",!1)):(dvaApp._store.dispatch(p["routerRedux"].push({pathname:"/public/unauthorized"})),Object(d["G"])("isErrorFlag",!0),Object(d["G"])("redirectUrl",n))}):(Object(d["E"])(),Object(d["F"])(),-1!==u.indexOf(h["b"])?void(h["m"].includes("?")?(window.location.href="".concat(h["m"],"&redirect_uri=").concat(n),Object(d["G"])("isErrorFlag",!1),Object(d["G"])("redirectUrl",n)):(window.location.href="".concat(h["m"],"?redirect_uri=").concat(n),d["G"].apply("isErrorFlag",!1),Object(d["G"])("redirectUrl",n))):void(r||(dvaApp._store.dispatch(p["routerRedux"].push({pathname:"/public/unauthorized"})),Object(d["G"])("isErrorFlag",!0),Object(d["G"])("redirectUrl",n))))}if(-1!==u.indexOf(h["b"]))return e;"TypeError"!==t?s["default"].error({message:"".concat(t),description:e.message}):s["default"].error({message:l["a"].get("hzero.common.notification.network.typeError").d("\u7f51\u7edc\u8bf7\u6c42\u5f02\u5e38"),description:l["a"].get("hzero.common.notification.typeError.description").d("\u8bf7\u7a0d\u540e\u91cd\u8bd5")})}),j}}}]);